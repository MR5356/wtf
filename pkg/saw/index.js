(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))m(w);new MutationObserver(w=>{for(const x of w)if(x.type==="childList")for(const E of x.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&m(E)}).observe(document,{childList:!0,subtree:!0});function p(w){const x={};return w.integrity&&(x.integrity=w.integrity),w.referrerPolicy&&(x.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?x.credentials="include":w.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function m(w){if(w.ep)return;w.ep=!0;const x=p(w);fetch(w.href,x)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Si(e,n){const p=new Set(e.split(","));return n?m=>p.has(m.toLowerCase()):m=>p.has(m)}const me={},rt=[],De=()=>{},br=()=>!1,$t=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ci=e=>e.startsWith("onUpdate:"),we=Object.assign,bi=(e,n)=>{const p=e.indexOf(n);p>-1&&e.splice(p,1)},yr=Object.prototype.hasOwnProperty,fe=(e,n)=>yr.call(e,n),ce=Array.isArray,_t=e=>zt(e)==="[object Map]",wr=e=>zt(e)==="[object Set]",he=e=>typeof e=="function",be=e=>typeof e=="string",jt=e=>typeof e=="symbol",Se=e=>e!==null&&typeof e=="object",Ss=e=>(Se(e)||he(e))&&he(e.then)&&he(e.catch),Er=Object.prototype.toString,zt=e=>Er.call(e),xr=e=>zt(e).slice(8,-1),Lr=e=>zt(e)==="[object Object]",yi=e=>be(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,pt=Si(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kt=e=>{const n=Object.create(null);return p=>n[p]||(n[p]=e(p))},kr=/-(\w)/g,at=Kt(e=>e.replace(kr,(n,p)=>p?p.toUpperCase():"")),Rr=/\B([A-Z])/g,ht=Kt(e=>e.replace(Rr,"-$1").toLowerCase()),Cs=Kt(e=>e.charAt(0).toUpperCase()+e.slice(1)),Qt=Kt(e=>e?`on${Cs(e)}`:""),Xe=(e,n)=>!Object.is(e,n),ei=(e,n)=>{for(let p=0;p<e.length;p++)e[p](n)},Ht=(e,n,p)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:p})},Ar=e=>{const n=parseFloat(e);return isNaN(n)?e:n};let $i;const bs=()=>$i||($i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wi(e){if(ce(e)){const n={};for(let p=0;p<e.length;p++){const m=e[p],w=be(m)?Mr(m):wi(m);if(w)for(const x in w)n[x]=w[x]}return n}else if(be(e)||Se(e))return e}const Dr=/;(?![^(]*\))/g,Tr=/:([^]+)/,Br=/\/\*[^]*?\*\//g;function Mr(e){const n={};return e.replace(Br,"").split(Dr).forEach(p=>{if(p){const m=p.split(Tr);m.length>1&&(n[m[0].trim()]=m[1].trim())}}),n}function Ei(e){let n="";if(be(e))n=e;else if(ce(e))for(let p=0;p<e.length;p++){const m=Ei(e[p]);m&&(n+=m+" ")}else if(Se(e))for(const p in e)e[p]&&(n+=p+" ");return n.trim()}const Or="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ir=Si(Or);function ys(e){return!!e||e===""}/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Te;class Pr{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Te,!n&&Te&&(this.index=(Te.scopes||(Te.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const p=Te;try{return Te=this,n()}finally{Te=p}}}on(){Te=this}off(){Te=this.parent}stop(n){if(this._active){let p,m;for(p=0,m=this.effects.length;p<m;p++)this.effects[p].stop();for(p=0,m=this.cleanups.length;p<m;p++)this.cleanups[p]();if(this.scopes)for(p=0,m=this.scopes.length;p<m;p++)this.scopes[p].stop(!0);if(!this.detached&&this.parent&&!n){const w=this.parent.scopes.pop();w&&w!==this&&(this.parent.scopes[this.index]=w,w.index=this.index)}this.parent=void 0,this._active=!1}}}function Hr(e,n=Te){n&&n.active&&n.effects.push(e)}function Fr(){return Te}let Qe;class xi{constructor(n,p,m,w){this.fn=n,this.trigger=p,this.scheduler=m,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Hr(this,w)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,tt();for(let n=0;n<this._depsLength;n++){const p=this.deps[n];if(p.computed&&(Wr(p.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),it()}return this._dirtyLevel>=4}set dirty(n){this._dirtyLevel=n?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let n=qe,p=Qe;try{return qe=!0,Qe=this,this._runnings++,ji(this),this.fn()}finally{zi(this),this._runnings--,Qe=p,qe=n}}stop(){var n;this.active&&(ji(this),zi(this),(n=this.onStop)==null||n.call(this),this.active=!1)}}function Wr(e){return e.value}function ji(e){e._trackId++,e._depsLength=0}function zi(e){if(e.deps.length>e._depsLength){for(let n=e._depsLength;n<e.deps.length;n++)ws(e.deps[n],e);e.deps.length=e._depsLength}}function ws(e,n){const p=e.get(n);p!==void 0&&n._trackId!==p&&(e.delete(n),e.size===0&&e.cleanup())}let qe=!0,li=0;const Es=[];function tt(){Es.push(qe),qe=!1}function it(){const e=Es.pop();qe=e===void 0?!0:e}function Li(){li++}function ki(){for(li--;!li&&ci.length;)ci.shift()()}function xs(e,n,p){if(n.get(e)!==e._trackId){n.set(e,e._trackId);const m=e.deps[e._depsLength];m!==n?(m&&ws(m,e),e.deps[e._depsLength++]=n):e._depsLength++}}const ci=[];function Ls(e,n,p){Li();for(const m of e.keys()){let w;m._dirtyLevel<n&&(w??(w=e.get(m)===m._trackId))&&(m._shouldSchedule||(m._shouldSchedule=m._dirtyLevel===0),m._dirtyLevel=n),m._shouldSchedule&&(w??(w=e.get(m)===m._trackId))&&(m.trigger(),(!m._runnings||m.allowRecurse)&&m._dirtyLevel!==2&&(m._shouldSchedule=!1,m.scheduler&&ci.push(m.scheduler)))}ki()}const ks=(e,n)=>{const p=new Map;return p.cleanup=e,p.computed=n,p},hi=new WeakMap,et=Symbol(""),ui=Symbol("");function ke(e,n,p){if(qe&&Qe){let m=hi.get(e);m||hi.set(e,m=new Map);let w=m.get(p);w||m.set(p,w=ks(()=>m.delete(p))),xs(Qe,w)}}function Ue(e,n,p,m,w,x){const E=hi.get(e);if(!E)return;let i=[];if(n==="clear")i=[...E.values()];else if(p==="length"&&ce(e)){const a=Number(m);E.forEach((h,d)=>{(d==="length"||!jt(d)&&d>=a)&&i.push(h)})}else switch(p!==void 0&&i.push(E.get(p)),n){case"add":ce(e)?yi(p)&&i.push(E.get("length")):(i.push(E.get(et)),_t(e)&&i.push(E.get(ui)));break;case"delete":ce(e)||(i.push(E.get(et)),_t(e)&&i.push(E.get(ui)));break;case"set":_t(e)&&i.push(E.get(et));break}Li();for(const a of i)a&&Ls(a,4);ki()}const Ur=Si("__proto__,__v_isRef,__isVue"),Rs=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(jt)),Ki=Nr();function Nr(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...p){const m=_e(this);for(let x=0,E=this.length;x<E;x++)ke(m,"get",x+"");const w=m[n](...p);return w===-1||w===!1?m[n](...p.map(_e)):w}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...p){tt(),Li();const m=_e(this)[n].apply(this,p);return ki(),it(),m}}),e}function $r(e){const n=_e(this);return ke(n,"has",e),n.hasOwnProperty(e)}class As{constructor(n=!1,p=!1){this._isReadonly=n,this._isShallow=p}get(n,p,m){const w=this._isReadonly,x=this._isShallow;if(p==="__v_isReactive")return!w;if(p==="__v_isReadonly")return w;if(p==="__v_isShallow")return x;if(p==="__v_raw")return m===(w?x?tn:Ms:x?Bs:Ts).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(m)?n:void 0;const E=ce(n);if(!w){if(E&&fe(Ki,p))return Reflect.get(Ki,p,m);if(p==="hasOwnProperty")return $r}const i=Reflect.get(n,p,m);return(jt(p)?Rs.has(p):Ur(p))||(w||ke(n,"get",p),x)?i:Re(i)?E&&yi(p)?i:i.value:Se(i)?w?Os(i):Di(i):i}}class Ds extends As{constructor(n=!1){super(!1,n)}set(n,p,m,w){let x=n[p];if(!this._isShallow){const a=lt(x);if(!Ft(m)&&!lt(m)&&(x=_e(x),m=_e(m)),!ce(n)&&Re(x)&&!Re(m))return a?!1:(x.value=m,!0)}const E=ce(n)&&yi(p)?Number(p)<n.length:fe(n,p),i=Reflect.set(n,p,m,w);return n===_e(w)&&(E?Xe(m,x)&&Ue(n,"set",p,m):Ue(n,"add",p,m)),i}deleteProperty(n,p){const m=fe(n,p);n[p];const w=Reflect.deleteProperty(n,p);return w&&m&&Ue(n,"delete",p,void 0),w}has(n,p){const m=Reflect.has(n,p);return(!jt(p)||!Rs.has(p))&&ke(n,"has",p),m}ownKeys(n){return ke(n,"iterate",ce(n)?"length":et),Reflect.ownKeys(n)}}class jr extends As{constructor(n=!1){super(!0,n)}set(n,p){return!0}deleteProperty(n,p){return!0}}const zr=new Ds,Kr=new jr,qr=new Ds(!0),Ri=e=>e,qt=e=>Reflect.getPrototypeOf(e);function Lt(e,n,p=!1,m=!1){e=e.__v_raw;const w=_e(e),x=_e(n);p||(Xe(n,x)&&ke(w,"get",n),ke(w,"get",x));const{has:E}=qt(w),i=m?Ri:p?Bi:St;if(E.call(w,n))return i(e.get(n));if(E.call(w,x))return i(e.get(x));e!==w&&e.get(n)}function kt(e,n=!1){const p=this.__v_raw,m=_e(p),w=_e(e);return n||(Xe(e,w)&&ke(m,"has",e),ke(m,"has",w)),e===w?p.has(e):p.has(e)||p.has(w)}function Rt(e,n=!1){return e=e.__v_raw,!n&&ke(_e(e),"iterate",et),Reflect.get(e,"size",e)}function qi(e){e=_e(e);const n=_e(this);return qt(n).has.call(n,e)||(n.add(e),Ue(n,"add",e,e)),this}function Vi(e,n){n=_e(n);const p=_e(this),{has:m,get:w}=qt(p);let x=m.call(p,e);x||(e=_e(e),x=m.call(p,e));const E=w.call(p,e);return p.set(e,n),x?Xe(n,E)&&Ue(p,"set",e,n):Ue(p,"add",e,n),this}function Gi(e){const n=_e(this),{has:p,get:m}=qt(n);let w=p.call(n,e);w||(e=_e(e),w=p.call(n,e)),m&&m.call(n,e);const x=n.delete(e);return w&&Ue(n,"delete",e,void 0),x}function Xi(){const e=_e(this),n=e.size!==0,p=e.clear();return n&&Ue(e,"clear",void 0,void 0),p}function At(e,n){return function(m,w){const x=this,E=x.__v_raw,i=_e(E),a=n?Ri:e?Bi:St;return!e&&ke(i,"iterate",et),E.forEach((h,d)=>m.call(w,a(h),a(d),x))}}function Dt(e,n,p){return function(...m){const w=this.__v_raw,x=_e(w),E=_t(x),i=e==="entries"||e===Symbol.iterator&&E,a=e==="keys"&&E,h=w[e](...m),d=p?Ri:n?Bi:St;return!n&&ke(x,"iterate",a?ui:et),{next(){const{value:l,done:f}=h.next();return f?{value:l,done:f}:{value:i?[d(l[0]),d(l[1])]:d(l),done:f}},[Symbol.iterator](){return this}}}}function $e(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function Vr(){const e={get(x){return Lt(this,x)},get size(){return Rt(this)},has:kt,add:qi,set:Vi,delete:Gi,clear:Xi,forEach:At(!1,!1)},n={get(x){return Lt(this,x,!1,!0)},get size(){return Rt(this)},has:kt,add:qi,set:Vi,delete:Gi,clear:Xi,forEach:At(!1,!0)},p={get(x){return Lt(this,x,!0)},get size(){return Rt(this,!0)},has(x){return kt.call(this,x,!0)},add:$e("add"),set:$e("set"),delete:$e("delete"),clear:$e("clear"),forEach:At(!0,!1)},m={get(x){return Lt(this,x,!0,!0)},get size(){return Rt(this,!0)},has(x){return kt.call(this,x,!0)},add:$e("add"),set:$e("set"),delete:$e("delete"),clear:$e("clear"),forEach:At(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(x=>{e[x]=Dt(x,!1,!1),p[x]=Dt(x,!0,!1),n[x]=Dt(x,!1,!0),m[x]=Dt(x,!0,!0)}),[e,p,n,m]}const[Gr,Xr,Jr,Yr]=Vr();function Ai(e,n){const p=n?e?Yr:Jr:e?Xr:Gr;return(m,w,x)=>w==="__v_isReactive"?!e:w==="__v_isReadonly"?e:w==="__v_raw"?m:Reflect.get(fe(p,w)&&w in m?p:m,w,x)}const Zr={get:Ai(!1,!1)},Qr={get:Ai(!1,!0)},en={get:Ai(!0,!1)},Ts=new WeakMap,Bs=new WeakMap,Ms=new WeakMap,tn=new WeakMap;function sn(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rn(e){return e.__v_skip||!Object.isExtensible(e)?0:sn(xr(e))}function Di(e){return lt(e)?e:Ti(e,!1,zr,Zr,Ts)}function nn(e){return Ti(e,!1,qr,Qr,Bs)}function Os(e){return Ti(e,!0,Kr,en,Ms)}function Ti(e,n,p,m,w){if(!Se(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const x=w.get(e);if(x)return x;const E=rn(e);if(E===0)return e;const i=new Proxy(e,E===2?m:p);return w.set(e,i),i}function nt(e){return lt(e)?nt(e.__v_raw):!!(e&&e.__v_isReactive)}function lt(e){return!!(e&&e.__v_isReadonly)}function Ft(e){return!!(e&&e.__v_isShallow)}function Is(e){return nt(e)||lt(e)}function _e(e){const n=e&&e.__v_raw;return n?_e(n):e}function Ps(e){return Object.isExtensible(e)&&Ht(e,"__v_skip",!0),e}const St=e=>Se(e)?Di(e):e,Bi=e=>Se(e)?Os(e):e;class Hs{constructor(n,p,m,w){this.getter=n,this._setter=p,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new xi(()=>n(this._value),()=>Bt(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!w,this.__v_isReadonly=m}get value(){const n=_e(this);return(!n._cacheable||n.effect.dirty)&&Xe(n._value,n._value=n.effect.run())&&Bt(n,4),Fs(n),n.effect._dirtyLevel>=2&&Bt(n,2),n._value}set value(n){this._setter(n)}get _dirty(){return this.effect.dirty}set _dirty(n){this.effect.dirty=n}}function on(e,n,p=!1){let m,w;const x=he(e);return x?(m=e,w=De):(m=e.get,w=e.set),new Hs(m,w,x||!w,p)}function Fs(e){var n;qe&&Qe&&(e=_e(e),xs(Qe,(n=e.dep)!=null?n:e.dep=ks(()=>e.dep=void 0,e instanceof Hs?e:void 0)))}function Bt(e,n=4,p){e=_e(e);const m=e.dep;m&&Ls(m,n)}function Re(e){return!!(e&&e.__v_isRef===!0)}function an(e){return ln(e,!1)}function ln(e,n){return Re(e)?e:new cn(e,n)}class cn{constructor(n,p){this.__v_isShallow=p,this.dep=void 0,this.__v_isRef=!0,this._rawValue=p?n:_e(n),this._value=p?n:St(n)}get value(){return Fs(this),this._value}set value(n){const p=this.__v_isShallow||Ft(n)||lt(n);n=p?n:_e(n),Xe(n,this._rawValue)&&(this._rawValue=n,this._value=p?n:St(n),Bt(this,4))}}function Ws(e){return Re(e)?e.value:e}const hn={get:(e,n,p)=>Ws(Reflect.get(e,n,p)),set:(e,n,p,m)=>{const w=e[n];return Re(w)&&!Re(p)?(w.value=p,!0):Reflect.set(e,n,p,m)}};function Us(e){return nt(e)?e:new Proxy(e,hn)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ve(e,n,p,m){try{return m?e(...m):e()}catch(w){Vt(w,n,p)}}function Me(e,n,p,m){if(he(e)){const x=Ve(e,n,p,m);return x&&Ss(x)&&x.catch(E=>{Vt(E,n,p)}),x}const w=[];for(let x=0;x<e.length;x++)w.push(Me(e[x],n,p,m));return w}function Vt(e,n,p,m=!0){const w=n?n.vnode:null;if(n){let x=n.parent;const E=n.proxy,i=`https://vuejs.org/error-reference/#runtime-${p}`;for(;x;){const h=x.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,E,i)===!1)return}x=x.parent}const a=n.appContext.config.errorHandler;if(a){Ve(a,null,10,[e,E,i]);return}}un(e,p,w,m)}function un(e,n,p,m=!0){console.error(e)}let Ct=!1,di=!1;const ye=[];let He=0;const ot=[];let je=null,Ze=0;const Ns=Promise.resolve();let Mi=null;function dn(e){const n=Mi||Ns;return e?n.then(this?e.bind(this):e):n}function fn(e){let n=He+1,p=ye.length;for(;n<p;){const m=n+p>>>1,w=ye[m],x=bt(w);x<e||x===e&&w.pre?n=m+1:p=m}return n}function Oi(e){(!ye.length||!ye.includes(e,Ct&&e.allowRecurse?He+1:He))&&(e.id==null?ye.push(e):ye.splice(fn(e.id),0,e),$s())}function $s(){!Ct&&!di&&(di=!0,Mi=Ns.then(zs))}function _n(e){const n=ye.indexOf(e);n>He&&ye.splice(n,1)}function pn(e){ce(e)?ot.push(...e):(!je||!je.includes(e,e.allowRecurse?Ze+1:Ze))&&ot.push(e),$s()}function Ji(e,n,p=Ct?He+1:0){for(;p<ye.length;p++){const m=ye[p];if(m&&m.pre){if(e&&m.id!==e.uid)continue;ye.splice(p,1),p--,m()}}}function js(e){if(ot.length){const n=[...new Set(ot)].sort((p,m)=>bt(p)-bt(m));if(ot.length=0,je){je.push(...n);return}for(je=n,Ze=0;Ze<je.length;Ze++)je[Ze]();je=null,Ze=0}}const bt=e=>e.id==null?1/0:e.id,vn=(e,n)=>{const p=bt(e)-bt(n);if(p===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return p};function zs(e){di=!1,Ct=!0,ye.sort(vn);try{for(He=0;He<ye.length;He++){const n=ye[He];n&&n.active!==!1&&Ve(n,null,14)}}finally{He=0,ye.length=0,js(),Ct=!1,Mi=null,(ye.length||ot.length)&&zs()}}function gn(e,n,...p){if(e.isUnmounted)return;const m=e.vnode.props||me;let w=p;const x=n.startsWith("update:"),E=x&&n.slice(7);if(E&&E in m){const d=`${E==="modelValue"?"model":E}Modifiers`,{number:l,trim:f}=m[d]||me;f&&(w=p.map(S=>be(S)?S.trim():S)),l&&(w=p.map(Ar))}let i,a=m[i=Qt(n)]||m[i=Qt(at(n))];!a&&x&&(a=m[i=Qt(ht(n))]),a&&Me(a,e,6,w);const h=m[i+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Me(h,e,6,w)}}function Ks(e,n,p=!1){const m=n.emitsCache,w=m.get(e);if(w!==void 0)return w;const x=e.emits;let E={},i=!1;if(!he(e)){const a=h=>{const d=Ks(h,n,!0);d&&(i=!0,we(E,d))};!p&&n.mixins.length&&n.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!x&&!i?(Se(e)&&m.set(e,null),null):(ce(x)?x.forEach(a=>E[a]=null):we(E,x),Se(e)&&m.set(e,E),E)}function Gt(e,n){return!e||!$t(n)?!1:(n=n.slice(2).replace(/Once$/,""),fe(e,n[0].toLowerCase()+n.slice(1))||fe(e,ht(n))||fe(e,n))}let Fe=null,qs=null;function Wt(e){const n=Fe;return Fe=e,qs=e&&e.type.__scopeId||null,n}function mn(e,n=Fe,p){if(!n||e._n)return e;const m=(...w)=>{m._d&&os(-1);const x=Wt(n);let E;try{E=e(...w)}finally{Wt(x),m._d&&os(1)}return E};return m._n=!0,m._c=!0,m._d=!0,m}function ti(e){const{type:n,vnode:p,proxy:m,withProxy:w,props:x,propsOptions:[E],slots:i,attrs:a,emit:h,render:d,renderCache:l,data:f,setupState:S,ctx:y,inheritAttrs:v}=e;let t,r;const s=Wt(e);try{if(p.shapeFlag&4){const u=w||m,_=u;t=Pe(d.call(_,u,l,x,S,f,y)),r=a}else{const u=n;t=Pe(u.length>1?u(x,{attrs:a,slots:i,emit:h}):u(x,null)),r=n.props?a:Sn(a)}}catch(u){mt.length=0,Vt(u,e,1),t=Ge(yt)}let o=t;if(r&&v!==!1){const u=Object.keys(r),{shapeFlag:_}=o;u.length&&_&7&&(E&&u.some(Ci)&&(r=Cn(r,E)),o=ct(o,r))}return p.dirs&&(o=ct(o),o.dirs=o.dirs?o.dirs.concat(p.dirs):p.dirs),p.transition&&(o.transition=p.transition),t=o,Wt(s),t}const Sn=e=>{let n;for(const p in e)(p==="class"||p==="style"||$t(p))&&((n||(n={}))[p]=e[p]);return n},Cn=(e,n)=>{const p={};for(const m in e)(!Ci(m)||!(m.slice(9)in n))&&(p[m]=e[m]);return p};function bn(e,n,p){const{props:m,children:w,component:x}=e,{props:E,children:i,patchFlag:a}=n,h=x.emitsOptions;if(n.dirs||n.transition)return!0;if(p&&a>=0){if(a&1024)return!0;if(a&16)return m?Yi(m,E,h):!!E;if(a&8){const d=n.dynamicProps;for(let l=0;l<d.length;l++){const f=d[l];if(E[f]!==m[f]&&!Gt(h,f))return!0}}}else return(w||i)&&(!i||!i.$stable)?!0:m===E?!1:m?E?Yi(m,E,h):!0:!!E;return!1}function Yi(e,n,p){const m=Object.keys(n);if(m.length!==Object.keys(e).length)return!0;for(let w=0;w<m.length;w++){const x=m[w];if(n[x]!==e[x]&&!Gt(p,x))return!0}return!1}function yn({vnode:e,parent:n},p){for(;n;){const m=n.subTree;if(m.suspense&&m.suspense.activeBranch===e&&(m.el=e.el),m===e)(e=n.vnode).el=p,n=n.parent;else break}}const wn=Symbol.for("v-ndc"),En=e=>e.__isSuspense;function xn(e,n){n&&n.pendingBranch?ce(e)?n.effects.push(...e):n.effects.push(e):pn(e)}const Ln=Symbol.for("v-scx"),kn=()=>Ot(Ln),Tt={};function ii(e,n,p){return Vs(e,n,p)}function Vs(e,n,{immediate:p,deep:m,flush:w,once:x,onTrack:E,onTrigger:i}=me){if(n&&x){const g=n;n=(...C)=>{g(...C),_()}}const a=xe,h=g=>m===!0?g:st(g,m===!1?1:void 0);let d,l=!1,f=!1;if(Re(e)?(d=()=>e.value,l=Ft(e)):nt(e)?(d=()=>h(e),l=!0):ce(e)?(f=!0,l=e.some(g=>nt(g)||Ft(g)),d=()=>e.map(g=>{if(Re(g))return g.value;if(nt(g))return h(g);if(he(g))return Ve(g,a,2)})):he(e)?n?d=()=>Ve(e,a,2):d=()=>(S&&S(),Me(e,a,3,[y])):d=De,n&&m){const g=d;d=()=>st(g())}let S,y=g=>{S=o.onStop=()=>{Ve(g,a,4),S=o.onStop=void 0}},v;if(Zt)if(y=De,n?p&&Me(n,a,3,[d(),f?[]:void 0,y]):d(),w==="sync"){const g=kn();v=g.__watcherHandles||(g.__watcherHandles=[])}else return De;let t=f?new Array(e.length).fill(Tt):Tt;const r=()=>{if(!(!o.active||!o.dirty))if(n){const g=o.run();(m||l||(f?g.some((C,c)=>Xe(C,t[c])):Xe(g,t)))&&(S&&S(),Me(n,a,3,[g,t===Tt?void 0:f&&t[0]===Tt?[]:t,y]),t=g)}else o.run()};r.allowRecurse=!!n;let s;w==="sync"?s=r:w==="post"?s=()=>Le(r,a&&a.suspense):(r.pre=!0,a&&(r.id=a.uid),s=()=>Oi(r));const o=new xi(d,De,s),u=Fr(),_=()=>{o.stop(),u&&bi(u.effects,o)};return n?p?r():t=o.run():w==="post"?Le(o.run.bind(o),a&&a.suspense):o.run(),v&&v.push(_),_}function Rn(e,n,p){const m=this.proxy,w=be(e)?e.includes(".")?Gs(m,e):()=>m[e]:e.bind(m,m);let x;he(n)?x=n:(x=n.handler,p=n);const E=Et(this),i=Vs(w,x.bind(m),p);return E(),i}function Gs(e,n){const p=n.split(".");return()=>{let m=e;for(let w=0;w<p.length&&m;w++)m=m[p[w]];return m}}function st(e,n,p=0,m){if(!Se(e)||e.__v_skip)return e;if(n&&n>0){if(p>=n)return e;p++}if(m=m||new Set,m.has(e))return e;if(m.add(e),Re(e))st(e.value,n,p,m);else if(ce(e))for(let w=0;w<e.length;w++)st(e[w],n,p,m);else if(wr(e)||_t(e))e.forEach(w=>{st(w,n,p,m)});else if(Lr(e))for(const w in e)st(e[w],n,p,m);return e}function Je(e,n,p,m){const w=e.dirs,x=n&&n.dirs;for(let E=0;E<w.length;E++){const i=w[E];x&&(i.oldValue=x[E].value);let a=i.dir[m];a&&(tt(),Me(a,p,8,[e.el,i,e,n]),it())}}const Mt=e=>!!e.type.__asyncLoader,Xs=e=>e.type.__isKeepAlive;function An(e,n){Js(e,"a",n)}function Dn(e,n){Js(e,"da",n)}function Js(e,n,p=xe){const m=e.__wdc||(e.__wdc=()=>{let w=p;for(;w;){if(w.isDeactivated)return;w=w.parent}return e()});if(Xt(n,m,p),p){let w=p.parent;for(;w&&w.parent;)Xs(w.parent.vnode)&&Tn(m,n,p,w),w=w.parent}}function Tn(e,n,p,m){const w=Xt(n,e,m,!0);Ii(()=>{bi(m[n],w)},p)}function Xt(e,n,p=xe,m=!1){if(p){const w=p[e]||(p[e]=[]),x=n.__weh||(n.__weh=(...E)=>{if(p.isUnmounted)return;tt();const i=Et(p),a=Me(n,p,e,E);return i(),it(),a});return m?w.unshift(x):w.push(x),x}}const Ne=e=>(n,p=xe)=>(!Zt||e==="sp")&&Xt(e,(...m)=>n(...m),p),Bn=Ne("bm"),Ys=Ne("m"),Mn=Ne("bu"),On=Ne("u"),In=Ne("bum"),Ii=Ne("um"),Pn=Ne("sp"),Hn=Ne("rtg"),Fn=Ne("rtc");function Wn(e,n=xe){Xt("ec",e,n)}const fi=e=>e?ur(e)?Wi(e)||e.proxy:fi(e.parent):null,vt=we(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fi(e.parent),$root:e=>fi(e.root),$emit:e=>e.emit,$options:e=>Pi(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Oi(e.update)}),$nextTick:e=>e.n||(e.n=dn.bind(e.proxy)),$watch:e=>Rn.bind(e)}),si=(e,n)=>e!==me&&!e.__isScriptSetup&&fe(e,n),Un={get({_:e},n){const{ctx:p,setupState:m,data:w,props:x,accessCache:E,type:i,appContext:a}=e;let h;if(n[0]!=="$"){const S=E[n];if(S!==void 0)switch(S){case 1:return m[n];case 2:return w[n];case 4:return p[n];case 3:return x[n]}else{if(si(m,n))return E[n]=1,m[n];if(w!==me&&fe(w,n))return E[n]=2,w[n];if((h=e.propsOptions[0])&&fe(h,n))return E[n]=3,x[n];if(p!==me&&fe(p,n))return E[n]=4,p[n];_i&&(E[n]=0)}}const d=vt[n];let l,f;if(d)return n==="$attrs"&&ke(e,"get",n),d(e);if((l=i.__cssModules)&&(l=l[n]))return l;if(p!==me&&fe(p,n))return E[n]=4,p[n];if(f=a.config.globalProperties,fe(f,n))return f[n]},set({_:e},n,p){const{data:m,setupState:w,ctx:x}=e;return si(w,n)?(w[n]=p,!0):m!==me&&fe(m,n)?(m[n]=p,!0):fe(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(x[n]=p,!0)},has({_:{data:e,setupState:n,accessCache:p,ctx:m,appContext:w,propsOptions:x}},E){let i;return!!p[E]||e!==me&&fe(e,E)||si(n,E)||(i=x[0])&&fe(i,E)||fe(m,E)||fe(vt,E)||fe(w.config.globalProperties,E)},defineProperty(e,n,p){return p.get!=null?e._.accessCache[n]=0:fe(p,"value")&&this.set(e,n,p.value,null),Reflect.defineProperty(e,n,p)}};function Zi(e){return ce(e)?e.reduce((n,p)=>(n[p]=null,n),{}):e}let _i=!0;function Nn(e){const n=Pi(e),p=e.proxy,m=e.ctx;_i=!1,n.beforeCreate&&Qi(n.beforeCreate,e,"bc");const{data:w,computed:x,methods:E,watch:i,provide:a,inject:h,created:d,beforeMount:l,mounted:f,beforeUpdate:S,updated:y,activated:v,deactivated:t,beforeDestroy:r,beforeUnmount:s,destroyed:o,unmounted:u,render:_,renderTracked:g,renderTriggered:C,errorCaptured:c,serverPrefetch:b,expose:R,inheritAttrs:T,components:A,directives:M,filters:F}=n;if(h&&$n(h,m,null),E)for(const N in E){const L=E[N];he(L)&&(m[N]=L.bind(p))}if(w){const N=w.call(p,p);Se(N)&&(e.data=Di(N))}if(_i=!0,x)for(const N in x){const L=x[N],B=he(L)?L.bind(p,p):he(L.get)?L.get.bind(p,p):De,O=!he(L)&&he(L.set)?L.set.bind(p):De,P=yo({get:B,set:O});Object.defineProperty(m,N,{enumerable:!0,configurable:!0,get:()=>P.value,set:V=>P.value=V})}if(i)for(const N in i)Zs(i[N],m,p,N);if(a){const N=he(a)?a.call(p):a;Reflect.ownKeys(N).forEach(L=>{Gn(L,N[L])})}d&&Qi(d,e,"c");function j(N,L){ce(L)?L.forEach(B=>N(B.bind(p))):L&&N(L.bind(p))}if(j(Bn,l),j(Ys,f),j(Mn,S),j(On,y),j(An,v),j(Dn,t),j(Wn,c),j(Fn,g),j(Hn,C),j(In,s),j(Ii,u),j(Pn,b),ce(R))if(R.length){const N=e.exposed||(e.exposed={});R.forEach(L=>{Object.defineProperty(N,L,{get:()=>p[L],set:B=>p[L]=B})})}else e.exposed||(e.exposed={});_&&e.render===De&&(e.render=_),T!=null&&(e.inheritAttrs=T),A&&(e.components=A),M&&(e.directives=M)}function $n(e,n,p=De){ce(e)&&(e=pi(e));for(const m in e){const w=e[m];let x;Se(w)?"default"in w?x=Ot(w.from||m,w.default,!0):x=Ot(w.from||m):x=Ot(w),Re(x)?Object.defineProperty(n,m,{enumerable:!0,configurable:!0,get:()=>x.value,set:E=>x.value=E}):n[m]=x}}function Qi(e,n,p){Me(ce(e)?e.map(m=>m.bind(n.proxy)):e.bind(n.proxy),n,p)}function Zs(e,n,p,m){const w=m.includes(".")?Gs(p,m):()=>p[m];if(be(e)){const x=n[e];he(x)&&ii(w,x)}else if(he(e))ii(w,e.bind(p));else if(Se(e))if(ce(e))e.forEach(x=>Zs(x,n,p,m));else{const x=he(e.handler)?e.handler.bind(p):n[e.handler];he(x)&&ii(w,x,e)}}function Pi(e){const n=e.type,{mixins:p,extends:m}=n,{mixins:w,optionsCache:x,config:{optionMergeStrategies:E}}=e.appContext,i=x.get(n);let a;return i?a=i:!w.length&&!p&&!m?a=n:(a={},w.length&&w.forEach(h=>Ut(a,h,E,!0)),Ut(a,n,E)),Se(n)&&x.set(n,a),a}function Ut(e,n,p,m=!1){const{mixins:w,extends:x}=n;x&&Ut(e,x,p,!0),w&&w.forEach(E=>Ut(e,E,p,!0));for(const E in n)if(!(m&&E==="expose")){const i=jn[E]||p&&p[E];e[E]=i?i(e[E],n[E]):n[E]}return e}const jn={data:es,props:ts,emits:ts,methods:ft,computed:ft,beforeCreate:Ee,created:Ee,beforeMount:Ee,mounted:Ee,beforeUpdate:Ee,updated:Ee,beforeDestroy:Ee,beforeUnmount:Ee,destroyed:Ee,unmounted:Ee,activated:Ee,deactivated:Ee,errorCaptured:Ee,serverPrefetch:Ee,components:ft,directives:ft,watch:Kn,provide:es,inject:zn};function es(e,n){return n?e?function(){return we(he(e)?e.call(this,this):e,he(n)?n.call(this,this):n)}:n:e}function zn(e,n){return ft(pi(e),pi(n))}function pi(e){if(ce(e)){const n={};for(let p=0;p<e.length;p++)n[e[p]]=e[p];return n}return e}function Ee(e,n){return e?[...new Set([].concat(e,n))]:n}function ft(e,n){return e?we(Object.create(null),e,n):n}function ts(e,n){return e?ce(e)&&ce(n)?[...new Set([...e,...n])]:we(Object.create(null),Zi(e),Zi(n??{})):n}function Kn(e,n){if(!e)return n;if(!n)return e;const p=we(Object.create(null),e);for(const m in n)p[m]=Ee(e[m],n[m]);return p}function Qs(){return{app:null,config:{isNativeTag:br,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qn=0;function Vn(e,n){return function(m,w=null){he(m)||(m=we({},m)),w!=null&&!Se(w)&&(w=null);const x=Qs(),E=new WeakSet;let i=!1;const a=x.app={_uid:qn++,_component:m,_props:w,_container:null,_context:x,_instance:null,version:wo,get config(){return x.config},set config(h){},use(h,...d){return E.has(h)||(h&&he(h.install)?(E.add(h),h.install(a,...d)):he(h)&&(E.add(h),h(a,...d))),a},mixin(h){return x.mixins.includes(h)||x.mixins.push(h),a},component(h,d){return d?(x.components[h]=d,a):x.components[h]},directive(h,d){return d?(x.directives[h]=d,a):x.directives[h]},mount(h,d,l){if(!i){const f=Ge(m,w);return f.appContext=x,l===!0?l="svg":l===!1&&(l=void 0),d&&n?n(f,h):e(f,h,l),i=!0,a._container=h,h.__vue_app__=a,Wi(f.component)||f.component.proxy}},unmount(){i&&(e(null,a._container),delete a._container.__vue_app__)},provide(h,d){return x.provides[h]=d,a},runWithContext(h){const d=gt;gt=a;try{return h()}finally{gt=d}}};return a}}let gt=null;function Gn(e,n){if(xe){let p=xe.provides;const m=xe.parent&&xe.parent.provides;m===p&&(p=xe.provides=Object.create(m)),p[e]=n}}function Ot(e,n,p=!1){const m=xe||Fe;if(m||gt){const w=m?m.parent==null?m.vnode.appContext&&m.vnode.appContext.provides:m.parent.provides:gt._context.provides;if(w&&e in w)return w[e];if(arguments.length>1)return p&&he(n)?n.call(m&&m.proxy):n}}function Xn(e,n,p,m=!1){const w={},x={};Ht(x,Yt,1),e.propsDefaults=Object.create(null),er(e,n,w,x);for(const E in e.propsOptions[0])E in w||(w[E]=void 0);p?e.props=m?w:nn(w):e.type.props?e.props=w:e.props=x,e.attrs=x}function Jn(e,n,p,m){const{props:w,attrs:x,vnode:{patchFlag:E}}=e,i=_e(w),[a]=e.propsOptions;let h=!1;if((m||E>0)&&!(E&16)){if(E&8){const d=e.vnode.dynamicProps;for(let l=0;l<d.length;l++){let f=d[l];if(Gt(e.emitsOptions,f))continue;const S=n[f];if(a)if(fe(x,f))S!==x[f]&&(x[f]=S,h=!0);else{const y=at(f);w[y]=vi(a,i,y,S,e,!1)}else S!==x[f]&&(x[f]=S,h=!0)}}}else{er(e,n,w,x)&&(h=!0);let d;for(const l in i)(!n||!fe(n,l)&&((d=ht(l))===l||!fe(n,d)))&&(a?p&&(p[l]!==void 0||p[d]!==void 0)&&(w[l]=vi(a,i,l,void 0,e,!0)):delete w[l]);if(x!==i)for(const l in x)(!n||!fe(n,l))&&(delete x[l],h=!0)}h&&Ue(e,"set","$attrs")}function er(e,n,p,m){const[w,x]=e.propsOptions;let E=!1,i;if(n)for(let a in n){if(pt(a))continue;const h=n[a];let d;w&&fe(w,d=at(a))?!x||!x.includes(d)?p[d]=h:(i||(i={}))[d]=h:Gt(e.emitsOptions,a)||(!(a in m)||h!==m[a])&&(m[a]=h,E=!0)}if(x){const a=_e(p),h=i||me;for(let d=0;d<x.length;d++){const l=x[d];p[l]=vi(w,a,l,h[l],e,!fe(h,l))}}return E}function vi(e,n,p,m,w,x){const E=e[p];if(E!=null){const i=fe(E,"default");if(i&&m===void 0){const a=E.default;if(E.type!==Function&&!E.skipFactory&&he(a)){const{propsDefaults:h}=w;if(p in h)m=h[p];else{const d=Et(w);m=h[p]=a.call(null,n),d()}}else m=a}E[0]&&(x&&!i?m=!1:E[1]&&(m===""||m===ht(p))&&(m=!0))}return m}function tr(e,n,p=!1){const m=n.propsCache,w=m.get(e);if(w)return w;const x=e.props,E={},i=[];let a=!1;if(!he(e)){const d=l=>{a=!0;const[f,S]=tr(l,n,!0);we(E,f),S&&i.push(...S)};!p&&n.mixins.length&&n.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!x&&!a)return Se(e)&&m.set(e,rt),rt;if(ce(x))for(let d=0;d<x.length;d++){const l=at(x[d]);is(l)&&(E[l]=me)}else if(x)for(const d in x){const l=at(d);if(is(l)){const f=x[d],S=E[l]=ce(f)||he(f)?{type:f}:we({},f);if(S){const y=ns(Boolean,S.type),v=ns(String,S.type);S[0]=y>-1,S[1]=v<0||y<v,(y>-1||fe(S,"default"))&&i.push(l)}}}const h=[E,i];return Se(e)&&m.set(e,h),h}function is(e){return e[0]!=="$"&&!pt(e)}function ss(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function rs(e,n){return ss(e)===ss(n)}function ns(e,n){return ce(n)?n.findIndex(p=>rs(p,e)):he(n)&&rs(n,e)?0:-1}const ir=e=>e[0]==="_"||e==="$stable",Hi=e=>ce(e)?e.map(Pe):[Pe(e)],Yn=(e,n,p)=>{if(n._n)return n;const m=mn((...w)=>Hi(n(...w)),p);return m._c=!1,m},sr=(e,n,p)=>{const m=e._ctx;for(const w in e){if(ir(w))continue;const x=e[w];if(he(x))n[w]=Yn(w,x,m);else if(x!=null){const E=Hi(x);n[w]=()=>E}}},rr=(e,n)=>{const p=Hi(n);e.slots.default=()=>p},Zn=(e,n)=>{if(e.vnode.shapeFlag&32){const p=n._;p?(e.slots=_e(n),Ht(n,"_",p)):sr(n,e.slots={})}else e.slots={},n&&rr(e,n);Ht(e.slots,Yt,1)},Qn=(e,n,p)=>{const{vnode:m,slots:w}=e;let x=!0,E=me;if(m.shapeFlag&32){const i=n._;i?p&&i===1?x=!1:(we(w,n),!p&&i===1&&delete w._):(x=!n.$stable,sr(n,w)),E=n}else n&&(rr(e,n),E={default:1});if(x)for(const i in w)!ir(i)&&E[i]==null&&delete w[i]};function gi(e,n,p,m,w=!1){if(ce(e)){e.forEach((f,S)=>gi(f,n&&(ce(n)?n[S]:n),p,m,w));return}if(Mt(m)&&!w)return;const x=m.shapeFlag&4?Wi(m.component)||m.component.proxy:m.el,E=w?null:x,{i,r:a}=e,h=n&&n.r,d=i.refs===me?i.refs={}:i.refs,l=i.setupState;if(h!=null&&h!==a&&(be(h)?(d[h]=null,fe(l,h)&&(l[h]=null)):Re(h)&&(h.value=null)),he(a))Ve(a,i,12,[E,d]);else{const f=be(a),S=Re(a);if(f||S){const y=()=>{if(e.f){const v=f?fe(l,a)?l[a]:d[a]:a.value;w?ce(v)&&bi(v,x):ce(v)?v.includes(x)||v.push(x):f?(d[a]=[x],fe(l,a)&&(l[a]=d[a])):(a.value=[x],e.k&&(d[e.k]=a.value))}else f?(d[a]=E,fe(l,a)&&(l[a]=E)):S&&(a.value=E,e.k&&(d[e.k]=E))};E?(y.id=-1,Le(y,p)):y()}}}const Le=xn;function eo(e){return to(e)}function to(e,n){const p=bs();p.__VUE__=!0;const{insert:m,remove:w,patchProp:x,createElement:E,createText:i,createComment:a,setText:h,setElementText:d,parentNode:l,nextSibling:f,setScopeId:S=De,insertStaticContent:y}=e,v=(D,I,U,q=null,W=null,X=null,Q=void 0,J=null,Y=!!I.dynamicChildren)=>{if(D===I)return;D&&!dt(D,I)&&(q=k(D),V(D,W,X,!0),D=null),I.patchFlag===-2&&(Y=!1,I.dynamicChildren=null);const{type:G,ref:Z,shapeFlag:re}=I;switch(G){case Jt:t(D,I,U,q);break;case yt:r(D,I,U,q);break;case ni:D==null&&s(I,U,q,Q);break;case We:A(D,I,U,q,W,X,Q,J,Y);break;default:re&1?_(D,I,U,q,W,X,Q,J,Y):re&6?M(D,I,U,q,W,X,Q,J,Y):(re&64||re&128)&&G.process(D,I,U,q,W,X,Q,J,Y,z)}Z!=null&&W&&gi(Z,D&&D.ref,X,I||D,!I)},t=(D,I,U,q)=>{if(D==null)m(I.el=i(I.children),U,q);else{const W=I.el=D.el;I.children!==D.children&&h(W,I.children)}},r=(D,I,U,q)=>{D==null?m(I.el=a(I.children||""),U,q):I.el=D.el},s=(D,I,U,q)=>{[D.el,D.anchor]=y(D.children,I,U,q,D.el,D.anchor)},o=({el:D,anchor:I},U,q)=>{let W;for(;D&&D!==I;)W=f(D),m(D,U,q),D=W;m(I,U,q)},u=({el:D,anchor:I})=>{let U;for(;D&&D!==I;)U=f(D),w(D),D=U;w(I)},_=(D,I,U,q,W,X,Q,J,Y)=>{I.type==="svg"?Q="svg":I.type==="math"&&(Q="mathml"),D==null?g(I,U,q,W,X,Q,J,Y):b(D,I,W,X,Q,J,Y)},g=(D,I,U,q,W,X,Q,J)=>{let Y,G;const{props:Z,shapeFlag:re,transition:ie,dirs:oe}=D;if(Y=D.el=E(D.type,X,Z&&Z.is,Z),re&8?d(Y,D.children):re&16&&c(D.children,Y,null,q,W,ri(D,X),Q,J),oe&&Je(D,null,q,"created"),C(Y,D,D.scopeId,Q,q),Z){for(const ue in Z)ue!=="value"&&!pt(ue)&&x(Y,ue,null,Z[ue],X,D.children,q,W,de);"value"in Z&&x(Y,"value",null,Z.value,X),(G=Z.onVnodeBeforeMount)&&Ie(G,q,D)}oe&&Je(D,null,q,"beforeMount");const le=io(W,ie);le&&ie.beforeEnter(Y),m(Y,I,U),((G=Z&&Z.onVnodeMounted)||le||oe)&&Le(()=>{G&&Ie(G,q,D),le&&ie.enter(Y),oe&&Je(D,null,q,"mounted")},W)},C=(D,I,U,q,W)=>{if(U&&S(D,U),q)for(let X=0;X<q.length;X++)S(D,q[X]);if(W){let X=W.subTree;if(I===X){const Q=W.vnode;C(D,Q,Q.scopeId,Q.slotScopeIds,W.parent)}}},c=(D,I,U,q,W,X,Q,J,Y=0)=>{for(let G=Y;G<D.length;G++){const Z=D[G]=J?ze(D[G]):Pe(D[G]);v(null,Z,I,U,q,W,X,Q,J)}},b=(D,I,U,q,W,X,Q)=>{const J=I.el=D.el;let{patchFlag:Y,dynamicChildren:G,dirs:Z}=I;Y|=D.patchFlag&16;const re=D.props||me,ie=I.props||me;let oe;if(U&&Ye(U,!1),(oe=ie.onVnodeBeforeUpdate)&&Ie(oe,U,I,D),Z&&Je(I,D,U,"beforeUpdate"),U&&Ye(U,!0),G?R(D.dynamicChildren,G,J,U,q,ri(I,W),X):Q||L(D,I,J,null,U,q,ri(I,W),X,!1),Y>0){if(Y&16)T(J,I,re,ie,U,q,W);else if(Y&2&&re.class!==ie.class&&x(J,"class",null,ie.class,W),Y&4&&x(J,"style",re.style,ie.style,W),Y&8){const le=I.dynamicProps;for(let ue=0;ue<le.length;ue++){const ve=le[ue],ge=re[ve],Ce=ie[ve];(Ce!==ge||ve==="value")&&x(J,ve,ge,Ce,W,D.children,U,q,de)}}Y&1&&D.children!==I.children&&d(J,I.children)}else!Q&&G==null&&T(J,I,re,ie,U,q,W);((oe=ie.onVnodeUpdated)||Z)&&Le(()=>{oe&&Ie(oe,U,I,D),Z&&Je(I,D,U,"updated")},q)},R=(D,I,U,q,W,X,Q)=>{for(let J=0;J<I.length;J++){const Y=D[J],G=I[J],Z=Y.el&&(Y.type===We||!dt(Y,G)||Y.shapeFlag&70)?l(Y.el):U;v(Y,G,Z,null,q,W,X,Q,!0)}},T=(D,I,U,q,W,X,Q)=>{if(U!==q){if(U!==me)for(const J in U)!pt(J)&&!(J in q)&&x(D,J,U[J],null,Q,I.children,W,X,de);for(const J in q){if(pt(J))continue;const Y=q[J],G=U[J];Y!==G&&J!=="value"&&x(D,J,G,Y,Q,I.children,W,X,de)}"value"in q&&x(D,"value",U.value,q.value,Q)}},A=(D,I,U,q,W,X,Q,J,Y)=>{const G=I.el=D?D.el:i(""),Z=I.anchor=D?D.anchor:i("");let{patchFlag:re,dynamicChildren:ie,slotScopeIds:oe}=I;oe&&(J=J?J.concat(oe):oe),D==null?(m(G,U,q),m(Z,U,q),c(I.children||[],U,Z,W,X,Q,J,Y)):re>0&&re&64&&ie&&D.dynamicChildren?(R(D.dynamicChildren,ie,U,W,X,Q,J),(I.key!=null||W&&I===W.subTree)&&nr(D,I,!0)):L(D,I,U,Z,W,X,Q,J,Y)},M=(D,I,U,q,W,X,Q,J,Y)=>{I.slotScopeIds=J,D==null?I.shapeFlag&512?W.ctx.activate(I,U,q,Q,Y):F(I,U,q,W,X,Q,Y):$(D,I,Y)},F=(D,I,U,q,W,X,Q)=>{const J=D.component=vo(D,q,W);if(Xs(D)&&(J.ctx.renderer=z),go(J),J.asyncDep){if(W&&W.registerDep(J,j),!D.el){const Y=J.subTree=Ge(yt);r(null,Y,I,U)}}else j(J,D,I,U,W,X,Q)},$=(D,I,U)=>{const q=I.component=D.component;if(bn(D,I,U))if(q.asyncDep&&!q.asyncResolved){N(q,I,U);return}else q.next=I,_n(q.update),q.effect.dirty=!0,q.update();else I.el=D.el,q.vnode=I},j=(D,I,U,q,W,X,Q)=>{const J=()=>{if(D.isMounted){let{next:Z,bu:re,u:ie,parent:oe,vnode:le}=D;{const pe=or(D);if(pe){Z&&(Z.el=le.el,N(D,Z,Q)),pe.asyncDep.then(()=>{D.isUnmounted||J()});return}}let ue=Z,ve;Ye(D,!1),Z?(Z.el=le.el,N(D,Z,Q)):Z=le,re&&ei(re),(ve=Z.props&&Z.props.onVnodeBeforeUpdate)&&Ie(ve,oe,Z,le),Ye(D,!0);const ge=ti(D),Ce=D.subTree;D.subTree=ge,v(Ce,ge,l(Ce.el),k(Ce),D,W,X),Z.el=ge.el,ue===null&&yn(D,ge.el),ie&&Le(ie,W),(ve=Z.props&&Z.props.onVnodeUpdated)&&Le(()=>Ie(ve,oe,Z,le),W)}else{let Z;const{el:re,props:ie}=I,{bm:oe,m:le,parent:ue}=D,ve=Mt(I);if(Ye(D,!1),oe&&ei(oe),!ve&&(Z=ie&&ie.onVnodeBeforeMount)&&Ie(Z,ue,I),Ye(D,!0),re&&te){const ge=()=>{D.subTree=ti(D),te(re,D.subTree,D,W,null)};ve?I.type.__asyncLoader().then(()=>!D.isUnmounted&&ge()):ge()}else{const ge=D.subTree=ti(D);v(null,ge,U,q,D,W,X),I.el=ge.el}if(le&&Le(le,W),!ve&&(Z=ie&&ie.onVnodeMounted)){const ge=I;Le(()=>Ie(Z,ue,ge),W)}(I.shapeFlag&256||ue&&Mt(ue.vnode)&&ue.vnode.shapeFlag&256)&&D.a&&Le(D.a,W),D.isMounted=!0,I=U=q=null}},Y=D.effect=new xi(J,De,()=>Oi(G),D.scope),G=D.update=()=>{Y.dirty&&Y.run()};G.id=D.uid,Ye(D,!0),G()},N=(D,I,U)=>{I.component=D;const q=D.vnode.props;D.vnode=I,D.next=null,Jn(D,I.props,q,U),Qn(D,I.children,U),tt(),Ji(D),it()},L=(D,I,U,q,W,X,Q,J,Y=!1)=>{const G=D&&D.children,Z=D?D.shapeFlag:0,re=I.children,{patchFlag:ie,shapeFlag:oe}=I;if(ie>0){if(ie&128){O(G,re,U,q,W,X,Q,J,Y);return}else if(ie&256){B(G,re,U,q,W,X,Q,J,Y);return}}oe&8?(Z&16&&de(G,W,X),re!==G&&d(U,re)):Z&16?oe&16?O(G,re,U,q,W,X,Q,J,Y):de(G,W,X,!0):(Z&8&&d(U,""),oe&16&&c(re,U,q,W,X,Q,J,Y))},B=(D,I,U,q,W,X,Q,J,Y)=>{D=D||rt,I=I||rt;const G=D.length,Z=I.length,re=Math.min(G,Z);let ie;for(ie=0;ie<re;ie++){const oe=I[ie]=Y?ze(I[ie]):Pe(I[ie]);v(D[ie],oe,U,null,W,X,Q,J,Y)}G>Z?de(D,W,X,!0,!1,re):c(I,U,q,W,X,Q,J,Y,re)},O=(D,I,U,q,W,X,Q,J,Y)=>{let G=0;const Z=I.length;let re=D.length-1,ie=Z-1;for(;G<=re&&G<=ie;){const oe=D[G],le=I[G]=Y?ze(I[G]):Pe(I[G]);if(dt(oe,le))v(oe,le,U,null,W,X,Q,J,Y);else break;G++}for(;G<=re&&G<=ie;){const oe=D[re],le=I[ie]=Y?ze(I[ie]):Pe(I[ie]);if(dt(oe,le))v(oe,le,U,null,W,X,Q,J,Y);else break;re--,ie--}if(G>re){if(G<=ie){const oe=ie+1,le=oe<Z?I[oe].el:q;for(;G<=ie;)v(null,I[G]=Y?ze(I[G]):Pe(I[G]),U,le,W,X,Q,J,Y),G++}}else if(G>ie)for(;G<=re;)V(D[G],W,X,!0),G++;else{const oe=G,le=G,ue=new Map;for(G=le;G<=ie;G++){const Ae=I[G]=Y?ze(I[G]):Pe(I[G]);Ae.key!=null&&ue.set(Ae.key,G)}let ve,ge=0;const Ce=ie-le+1;let pe=!1,xt=0;const ut=new Array(Ce);for(G=0;G<Ce;G++)ut[G]=0;for(G=oe;G<=re;G++){const Ae=D[G];if(ge>=Ce){V(Ae,W,X,!0);continue}let Oe;if(Ae.key!=null)Oe=ue.get(Ae.key);else for(ve=le;ve<=ie;ve++)if(ut[ve-le]===0&&dt(Ae,I[ve])){Oe=ve;break}Oe===void 0?V(Ae,W,X,!0):(ut[Oe-le]=G+1,Oe>=xt?xt=Oe:pe=!0,v(Ae,I[Oe],U,null,W,X,Q,J,Y),ge++)}const Ui=pe?so(ut):rt;for(ve=Ui.length-1,G=Ce-1;G>=0;G--){const Ae=le+G,Oe=I[Ae],Ni=Ae+1<Z?I[Ae+1].el:q;ut[G]===0?v(null,Oe,U,Ni,W,X,Q,J,Y):pe&&(ve<0||G!==Ui[ve]?P(Oe,U,Ni,2):ve--)}}},P=(D,I,U,q,W=null)=>{const{el:X,type:Q,transition:J,children:Y,shapeFlag:G}=D;if(G&6){P(D.component.subTree,I,U,q);return}if(G&128){D.suspense.move(I,U,q);return}if(G&64){Q.move(D,I,U,z);return}if(Q===We){m(X,I,U);for(let re=0;re<Y.length;re++)P(Y[re],I,U,q);m(D.anchor,I,U);return}if(Q===ni){o(D,I,U);return}if(q!==2&&G&1&&J)if(q===0)J.beforeEnter(X),m(X,I,U),Le(()=>J.enter(X),W);else{const{leave:re,delayLeave:ie,afterLeave:oe}=J,le=()=>m(X,I,U),ue=()=>{re(X,()=>{le(),oe&&oe()})};ie?ie(X,le,ue):ue()}else m(X,I,U)},V=(D,I,U,q=!1,W=!1)=>{const{type:X,props:Q,ref:J,children:Y,dynamicChildren:G,shapeFlag:Z,patchFlag:re,dirs:ie}=D;if(J!=null&&gi(J,null,U,D,!0),Z&256){I.ctx.deactivate(D);return}const oe=Z&1&&ie,le=!Mt(D);let ue;if(le&&(ue=Q&&Q.onVnodeBeforeUnmount)&&Ie(ue,I,D),Z&6)se(D.component,U,q);else{if(Z&128){D.suspense.unmount(U,q);return}oe&&Je(D,null,I,"beforeUnmount"),Z&64?D.type.remove(D,I,U,W,z,q):G&&(X!==We||re>0&&re&64)?de(G,I,U,!1,!0):(X===We&&re&384||!W&&Z&16)&&de(Y,I,U),q&&ee(D)}(le&&(ue=Q&&Q.onVnodeUnmounted)||oe)&&Le(()=>{ue&&Ie(ue,I,D),oe&&Je(D,null,I,"unmounted")},U)},ee=D=>{const{type:I,el:U,anchor:q,transition:W}=D;if(I===We){ne(U,q);return}if(I===ni){u(D);return}const X=()=>{w(U),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(D.shapeFlag&1&&W&&!W.persisted){const{leave:Q,delayLeave:J}=W,Y=()=>Q(U,X);J?J(D.el,X,Y):Y()}else X()},ne=(D,I)=>{let U;for(;D!==I;)U=f(D),w(D),D=U;w(I)},se=(D,I,U)=>{const{bum:q,scope:W,update:X,subTree:Q,um:J}=D;q&&ei(q),W.stop(),X&&(X.active=!1,V(Q,D,I,U)),J&&Le(J,I),Le(()=>{D.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},de=(D,I,U,q=!1,W=!1,X=0)=>{for(let Q=X;Q<D.length;Q++)V(D[Q],I,U,q,W)},k=D=>D.shapeFlag&6?k(D.component.subTree):D.shapeFlag&128?D.suspense.next():f(D.anchor||D.el);let H=!1;const K=(D,I,U)=>{D==null?I._vnode&&V(I._vnode,null,null,!0):v(I._vnode||null,D,I,null,null,null,U),H||(H=!0,Ji(),js(),H=!1),I._vnode=D},z={p:v,um:V,m:P,r:ee,mt:F,mc:c,pc:L,pbc:R,n:k,o:e};let ae,te;return n&&([ae,te]=n(z)),{render:K,hydrate:ae,createApp:Vn(K,ae)}}function ri({type:e,props:n},p){return p==="svg"&&e==="foreignObject"||p==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:p}function Ye({effect:e,update:n},p){e.allowRecurse=n.allowRecurse=p}function io(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function nr(e,n,p=!1){const m=e.children,w=n.children;if(ce(m)&&ce(w))for(let x=0;x<m.length;x++){const E=m[x];let i=w[x];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=w[x]=ze(w[x]),i.el=E.el),p||nr(E,i)),i.type===Jt&&(i.el=E.el)}}function so(e){const n=e.slice(),p=[0];let m,w,x,E,i;const a=e.length;for(m=0;m<a;m++){const h=e[m];if(h!==0){if(w=p[p.length-1],e[w]<h){n[m]=w,p.push(m);continue}for(x=0,E=p.length-1;x<E;)i=x+E>>1,e[p[i]]<h?x=i+1:E=i;h<e[p[x]]&&(x>0&&(n[m]=p[x-1]),p[x]=m)}}for(x=p.length,E=p[x-1];x-- >0;)p[x]=E,E=n[E];return p}function or(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:or(n)}const ro=e=>e.__isTeleport,We=Symbol.for("v-fgt"),Jt=Symbol.for("v-txt"),yt=Symbol.for("v-cmt"),ni=Symbol.for("v-stc"),mt=[];let Be=null;function ar(e=!1){mt.push(Be=e?null:[])}function no(){mt.pop(),Be=mt[mt.length-1]||null}let wt=1;function os(e){wt+=e}function lr(e){return e.dynamicChildren=wt>0?Be||rt:null,no(),wt>0&&Be&&Be.push(e),e}function oo(e,n,p,m,w,x){return lr(hr(e,n,p,m,w,x,!0))}function ao(e,n,p,m,w){return lr(Ge(e,n,p,m,w,!0))}function lo(e){return e?e.__v_isVNode===!0:!1}function dt(e,n){return e.type===n.type&&e.key===n.key}const Yt="__vInternal",cr=({key:e})=>e??null,It=({ref:e,ref_key:n,ref_for:p})=>(typeof e=="number"&&(e=""+e),e!=null?be(e)||Re(e)||he(e)?{i:Fe,r:e,k:n,f:!!p}:e:null);function hr(e,n=null,p=null,m=0,w=null,x=e===We?0:1,E=!1,i=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&cr(n),ref:n&&It(n),scopeId:qs,slotScopeIds:null,children:p,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:x,patchFlag:m,dynamicProps:w,dynamicChildren:null,appContext:null,ctx:Fe};return i?(Fi(a,p),x&128&&e.normalize(a)):p&&(a.shapeFlag|=be(p)?8:16),wt>0&&!E&&Be&&(a.patchFlag>0||x&6)&&a.patchFlag!==32&&Be.push(a),a}const Ge=co;function co(e,n=null,p=null,m=0,w=null,x=!1){if((!e||e===wn)&&(e=yt),lo(e)){const i=ct(e,n,!0);return p&&Fi(i,p),wt>0&&!x&&Be&&(i.shapeFlag&6?Be[Be.indexOf(e)]=i:Be.push(i)),i.patchFlag|=-2,i}if(bo(e)&&(e=e.__vccOpts),n){n=ho(n);let{class:i,style:a}=n;i&&!be(i)&&(n.class=Ei(i)),Se(a)&&(Is(a)&&!ce(a)&&(a=we({},a)),n.style=wi(a))}const E=be(e)?1:En(e)?128:ro(e)?64:Se(e)?4:he(e)?2:0;return hr(e,n,p,m,w,E,x,!0)}function ho(e){return e?Is(e)||Yt in e?we({},e):e:null}function ct(e,n,p=!1){const{props:m,ref:w,patchFlag:x,children:E}=e,i=n?fo(m||{},n):m;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:i,key:i&&cr(i),ref:n&&n.ref?p&&w?ce(w)?w.concat(It(n)):[w,It(n)]:It(n):w,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:E,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==We?x===-1?16:x|16:x,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ct(e.ssContent),ssFallback:e.ssFallback&&ct(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function uo(e=" ",n=0){return Ge(Jt,null,e,n)}function Pe(e){return e==null||typeof e=="boolean"?Ge(yt):ce(e)?Ge(We,null,e.slice()):typeof e=="object"?ze(e):Ge(Jt,null,String(e))}function ze(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ct(e)}function Fi(e,n){let p=0;const{shapeFlag:m}=e;if(n==null)n=null;else if(ce(n))p=16;else if(typeof n=="object")if(m&65){const w=n.default;w&&(w._c&&(w._d=!1),Fi(e,w()),w._c&&(w._d=!0));return}else{p=32;const w=n._;!w&&!(Yt in n)?n._ctx=Fe:w===3&&Fe&&(Fe.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else he(n)?(n={default:n,_ctx:Fe},p=32):(n=String(n),m&64?(p=16,n=[uo(n)]):p=8);e.children=n,e.shapeFlag|=p}function fo(...e){const n={};for(let p=0;p<e.length;p++){const m=e[p];for(const w in m)if(w==="class")n.class!==m.class&&(n.class=Ei([n.class,m.class]));else if(w==="style")n.style=wi([n.style,m.style]);else if($t(w)){const x=n[w],E=m[w];E&&x!==E&&!(ce(x)&&x.includes(E))&&(n[w]=x?[].concat(x,E):E)}else w!==""&&(n[w]=m[w])}return n}function Ie(e,n,p,m=null){Me(e,n,7,[p,m])}const _o=Qs();let po=0;function vo(e,n,p){const m=e.type,w=(n?n.appContext:e.appContext)||_o,x={uid:po++,vnode:e,type:m,parent:n,appContext:w,root:null,next:null,subTree:null,effect:null,update:null,scope:new Pr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(w.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tr(m,w),emitsOptions:Ks(m,w),emit:null,emitted:null,propsDefaults:me,inheritAttrs:m.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:p,suspenseId:p?p.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return x.ctx={_:x},x.root=n?n.root:x,x.emit=gn.bind(null,x),e.ce&&e.ce(x),x}let xe=null,Nt,mi;{const e=bs(),n=(p,m)=>{let w;return(w=e[p])||(w=e[p]=[]),w.push(m),x=>{w.length>1?w.forEach(E=>E(x)):w[0](x)}};Nt=n("__VUE_INSTANCE_SETTERS__",p=>xe=p),mi=n("__VUE_SSR_SETTERS__",p=>Zt=p)}const Et=e=>{const n=xe;return Nt(e),e.scope.on(),()=>{e.scope.off(),Nt(n)}},as=()=>{xe&&xe.scope.off(),Nt(null)};function ur(e){return e.vnode.shapeFlag&4}let Zt=!1;function go(e,n=!1){n&&mi(n);const{props:p,children:m}=e.vnode,w=ur(e);Xn(e,p,w,n),Zn(e,m);const x=w?mo(e,n):void 0;return n&&mi(!1),x}function mo(e,n){const p=e.type;e.accessCache=Object.create(null),e.proxy=Ps(new Proxy(e.ctx,Un));const{setup:m}=p;if(m){const w=e.setupContext=m.length>1?Co(e):null,x=Et(e);tt();const E=Ve(m,e,0,[e.props,w]);if(it(),x(),Ss(E)){if(E.then(as,as),n)return E.then(i=>{ls(e,i,n)}).catch(i=>{Vt(i,e,0)});e.asyncDep=E}else ls(e,E,n)}else dr(e,n)}function ls(e,n,p){he(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:Se(n)&&(e.setupState=Us(n)),dr(e,p)}let cs;function dr(e,n,p){const m=e.type;if(!e.render){if(!n&&cs&&!m.render){const w=m.template||Pi(e).template;if(w){const{isCustomElement:x,compilerOptions:E}=e.appContext.config,{delimiters:i,compilerOptions:a}=m,h=we(we({isCustomElement:x,delimiters:i},E),a);m.render=cs(w,h)}}e.render=m.render||De}{const w=Et(e);tt();try{Nn(e)}finally{it(),w()}}}function So(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(n,p){return ke(e,"get","$attrs"),n[p]}}))}function Co(e){const n=p=>{e.exposed=p||{}};return{get attrs(){return So(e)},slots:e.slots,emit:e.emit,expose:n}}function Wi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Us(Ps(e.exposed)),{get(n,p){if(p in n)return n[p];if(p in vt)return vt[p](e)},has(n,p){return p in n||p in vt}}))}function bo(e){return he(e)&&"__vccOpts"in e}const yo=(e,n)=>on(e,n,Zt),wo="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Eo="http://www.w3.org/2000/svg",xo="http://www.w3.org/1998/Math/MathML",Ke=typeof document<"u"?document:null,hs=Ke&&Ke.createElement("template"),Lo={insert:(e,n,p)=>{n.insertBefore(e,p||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,p,m)=>{const w=n==="svg"?Ke.createElementNS(Eo,e):n==="mathml"?Ke.createElementNS(xo,e):Ke.createElement(e,p?{is:p}:void 0);return e==="select"&&m&&m.multiple!=null&&w.setAttribute("multiple",m.multiple),w},createText:e=>Ke.createTextNode(e),createComment:e=>Ke.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ke.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,p,m,w,x){const E=p?p.previousSibling:n.lastChild;if(w&&(w===x||w.nextSibling))for(;n.insertBefore(w.cloneNode(!0),p),!(w===x||!(w=w.nextSibling)););else{hs.innerHTML=m==="svg"?`<svg>${e}</svg>`:m==="mathml"?`<math>${e}</math>`:e;const i=hs.content;if(m==="svg"||m==="mathml"){const a=i.firstChild;for(;a.firstChild;)i.appendChild(a.firstChild);i.removeChild(a)}n.insertBefore(i,p)}return[E?E.nextSibling:n.firstChild,p?p.previousSibling:n.lastChild]}},ko=Symbol("_vtc");function Ro(e,n,p){const m=e[ko];m&&(n=(n?[n,...m]:[...m]).join(" ")),n==null?e.removeAttribute("class"):p?e.setAttribute("class",n):e.className=n}const us=Symbol("_vod"),Ao=Symbol("_vsh"),Do=Symbol(""),To=/(^|;)\s*display\s*:/;function Bo(e,n,p){const m=e.style,w=be(p);let x=!1;if(p&&!w){if(n)if(be(n))for(const E of n.split(";")){const i=E.slice(0,E.indexOf(":")).trim();p[i]==null&&Pt(m,i,"")}else for(const E in n)p[E]==null&&Pt(m,E,"");for(const E in p)E==="display"&&(x=!0),Pt(m,E,p[E])}else if(w){if(n!==p){const E=m[Do];E&&(p+=";"+E),m.cssText=p,x=To.test(p)}}else n&&e.removeAttribute("style");us in e&&(e[us]=x?m.display:"",e[Ao]&&(m.display="none"))}const ds=/\s*!important$/;function Pt(e,n,p){if(ce(p))p.forEach(m=>Pt(e,n,m));else if(p==null&&(p=""),n.startsWith("--"))e.setProperty(n,p);else{const m=Mo(e,n);ds.test(p)?e.setProperty(ht(m),p.replace(ds,""),"important"):e[m]=p}}const fs=["Webkit","Moz","ms"],oi={};function Mo(e,n){const p=oi[n];if(p)return p;let m=at(n);if(m!=="filter"&&m in e)return oi[n]=m;m=Cs(m);for(let w=0;w<fs.length;w++){const x=fs[w]+m;if(x in e)return oi[n]=x}return n}const _s="http://www.w3.org/1999/xlink";function Oo(e,n,p,m,w){if(m&&n.startsWith("xlink:"))p==null?e.removeAttributeNS(_s,n.slice(6,n.length)):e.setAttributeNS(_s,n,p);else{const x=Ir(n);p==null||x&&!ys(p)?e.removeAttribute(n):e.setAttribute(n,x?"":p)}}function Io(e,n,p,m,w,x,E){if(n==="innerHTML"||n==="textContent"){m&&E(m,w,x),e[n]=p??"";return}const i=e.tagName;if(n==="value"&&i!=="PROGRESS"&&!i.includes("-")){const h=i==="OPTION"?e.getAttribute("value")||"":e.value,d=p??"";(h!==d||!("_value"in e))&&(e.value=d),p==null&&e.removeAttribute(n),e._value=p;return}let a=!1;if(p===""||p==null){const h=typeof e[n];h==="boolean"?p=ys(p):p==null&&h==="string"?(p="",a=!0):h==="number"&&(p=0,a=!0)}try{e[n]=p}catch{}a&&e.removeAttribute(n)}function Po(e,n,p,m){e.addEventListener(n,p,m)}function Ho(e,n,p,m){e.removeEventListener(n,p,m)}const ps=Symbol("_vei");function Fo(e,n,p,m,w=null){const x=e[ps]||(e[ps]={}),E=x[n];if(m&&E)E.value=m;else{const[i,a]=Wo(n);if(m){const h=x[n]=$o(m,w);Po(e,i,h,a)}else E&&(Ho(e,i,E,a),x[n]=void 0)}}const vs=/(?:Once|Passive|Capture)$/;function Wo(e){let n;if(vs.test(e)){n={};let m;for(;m=e.match(vs);)e=e.slice(0,e.length-m[0].length),n[m[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ht(e.slice(2)),n]}let ai=0;const Uo=Promise.resolve(),No=()=>ai||(Uo.then(()=>ai=0),ai=Date.now());function $o(e,n){const p=m=>{if(!m._vts)m._vts=Date.now();else if(m._vts<=p.attached)return;Me(jo(m,p.value),n,5,[m])};return p.value=e,p.attached=No(),p}function jo(e,n){if(ce(n)){const p=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{p.call(e),e._stopped=!0},n.map(m=>w=>!w._stopped&&m&&m(w))}else return n}const gs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zo=(e,n,p,m,w,x,E,i,a)=>{const h=w==="svg";n==="class"?Ro(e,m,h):n==="style"?Bo(e,p,m):$t(n)?Ci(n)||Fo(e,n,p,m,E):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Ko(e,n,m,h))?Io(e,n,m,x,E,i,a):(n==="true-value"?e._trueValue=m:n==="false-value"&&(e._falseValue=m),Oo(e,n,m,h))};function Ko(e,n,p,m){if(m)return!!(n==="innerHTML"||n==="textContent"||n in e&&gs(n)&&he(p));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const w=e.tagName;if(w==="IMG"||w==="VIDEO"||w==="CANVAS"||w==="SOURCE")return!1}return gs(n)&&be(p)?!1:n in e}const qo=we({patchProp:zo},Lo);let ms;function Vo(){return ms||(ms=eo(qo))}const Go=(...e)=>{const n=Vo().createApp(...e),{mount:p}=n;return n.mount=m=>{const w=Jo(m);if(!w)return;const x=n._component;!he(x)&&!x.render&&!x.template&&(x.template=w.innerHTML),w.innerHTML="";const E=p(w,!1,Xo(w));return w instanceof Element&&(w.removeAttribute("v-cloak"),w.setAttribute("data-v-app","")),E},n};function Xo(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Jo(e){return be(e)?document.querySelector(e):e}var fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_r={exports:{}};(function(e,n){(function(p,m){e.exports=m()})(self,()=>(()=>{var p={4567:function(E,i,a){var h=this&&this.__decorate||function(o,u,_,g){var C,c=arguments.length,b=c<3?u:g===null?g=Object.getOwnPropertyDescriptor(u,_):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,u,_,g);else for(var R=o.length-1;R>=0;R--)(C=o[R])&&(b=(c<3?C(b):c>3?C(u,_,b):C(u,_))||b);return c>3&&b&&Object.defineProperty(u,_,b),b},d=this&&this.__param||function(o,u){return function(_,g){u(_,g,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const l=a(9042),f=a(6114),S=a(9924),y=a(844),v=a(5596),t=a(4725),r=a(3656);let s=i.AccessibilityManager=class extends y.Disposable{constructor(o,u){super(),this._terminal=o,this._renderService=u,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let _=0;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);if(this._topBoundaryFocusListener=_=>this._handleBoundaryFocus(_,0),this._bottomBoundaryFocusListener=_=>this._handleBoundaryFocus(_,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new S.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(_=>this._handleResize(_.rows))),this.register(this._terminal.onRender(_=>this._refreshRows(_.start,_.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(_=>this._handleChar(_))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(_=>this._handleTab(_))),this.register(this._terminal.onKey(_=>this._handleKey(_.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new v.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,r.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(o){for(let u=0;u<o;u++)this._handleChar(" ")}_handleChar(o){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==o&&(this._charsToAnnounce+=o):this._charsToAnnounce+=o,o===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)),f.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,f.isMac&&this._liveRegion.remove()}_handleKey(o){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(o)||this._charsToConsume.push(o)}_refreshRows(o,u){this._liveRegionDebouncer.refresh(o,u,this._terminal.rows)}_renderRows(o,u){const _=this._terminal.buffer,g=_.lines.length.toString();for(let C=o;C<=u;C++){const c=_.translateBufferLineToString(_.ydisp+C,!0),b=(_.ydisp+C+1).toString(),R=this._rowElements[C];R&&(c.length===0?R.innerText="":R.textContent=c,R.setAttribute("aria-posinset",b),R.setAttribute("aria-setsize",g))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(o,u){const _=o.target,g=this._rowElements[u===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(u===0?"1":`${this._terminal.buffer.lines.length}`)||o.relatedTarget!==g)return;let C,c;if(u===0?(C=_,c=this._rowElements.pop(),this._rowContainer.removeChild(c)):(C=this._rowElements.shift(),c=_,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),c.removeEventListener("focus",this._bottomBoundaryFocusListener),u===0){const b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{const b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(u===0?-1:1),this._rowElements[u===0?1:this._rowElements.length-2].focus(),o.preventDefault(),o.stopImmediatePropagation()}_handleResize(o){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let u=this._rowContainer.children.length;u<this._terminal.rows;u++)this._rowElements[u]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[u]);for(;this._rowElements.length>o;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const o=document.createElement("div");return o.setAttribute("role","listitem"),o.tabIndex=-1,this._refreshRowDimensions(o),o}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let o=0;o<this._terminal.rows;o++)this._refreshRowDimensions(this._rowElements[o])}}_refreshRowDimensions(o){o.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=s=h([d(1,t.IRenderService)],s)},3614:(E,i)=>{function a(f){return f.replace(/\r?\n/g,"\r")}function h(f,S){return S?"\x1B[200~"+f+"\x1B[201~":f}function d(f,S,y,v){f=h(f=a(f),y.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(f,!0),S.value=""}function l(f,S,y){const v=y.getBoundingClientRect(),t=f.clientX-v.left-10,r=f.clientY-v.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${t}px`,S.style.top=`${r}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=a,i.bracketTextForPaste=h,i.copyHandler=function(f,S){f.clipboardData&&f.clipboardData.setData("text/plain",S.selectionText),f.preventDefault()},i.handlePasteEvent=function(f,S,y,v){f.stopPropagation(),f.clipboardData&&d(f.clipboardData.getData("text/plain"),S,y,v)},i.paste=d,i.moveTextAreaUnderMouseCursor=l,i.rightClickHandler=function(f,S,y,v,t){l(f,S,y),t&&v.rightClickSelect(f),S.value=v.selectionText,S.select()}},7239:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const h=a(1505);i.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(d,l,f){this._css.set(d,l,f)}getCss(d,l){return this._css.get(d,l)}setColor(d,l,f){this._color.set(d,l,f)}getColor(d,l){return this._color.get(d,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(a,h,d,l){a.addEventListener(h,d,l);let f=!1;return{dispose:()=>{f||(f=!0,a.removeEventListener(h,d,l))}}}},6465:function(E,i,a){var h=this&&this.__decorate||function(t,r,s,o){var u,_=arguments.length,g=_<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,s,o);else for(var C=t.length-1;C>=0;C--)(u=t[C])&&(g=(_<3?u(g):_>3?u(r,s,g):u(r,s))||g);return _>3&&g&&Object.defineProperty(r,s,g),g},d=this&&this.__param||function(t,r){return function(s,o){r(s,o,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const l=a(3656),f=a(8460),S=a(844),y=a(2585);let v=i.Linkifier2=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(t){super(),this._bufferService=t,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new f.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new f.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(t){return this._linkProviders.push(t),{dispose:()=>{const r=this._linkProviders.indexOf(t);r!==-1&&this._linkProviders.splice(r,1)}}}attachToDom(t,r,s){this._element=t,this._mouseService=r,this._renderService=s,this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(t){if(this._lastMouseEvent=t,!this._element||!this._mouseService)return;const r=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!r)return;this._isMouseOut=!1;const s=t.composedPath();for(let o=0;o<s.length;o++){const u=s[o];if(u.classList.contains("xterm"))break;if(u.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._handleHover(r),this._lastBufferCell=r)}_handleHover(t){if(this._activeLine!==t.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(t,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,r){var s,o;this._activeProviderReplies&&r||((s=this._activeProviderReplies)===null||s===void 0||s.forEach(_=>{_==null||_.forEach(g=>{g.link.dispose&&g.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let u=!1;for(const[_,g]of this._linkProviders.entries())r?!((o=this._activeProviderReplies)===null||o===void 0)&&o.get(_)&&(u=this._checkLinkProviderResult(_,t,u)):g.provideLinks(t.y,C=>{var c,b;if(this._isMouseOut)return;const R=C==null?void 0:C.map(T=>({link:T}));(c=this._activeProviderReplies)===null||c===void 0||c.set(_,R),u=this._checkLinkProviderResult(_,t,u),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,r){const s=new Set;for(let o=0;o<r.size;o++){const u=r.get(o);if(u)for(let _=0;_<u.length;_++){const g=u[_],C=g.link.range.start.y<t?0:g.link.range.start.x,c=g.link.range.end.y>t?this._bufferService.cols:g.link.range.end.x;for(let b=C;b<=c;b++){if(s.has(b)){u.splice(_--,1);break}s.add(b)}}}}_checkLinkProviderResult(t,r,s){var o;if(!this._activeProviderReplies)return s;const u=this._activeProviderReplies.get(t);let _=!1;for(let g=0;g<t;g++)this._activeProviderReplies.has(g)&&!this._activeProviderReplies.get(g)||(_=!0);if(!_&&u){const g=u.find(C=>this._linkAtPosition(C.link,r));g&&(s=!0,this._handleNewLink(g))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(let g=0;g<this._activeProviderReplies.size;g++){const C=(o=this._activeProviderReplies.get(g))===null||o===void 0?void 0:o.find(c=>this._linkAtPosition(c.link,r));if(C){s=!0,this._handleNewLink(C);break}}return s}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._element||!this._mouseService||!this._currentLink)return;const r=this._positionFromMouseEvent(t,this._element,this._mouseService);r&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!r||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(t){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const r=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);r&&this._linkAtPosition(t.link,r)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0||t.link.decorations.underline,pointerCursor:t.link.decorations===void 0||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>{var s,o;return(o=(s=this._currentLink)===null||s===void 0?void 0:s.state)===null||o===void 0?void 0:o.decorations.pointerCursor},set:s=>{var o,u;!((o=this._currentLink)===null||o===void 0)&&o.state&&this._currentLink.state.decorations.pointerCursor!==s&&(this._currentLink.state.decorations.pointerCursor=s,this._currentLink.state.isHovered&&((u=this._element)===null||u===void 0||u.classList.toggle("xterm-cursor-pointer",s)))}},underline:{get:()=>{var s,o;return(o=(s=this._currentLink)===null||s===void 0?void 0:s.state)===null||o===void 0?void 0:o.decorations.underline},set:s=>{var o,u,_;!((o=this._currentLink)===null||o===void 0)&&o.state&&((_=(u=this._currentLink)===null||u===void 0?void 0:u.state)===null||_===void 0?void 0:_.decorations.underline)!==s&&(this._currentLink.state.decorations.underline=s,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,s))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(s=>{if(!this._currentLink)return;const o=s.start===0?0:s.start+1+this._bufferService.buffer.ydisp,u=this._bufferService.buffer.ydisp+1+s.end;if(this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=u&&(this._clearCurrentLink(o,u),this._lastMouseEvent&&this._element)){const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._askForLink(_,!1)}})))}_linkHover(t,r,s){var o;!((o=this._currentLink)===null||o===void 0)&&o.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(s,r.text)}_fireUnderlineEvent(t,r){const s=t.range,o=this._bufferService.buffer.ydisp,u=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-o-1,s.end.x,s.end.y-o-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(u)}_linkLeave(t,r,s){var o;!((o=this._currentLink)===null||o===void 0)&&o.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(s,r.text)}_linkAtPosition(t,r){const s=t.range.start.y*this._bufferService.cols+t.range.start.x,o=t.range.end.y*this._bufferService.cols+t.range.end.x,u=r.y*this._bufferService.cols+r.x;return s<=u&&u<=o}_positionFromMouseEvent(t,r,s){const o=s.getCoords(t,r,this._bufferService.cols,this._bufferService.rows);if(o)return{x:o[0],y:o[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,r,s,o,u){return{x1:t,y1:r,x2:s,y2:o,cols:this._bufferService.cols,fg:u}}};i.Linkifier2=v=h([d(0,y.IBufferService)],v)},9042:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(E,i,a){var h=this&&this.__decorate||function(v,t,r,s){var o,u=arguments.length,_=u<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,t,r,s);else for(var g=v.length-1;g>=0;g--)(o=v[g])&&(_=(u<3?o(_):u>3?o(t,r,_):o(t,r))||_);return u>3&&_&&Object.defineProperty(t,r,_),_},d=this&&this.__param||function(v,t){return function(r,s){t(r,s,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const l=a(511),f=a(2585);let S=i.OscLinkProvider=class{constructor(v,t,r){this._bufferService=v,this._optionsService=t,this._oscLinkService=r}provideLinks(v,t){var r;const s=this._bufferService.buffer.lines.get(v-1);if(!s)return void t(void 0);const o=[],u=this._optionsService.rawOptions.linkHandler,_=new l.CellData,g=s.getTrimmedLength();let C=-1,c=-1,b=!1;for(let R=0;R<g;R++)if(c!==-1||s.hasContent(R)){if(s.loadCell(R,_),_.hasExtendedAttrs()&&_.extended.urlId){if(c===-1){c=R,C=_.extended.urlId;continue}b=_.extended.urlId!==C}else c!==-1&&(b=!0);if(b||c!==-1&&R===g-1){const T=(r=this._oscLinkService.getLinkData(C))===null||r===void 0?void 0:r.uri;if(T){const A={start:{x:c+1,y:v},end:{x:R+(b||R!==g-1?0:1),y:v}};let M=!1;if(!(u!=null&&u.allowNonHttpProtocols))try{const F=new URL(T);["http:","https:"].includes(F.protocol)||(M=!0)}catch{M=!0}M||o.push({text:T,range:A,activate:(F,$)=>u?u.activate(F,$,A):y(0,$),hover:(F,$)=>{var j;return(j=u==null?void 0:u.hover)===null||j===void 0?void 0:j.call(u,F,$,A)},leave:(F,$)=>{var j;return(j=u==null?void 0:u.leave)===null||j===void 0?void 0:j.call(u,F,$,A)}})}b=!1,_.hasExtendedAttrs()&&_.extended.urlId?(c=R,C=_.extended.urlId):(c=-1,C=-1)}}t(o)}};function y(v,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){const r=window.open();if(r){try{r.opener=null}catch{}r.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=S=h([d(0,f.IBufferService),d(1,f.IOptionsService),d(2,f.IOscLinkService)],S)},6193:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(a,h){this._parentWindow=a,this._renderCallback=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,h,d){this._rowCount=d,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const h=a(844);class d extends h.Disposable{constructor(f){super(),this._parentWindow=f,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,h.toDisposable)(()=>{this.clearListener()}))}setListener(f){this._listener&&this.clearListener(),this._listener=f,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var f;this._outerListener&&((f=this._resolutionMediaMatchList)===null||f===void 0||f.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=d},3236:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const h=a(3614),d=a(3656),l=a(6465),f=a(9042),S=a(3730),y=a(1680),v=a(3107),t=a(5744),r=a(2950),s=a(1296),o=a(428),u=a(4269),_=a(5114),g=a(8934),C=a(3230),c=a(9312),b=a(4725),R=a(6731),T=a(8055),A=a(8969),M=a(8460),F=a(844),$=a(6114),j=a(8437),N=a(2584),L=a(7399),B=a(5941),O=a(9074),P=a(2585),V=a(5435),ee=a(4567),ne=typeof window<"u"?window.document:null;class se extends A.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(k={}){super(k),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new F.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(l.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((H,K)=>this.refresh(H,K))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(H=>this._reportWindowsOptions(H))),this.register(this._inputHandler.onColor(H=>this._handleColorEvent(H))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(H=>this._afterResize(H.cols,H.rows))),this.register((0,F.toDisposable)(()=>{var H,K;this._customKeyEventHandler=void 0,(K=(H=this.element)===null||H===void 0?void 0:H.parentNode)===null||K===void 0||K.removeChild(this.element)}))}_handleColorEvent(k){if(this._themeService)for(const H of k){let K,z="";switch(H.index){case 256:K="foreground",z="10";break;case 257:K="background",z="11";break;case 258:K="cursor",z="12";break;default:K="ansi",z="4;"+H.index}switch(H.type){case 0:const ae=T.color.toColorRGB(K==="ansi"?this._themeService.colors.ansi[H.index]:this._themeService.colors[K]);this.coreService.triggerDataEvent(`${N.C0.ESC}]${z};${(0,B.toRgbString)(ae)}${N.C1_ESCAPED.ST}`);break;case 1:if(K==="ansi")this._themeService.modifyColors(te=>te.ansi[H.index]=T.rgba.toColor(...H.color));else{const te=K;this._themeService.modifyColors(D=>D[te]=T.rgba.toColor(...H.color))}break;case 2:this._themeService.restoreColor(H.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(k){k?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(k){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[I"),this.updateCursorStyle(k),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var k;return(k=this.textarea)===null||k===void 0?void 0:k.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const k=this.buffer.ybase+this.buffer.y,H=this.buffer.lines.get(k);if(!H)return;const K=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,ae=H.getWidth(K),te=this._renderService.dimensions.css.cell.width*ae,D=this.buffer.y*this._renderService.dimensions.css.cell.height,I=K*this._renderService.dimensions.css.cell.width;this.textarea.style.left=I+"px",this.textarea.style.top=D+"px",this.textarea.style.width=te+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,d.addDisposableDomListener)(this.element,"copy",H=>{this.hasSelection()&&(0,h.copyHandler)(H,this._selectionService)}));const k=H=>(0,h.handlePasteEvent)(H,this.textarea,this.coreService,this.optionsService);this.register((0,d.addDisposableDomListener)(this.textarea,"paste",k)),this.register((0,d.addDisposableDomListener)(this.element,"paste",k)),$.isFirefox?this.register((0,d.addDisposableDomListener)(this.element,"mousedown",H=>{H.button===2&&(0,h.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,d.addDisposableDomListener)(this.element,"contextmenu",H=>{(0,h.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),$.isLinux&&this.register((0,d.addDisposableDomListener)(this.element,"auxclick",H=>{H.button===1&&(0,h.moveTextAreaUnderMouseCursor)(H,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,d.addDisposableDomListener)(this.textarea,"keyup",k=>this._keyUp(k),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keydown",k=>this._keyDown(k),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keypress",k=>this._keyPress(k),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionupdate",k=>this._compositionHelper.compositionupdate(k))),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,d.addDisposableDomListener)(this.textarea,"input",k=>this._inputEvent(k),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(k){var H;if(!k)throw new Error("Terminal requires a parent element.");k.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=k.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),k.appendChild(this.element);const K=ne.createDocumentFragment();this._viewportElement=ne.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),K.appendChild(this._viewportElement),this._viewportScrollArea=ne.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=ne.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=ne.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),K.appendChild(this.screenElement),this.textarea=ne.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",f.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(_.CoreBrowserService,this.textarea,(H=this._document.defaultView)!==null&&H!==void 0?H:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,d.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,d.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(o.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(u.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=ne.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(r.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(K);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(g.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(c.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,d.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(t.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(s.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const k=this,H=this.element;function K(te){const D=k._mouseService.getMouseReportCoords(te,k.screenElement);if(!D)return!1;let I,U;switch(te.overrideType||te.type){case"mousemove":U=32,te.buttons===void 0?(I=3,te.button!==void 0&&(I=te.button<3?te.button:3)):I=1&te.buttons?0:4&te.buttons?1:2&te.buttons?2:3;break;case"mouseup":U=0,I=te.button<3?te.button:3;break;case"mousedown":U=1,I=te.button<3?te.button:3;break;case"wheel":if(k.viewport.getLinesScrolled(te)===0)return!1;U=te.deltaY<0?0:1,I=4;break;default:return!1}return!(U===void 0||I===void 0||I>4)&&k.coreMouseService.triggerMouseEvent({col:D.col,row:D.row,x:D.x,y:D.y,button:I,action:U,ctrl:te.ctrlKey,alt:te.altKey,shift:te.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ae={mouseup:te=>(K(te),te.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel(te)),wheel:te=>(K(te),this.cancel(te,!0)),mousedrag:te=>{te.buttons&&K(te)},mousemove:te=>{te.buttons||K(te)}};this.register(this.coreMouseService.onProtocolChange(te=>{te?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(te)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&te?z.mousemove||(H.addEventListener("mousemove",ae.mousemove),z.mousemove=ae.mousemove):(H.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&te?z.wheel||(H.addEventListener("wheel",ae.wheel,{passive:!1}),z.wheel=ae.wheel):(H.removeEventListener("wheel",z.wheel),z.wheel=null),2&te?z.mouseup||(H.addEventListener("mouseup",ae.mouseup),z.mouseup=ae.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),H.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&te?z.mousedrag||(z.mousedrag=ae.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,d.addDisposableDomListener)(H,"mousedown",te=>{if(te.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(te))return K(te),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel(te)})),this.register((0,d.addDisposableDomListener)(H,"wheel",te=>{if(!z.wheel){if(!this.buffer.hasScrollback){const D=this.viewport.getLinesScrolled(te);if(D===0)return;const I=N.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(te.deltaY<0?"A":"B");let U="";for(let q=0;q<Math.abs(D);q++)U+=I;return this.coreService.triggerDataEvent(U,!0),this.cancel(te,!0)}return this.viewport.handleWheel(te)?this.cancel(te):void 0}},{passive:!1})),this.register((0,d.addDisposableDomListener)(H,"touchstart",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(te),this.cancel(te)},{passive:!0})),this.register((0,d.addDisposableDomListener)(H,"touchmove",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(te)?void 0:this.cancel(te)},{passive:!1}))}refresh(k,H){var K;(K=this._renderService)===null||K===void 0||K.refreshRows(k,H)}updateCursorStyle(k){var H;!((H=this._selectionService)===null||H===void 0)&&H.shouldColumnSelect(k)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(k,H,K=0){var z;K===1?(super.scrollLines(k,H,K),this.refresh(0,this.rows-1)):(z=this.viewport)===null||z===void 0||z.scrollLines(k)}paste(k){(0,h.paste)(k,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(k){this._customKeyEventHandler=k}registerLinkProvider(k){return this.linkifier2.registerLinkProvider(k)}registerCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const H=this._characterJoinerService.register(k);return this.refresh(0,this.rows-1),H}deregisterCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(k)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(k){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+k)}registerDecoration(k){return this._decorationService.registerDecoration(k)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(k,H,K){this._selectionService.setSelection(k,H,K)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var k;(k=this._selectionService)===null||k===void 0||k.clearSelection()}selectAll(){var k;(k=this._selectionService)===null||k===void 0||k.selectAll()}selectLines(k,H){var K;(K=this._selectionService)===null||K===void 0||K.selectLines(k,H)}_keyDown(k){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;const H=this.browser.isMac&&this.options.macOptionIsMeta&&k.altKey;if(!H&&!this._compositionHelper.keydown(k))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;H||k.key!=="Dead"&&k.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const K=(0,L.evaluateKeyboardEvent)(k,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(k),K.type===3||K.type===2){const z=this.rows-1;return this.scrollLines(K.type===2?-z:z),this.cancel(k,!0)}return K.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,k)||(K.cancel&&this.cancel(k,!0),!K.key||!!(k.key&&!k.ctrlKey&&!k.altKey&&!k.metaKey&&k.key.length===1&&k.key.charCodeAt(0)>=65&&k.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(K.key!==N.C0.ETX&&K.key!==N.C0.CR||(this.textarea.value=""),this._onKey.fire({key:K.key,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(K.key,!0),!this.optionsService.rawOptions.screenReaderMode||k.altKey||k.ctrlKey?this.cancel(k,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(k,H){const K=k.isMac&&!this.options.macOptionIsMeta&&H.altKey&&!H.ctrlKey&&!H.metaKey||k.isWindows&&H.altKey&&H.ctrlKey&&!H.metaKey||k.isWindows&&H.getModifierState("AltGraph");return H.type==="keypress"?K:K&&(!H.keyCode||H.keyCode>47)}_keyUp(k){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1||(function(H){return H.keyCode===16||H.keyCode===17||H.keyCode===18}(k)||this.focus(),this.updateCursorStyle(k),this._keyPressHandled=!1)}_keyPress(k){let H;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;if(this.cancel(k),k.charCode)H=k.charCode;else if(k.which===null||k.which===void 0)H=k.keyCode;else{if(k.which===0||k.charCode===0)return!1;H=k.which}return!(!H||(k.altKey||k.ctrlKey||k.metaKey)&&!this._isThirdLevelShift(this.browser,k)||(H=String.fromCharCode(H),this._onKey.fire({key:H,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(H,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(k){if(k.data&&k.inputType==="insertText"&&(!k.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const H=k.data;return this.coreService.triggerDataEvent(H,!0),this.cancel(k),!0}return!1}resize(k,H){k!==this.cols||H!==this.rows?super.resize(k,H):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(k,H){var K,z;(K=this._charSizeService)===null||K===void 0||K.measure(),(z=this.viewport)===null||z===void 0||z.syncScrollArea(!0)}clear(){var k;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let H=1;H<this.rows;H++)this.buffer.lines.push(this.buffer.getBlankLine(j.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(k=this.viewport)===null||k===void 0||k.reset(),this.refresh(0,this.rows-1)}}reset(){var k,H;this.options.rows=this.rows,this.options.cols=this.cols;const K=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)===null||k===void 0||k.reset(),this._decorationService.reset(),(H=this.viewport)===null||H===void 0||H.reset(),this._customKeyEventHandler=K,this.refresh(0,this.rows-1)}clearTextureAtlas(){var k;(k=this._renderService)===null||k===void 0||k.clearTextureAtlas()}_reportFocus(){var k;!((k=this.element)===null||k===void 0)&&k.classList.contains("focus")?this.coreService.triggerDataEvent(N.C0.ESC+"[I"):this.coreService.triggerDataEvent(N.C0.ESC+"[O")}_reportWindowsOptions(k){if(this._renderService)switch(k){case V.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const H=this._renderService.dimensions.css.canvas.width.toFixed(0),K=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[4;${K};${H}t`);break;case V.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),ae=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[6;${ae};${z}t`)}}cancel(k,H){if(this.options.cancelEvents||H)return k.preventDefault(),k.stopPropagation(),!1}}i.Terminal=se},9924:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(a,h=1e3){this._renderCallback=a,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,h,d){this._rowCount=d,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const f=l-this._lastRefreshMs,S=this._debounceThresholdMS-f;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h)}}},1680:function(E,i,a){var h=this&&this.__decorate||function(r,s,o,u){var _,g=arguments.length,C=g<3?s:u===null?u=Object.getOwnPropertyDescriptor(s,o):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(r,s,o,u);else for(var c=r.length-1;c>=0;c--)(_=r[c])&&(C=(g<3?_(C):g>3?_(s,o,C):_(s,o))||C);return g>3&&C&&Object.defineProperty(s,o,C),C},d=this&&this.__param||function(r,s){return function(o,u){s(o,u,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const l=a(3656),f=a(4725),S=a(8460),y=a(844),v=a(2585);let t=i.Viewport=class extends y.Disposable{constructor(r,s,o,u,_,g,C,c){super(),this._viewportElement=r,this._scrollArea=s,this._bufferService=o,this._optionsService=u,this._charSizeService=_,this._renderService=g,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(c.colors),this.register(c.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(r){this._viewportElement.style.backgroundColor=r.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(r){if(r)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const s=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==s&&(this._lastRecordedBufferHeight=s,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._refreshAnimationFrame=null}syncScrollArea(r=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(r);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(r)}_handleScroll(r){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const r=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(r*(this._smoothScrollState.target-this._smoothScrollState.origin)),r<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(r,s){const o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&o<this._lastRecordedBufferHeight)||(r.cancelable&&r.preventDefault(),!1)}handleWheel(r){const s=this._getPixelsScrolled(r);return s!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+s:this._smoothScrollState.target+=s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=s,this._bubbleScroll(r,s))}scrollLines(r){if(r!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const s=r*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:r,suppressScrollEvent:!1})}_getPixelsScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let s=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s}getBufferElements(r,s){var o;let u,_="";const g=[],C=s??this._bufferService.buffer.lines.length,c=this._bufferService.buffer.lines;for(let b=r;b<C;b++){const R=c.get(b);if(!R)continue;const T=(o=c.get(b+1))===null||o===void 0?void 0:o.isWrapped;if(_+=R.translateToString(!T),!T||b===c.length-1){const A=document.createElement("div");A.textContent=_,g.push(A),_.length>0&&(u=A),_=""}}return{bufferElements:g,cursorElement:u}}getLinesScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let s=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s}_applyScrollModifier(r,s){const o=this._optionsService.rawOptions.fastScrollModifier;return o==="alt"&&s.altKey||o==="ctrl"&&s.ctrlKey||o==="shift"&&s.shiftKey?r*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:r*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(r){this._lastTouchY=r.touches[0].pageY}handleTouchMove(r){const s=this._lastTouchY-r.touches[0].pageY;return this._lastTouchY=r.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(r,s))}};i.Viewport=t=h([d(2,v.IBufferService),d(3,v.IOptionsService),d(4,f.ICharSizeService),d(5,f.IRenderService),d(6,f.ICoreBrowserService),d(7,f.IThemeService)],t)},3107:function(E,i,a){var h=this&&this.__decorate||function(t,r,s,o){var u,_=arguments.length,g=_<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,s,o);else for(var C=t.length-1;C>=0;C--)(u=t[C])&&(g=(_<3?u(g):_>3?u(r,s,g):u(r,s))||g);return _>3&&g&&Object.defineProperty(r,s,g),g},d=this&&this.__param||function(t,r){return function(s,o){r(s,o,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const l=a(3656),f=a(4725),S=a(844),y=a(2585);let v=i.BufferDecorationRenderer=class extends S.Disposable{constructor(t,r,s,o){super(),this._screenElement=t,this._bufferService=r,this._decorationService=s,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(u=>this._removeDecoration(u))),this.register((0,S.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){var r,s;const o=document.createElement("div");o.classList.add("xterm-decoration"),o.classList.toggle("xterm-decoration-top-layer",((r=t==null?void 0:t.options)===null||r===void 0?void 0:r.layer)==="top"),o.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,o.style.height=(t.options.height||1)*this._renderService.dimensions.css.cell.height+"px",o.style.top=(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",o.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const u=(s=t.options.x)!==null&&s!==void 0?s:0;return u&&u>this._bufferService.cols&&(o.style.display="none"),this._refreshXPosition(t,o),o}_refreshStyle(t){const r=t.marker.line-this._bufferService.buffers.active.ydisp;if(r<0||r>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let s=this._decorationElements.get(t);s||(s=this._createElement(t),t.element=s,this._decorationElements.set(t,s),this._container.appendChild(s),t.onDispose(()=>{this._decorationElements.delete(t),s.remove()})),s.style.top=r*this._renderService.dimensions.css.cell.height+"px",s.style.display=this._altBufferIsActive?"none":"block",t.onRenderEmitter.fire(s)}}_refreshXPosition(t,r=t.element){var s;if(!r)return;const o=(s=t.options.x)!==null&&s!==void 0?s:0;(t.options.anchor||"left")==="right"?r.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":r.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(t){var r;(r=this._decorationElements.get(t))===null||r===void 0||r.remove(),this._decorationElements.delete(t),t.dispose()}};i.BufferDecorationRenderer=v=h([d(1,y.IBufferService),d(2,y.IDecorationService),d(3,f.IRenderService)],v)},5871:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const h of this._zones)if(h.color===a.options.overviewRulerOptions.color&&h.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,a.marker.line))return;if(this._lineAdjacentToZone(h,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(h,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,h){return h>=a.startBufferLine&&h<=a.endBufferLine}_lineAdjacentToZone(a,h,d){return h>=a.startBufferLine-this._linePadding[d||"full"]&&h<=a.endBufferLine+this._linePadding[d||"full"]}_addLineToZone(a,h){a.startBufferLine=Math.min(a.startBufferLine,h),a.endBufferLine=Math.max(a.endBufferLine,h)}}},5744:function(E,i,a){var h=this&&this.__decorate||function(u,_,g,C){var c,b=arguments.length,R=b<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,_,g,C);else for(var T=u.length-1;T>=0;T--)(c=u[T])&&(R=(b<3?c(R):b>3?c(_,g,R):c(_,g))||R);return b>3&&R&&Object.defineProperty(_,g,R),R},d=this&&this.__param||function(u,_){return function(g,C){_(g,C,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const l=a(5871),f=a(3656),S=a(4725),y=a(844),v=a(2585),t={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0};let o=i.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(u,_,g,C,c,b,R){var T;super(),this._viewportElement=u,this._screenElement=_,this._bufferService=g,this._decorationService=C,this._renderService=c,this._optionsService=b,this._coreBrowseService=R,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(T=this._viewportElement.parentElement)===null||T===void 0||T.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,f.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const u=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);r.full=this._canvas.width,r.left=u,r.center=_,r.right=u,this._refreshDrawHeightConstants(),s.full=0,s.left=0,s.center=r.left,s.right=r.left+r.center}_refreshDrawHeightConstants(){t.full=Math.round(2*this._coreBrowseService.dpr);const u=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(u,12),6)*this._coreBrowseService.dpr);t.left=_,t.center=_,t.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;const u=this._colorZoneStore.zones;for(const _ of u)_.position!=="full"&&this._renderColorZone(_);for(const _ of u)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(u){this._ctx.fillStyle=u.color,this._ctx.fillRect(s[u.position||"full"],Math.round((this._canvas.height-1)*(u.startBufferLine/this._bufferService.buffers.active.lines.length)-t[u.position||"full"]/2),r[u.position||"full"],Math.round((this._canvas.height-1)*((u.endBufferLine-u.startBufferLine)/this._bufferService.buffers.active.lines.length)+t[u.position||"full"]))}_queueRefresh(u,_){this._shouldUpdateDimensions=u||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=o=h([d(2,v.IBufferService),d(3,v.IDecorationService),d(4,S.IRenderService),d(5,v.IOptionsService),d(6,S.ICoreBrowserService)],o)},2950:function(E,i,a){var h=this&&this.__decorate||function(v,t,r,s){var o,u=arguments.length,_=u<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,t,r,s);else for(var g=v.length-1;g>=0;g--)(o=v[g])&&(_=(u<3?o(_):u>3?o(t,r,_):o(t,r))||_);return u>3&&_&&Object.defineProperty(t,r,_),_},d=this&&this.__param||function(v,t){return function(r,s){t(r,s,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const l=a(4725),f=a(2585),S=a(2584);let y=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,t,r,s,o,u){this._textarea=v,this._compositionView=t,this._bufferService=r,this._optionsService=s,this._coreService=o,this._renderService=u,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){const t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let r;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,r=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),r.length>0&&this._coreService.triggerDataEvent(r,!0)}},0)}else{this._isSendingComposition=!1;const t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){const v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const t=this._textarea.value,r=t.replace(v,"");this._dataAlreadySent=r,t.length>v.length?this._coreService.triggerDataEvent(r,!0):t.length<v.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):t.length===v.length&&t!==v&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const u=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(u.width,1)+"px",this._textarea.style.height=Math.max(u.height,1)+"px",this._textarea.style.lineHeight=u.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=y=h([d(2,f.IBufferService),d(3,f.IOptionsService),d(4,f.ICoreService),d(5,l.IRenderService)],y)},9806:(E,i)=>{function a(h,d,l){const f=l.getBoundingClientRect(),S=h.getComputedStyle(l),y=parseInt(S.getPropertyValue("padding-left")),v=parseInt(S.getPropertyValue("padding-top"));return[d.clientX-f.left-y,d.clientY-f.top-v]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=a,i.getCoords=function(h,d,l,f,S,y,v,t,r){if(!y)return;const s=a(h,d,l);return s?(s[0]=Math.ceil((s[0]+(r?v/2:0))/v),s[1]=Math.ceil(s[1]/t),s[0]=Math.min(Math.max(s[0],1),f+(r?1:0)),s[1]=Math.min(Math.max(s[1],1),S),s):void 0}},9504:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const h=a(2584);function d(t,r,s,o){const u=t-l(t,s),_=r-l(r,s),g=Math.abs(u-_)-function(C,c,b){let R=0;const T=C-l(C,b),A=c-l(c,b);for(let M=0;M<Math.abs(T-A);M++){const F=f(C,c)==="A"?-1:1,$=b.buffer.lines.get(T+F*M);$!=null&&$.isWrapped&&R++}return R}(t,r,s);return v(g,y(f(t,r),o))}function l(t,r){let s=0,o=r.buffer.lines.get(t),u=o==null?void 0:o.isWrapped;for(;u&&t>=0&&t<r.rows;)s++,o=r.buffer.lines.get(--t),u=o==null?void 0:o.isWrapped;return s}function f(t,r){return t>r?"A":"B"}function S(t,r,s,o,u,_){let g=t,C=r,c="";for(;g!==s||C!==o;)g+=u?1:-1,u&&g>_.cols-1?(c+=_.buffer.translateBufferLineToString(C,!1,t,g),g=0,t=0,C++):!u&&g<0&&(c+=_.buffer.translateBufferLineToString(C,!1,0,t+1),g=_.cols-1,t=g,C--);return c+_.buffer.translateBufferLineToString(C,!1,t,g)}function y(t,r){const s=r?"O":"[";return h.C0.ESC+s+t}function v(t,r){t=Math.floor(t);let s="";for(let o=0;o<t;o++)s+=r;return s}i.moveToCellSequence=function(t,r,s,o){const u=s.buffer.x,_=s.buffer.y;if(!s.buffer.hasScrollback)return function(c,b,R,T,A,M){return d(b,T,A,M).length===0?"":v(S(c,b,c,b-l(b,A),!1,A).length,y("D",M))}(u,_,0,r,s,o)+d(_,r,s,o)+function(c,b,R,T,A,M){let F;F=d(b,T,A,M).length>0?T-l(T,A):b;const $=T,j=function(N,L,B,O,P,V){let ee;return ee=d(B,O,P,V).length>0?O-l(O,P):L,N<B&&ee<=O||N>=B&&ee<O?"C":"D"}(c,b,R,T,A,M);return v(S(c,F,R,$,j==="C",A).length,y(j,M))}(u,_,t,r,s,o);let g;if(_===r)return g=u>t?"D":"C",v(Math.abs(u-t),y(g,o));g=_>r?"D":"C";const C=Math.abs(_-r);return v(function(c,b){return b.cols-c}(_>r?t:u,s)+(C-1)*s.cols+1+((_>r?u:t)-1),y(g,o))}},1296:function(E,i,a){var h=this&&this.__decorate||function(A,M,F,$){var j,N=arguments.length,L=N<3?M:$===null?$=Object.getOwnPropertyDescriptor(M,F):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(A,M,F,$);else for(var B=A.length-1;B>=0;B--)(j=A[B])&&(L=(N<3?j(L):N>3?j(M,F,L):j(M,F))||L);return N>3&&L&&Object.defineProperty(M,F,L),L},d=this&&this.__param||function(A,M){return function(F,$){M(F,$,A)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const l=a(3787),f=a(2550),S=a(2223),y=a(6171),v=a(4725),t=a(8055),r=a(8460),s=a(844),o=a(2585),u="xterm-dom-renderer-owner-",_="xterm-rows",g="xterm-fg-",C="xterm-bg-",c="xterm-focus",b="xterm-selection";let R=1,T=i.DomRenderer=class extends s.Disposable{constructor(A,M,F,$,j,N,L,B,O,P){super(),this._element=A,this._screenElement=M,this._viewportElement=F,this._linkifier2=$,this._charSizeService=N,this._optionsService=L,this._bufferService=B,this._coreBrowserService=O,this._themeService=P,this._terminalClass=R++,this._rowElements=[],this.onRequestRedraw=this.register(new r.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(V=>this._injectCss(V))),this._injectCss(this._themeService.colors),this._rowFactory=j.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(u+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(V=>this._handleLinkHover(V))),this.register(this._linkifier2.onHideLinkUnderline(V=>this._handleLinkLeave(V))),this.register((0,s.toDisposable)(()=>{this._element.classList.remove(u+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new f.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const F of this._rowElements)F.style.width=`${this.dimensions.css.canvas.width}px`,F.style.height=`${this.dimensions.css.cell.height}px`,F.style.lineHeight=`${this.dimensions.css.cell.height}px`,F.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const M=`${this._terminalSelector} .${_} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${_} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${_} .xterm-dim { color: ${t.color.multiplyOpacity(A.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,M+=`${this._terminalSelector} .${_}.${c} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_}.${c} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[F,$]of A.ansi.entries())M+=`${this._terminalSelector} .${g}${F} { color: ${$.css}; }${this._terminalSelector} .${g}${F}.xterm-dim { color: ${t.color.multiplyOpacity($,.5).css}; }${this._terminalSelector} .${C}${F} { background-color: ${$.css}; }`;M+=`${this._terminalSelector} .${g}${S.INVERTED_DEFAULT_COLOR} { color: ${t.color.opaque(A.background).css}; }${this._terminalSelector} .${g}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${t.color.multiplyOpacity(t.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${C}${S.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,M){for(let F=this._rowElements.length;F<=M;F++){const $=document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,M){this._refreshRowElements(A,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(c)}handleFocus(){this._rowContainer.classList.add(c),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,M,F){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,M,F),this.renderRows(0,this._bufferService.rows-1),!A||!M)return;const $=A[1]-this._bufferService.buffer.ydisp,j=M[1]-this._bufferService.buffer.ydisp,N=Math.max($,0),L=Math.min(j,this._bufferService.rows-1);if(N>=this._bufferService.rows||L<0)return;const B=document.createDocumentFragment();if(F){const O=A[0]>M[0];B.appendChild(this._createSelectionElement(N,O?M[0]:A[0],O?A[0]:M[0],L-N+1))}else{const O=$===N?A[0]:0,P=N===j?M[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(N,O,P));const V=L-N-1;if(B.appendChild(this._createSelectionElement(N+1,0,this._bufferService.cols,V)),N!==L){const ee=j===L?M[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(L,0,ee))}}this._selectionContainer.appendChild(B)}_createSelectionElement(A,M,F,$=1){const j=document.createElement("div");return j.style.height=$*this.dimensions.css.cell.height+"px",j.style.top=A*this.dimensions.css.cell.height+"px",j.style.left=M*this.dimensions.css.cell.width+"px",j.style.width=this.dimensions.css.cell.width*(F-M)+"px",j}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,M){const F=this._bufferService.buffer,$=F.ybase+F.y,j=Math.min(F.x,this._bufferService.cols-1),N=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let O=A;O<=M;O++){const P=O+F.ydisp,V=this._rowElements[O],ee=F.lines.get(P);if(!V||!ee)break;V.replaceChildren(...this._rowFactory.createRow(ee,P,P===$,L,B,j,N,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${u}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,M,F,$,j,N){F<0&&(A=0),$<0&&(M=0);const L=this._bufferService.rows-1;F=Math.max(Math.min(F,L),0),$=Math.max(Math.min($,L),0),j=Math.min(j,this._bufferService.cols);const B=this._bufferService.buffer,O=B.ybase+B.y,P=Math.min(B.x,j-1),V=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,ne=this._optionsService.rawOptions.cursorInactiveStyle;for(let se=F;se<=$;++se){const de=se+B.ydisp,k=this._rowElements[se],H=B.lines.get(de);if(!k||!H)break;k.replaceChildren(...this._rowFactory.createRow(H,de,de===O,ee,ne,P,V,this.dimensions.css.cell.width,this._widthCache,N?se===F?A:0:-1,N?(se===$?M:j)-1:-1))}}};i.DomRenderer=T=h([d(4,o.IInstantiationService),d(5,v.ICharSizeService),d(6,o.IOptionsService),d(7,o.IBufferService),d(8,v.ICoreBrowserService),d(9,v.IThemeService)],T)},3787:function(E,i,a){var h=this&&this.__decorate||function(g,C,c,b){var R,T=arguments.length,A=T<3?C:b===null?b=Object.getOwnPropertyDescriptor(C,c):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(g,C,c,b);else for(var M=g.length-1;M>=0;M--)(R=g[M])&&(A=(T<3?R(A):T>3?R(C,c,A):R(C,c))||A);return T>3&&A&&Object.defineProperty(C,c,A),A},d=this&&this.__param||function(g,C){return function(c,b){C(c,b,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const l=a(2223),f=a(643),S=a(511),y=a(2585),v=a(8055),t=a(4725),r=a(4269),s=a(6171),o=a(3734);let u=i.DomRendererRowFactory=class{constructor(g,C,c,b,R,T,A){this._document=g,this._characterJoinerService=C,this._optionsService=c,this._coreBrowserService=b,this._coreService=R,this._decorationService=T,this._themeService=A,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(g,C,c){this._selectionStart=g,this._selectionEnd=C,this._columnSelectMode=c}createRow(g,C,c,b,R,T,A,M,F,$,j){const N=[],L=this._characterJoinerService.getJoinedCharacters(C),B=this._themeService.colors;let O,P=g.getNoBgTrimmedLength();c&&P<T+1&&(P=T+1);let V=0,ee="",ne=0,se=0,de=0,k=!1,H=0,K=!1,z=0;const ae=[],te=$!==-1&&j!==-1;for(let D=0;D<P;D++){g.loadCell(D,this._workCell);let I=this._workCell.getWidth();if(I===0)continue;let U=!1,q=D,W=this._workCell;if(L.length>0&&D===L[0][0]){U=!0;const pe=L.shift();W=new r.JoinedCellData(this._workCell,g.translateToString(!0,pe[0],pe[1]),pe[1]-pe[0]),q=pe[1]-1,I=W.getWidth()}const X=this._isCellInSelection(D,C),Q=c&&D===T,J=te&&D>=$&&D<=j;let Y=!1;this._decorationService.forEachDecorationAtCell(D,C,void 0,pe=>{Y=!0});let G=W.getChars()||f.WHITESPACE_CELL_CHAR;if(G===" "&&(W.isUnderline()||W.isOverline())&&(G=""),z=I*M-F.get(G,W.isBold(),W.isItalic()),O){if(V&&(X&&K||!X&&!K&&W.bg===ne)&&(X&&K&&B.selectionForeground||W.fg===se)&&W.extended.ext===de&&J===k&&z===H&&!Q&&!U&&!Y){ee+=G,V++;continue}V&&(O.textContent=ee),O=this._document.createElement("span"),V=0,ee=""}else O=this._document.createElement("span");if(ne=W.bg,se=W.fg,de=W.extended.ext,k=J,H=z,K=X,U&&T>=D&&T<=q&&(T=D),!this._coreService.isCursorHidden&&Q){if(ae.push("xterm-cursor"),this._coreBrowserService.isFocused)A&&ae.push("xterm-cursor-blink"),ae.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":ae.push("xterm-cursor-outline");break;case"block":ae.push("xterm-cursor-block");break;case"bar":ae.push("xterm-cursor-bar");break;case"underline":ae.push("xterm-cursor-underline")}}if(W.isBold()&&ae.push("xterm-bold"),W.isItalic()&&ae.push("xterm-italic"),W.isDim()&&ae.push("xterm-dim"),ee=W.isInvisible()?f.WHITESPACE_CELL_CHAR:W.getChars()||f.WHITESPACE_CELL_CHAR,W.isUnderline()&&(ae.push(`xterm-underline-${W.extended.underlineStyle}`),ee===" "&&(ee=""),!W.isUnderlineColorDefault()))if(W.isUnderlineColorRGB())O.style.textDecorationColor=`rgb(${o.AttributeData.toColorRGB(W.getUnderlineColor()).join(",")})`;else{let pe=W.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&W.isBold()&&pe<8&&(pe+=8),O.style.textDecorationColor=B.ansi[pe].css}W.isOverline()&&(ae.push("xterm-overline"),ee===" "&&(ee="")),W.isStrikethrough()&&ae.push("xterm-strikethrough"),J&&(O.style.textDecoration="underline");let Z=W.getFgColor(),re=W.getFgColorMode(),ie=W.getBgColor(),oe=W.getBgColorMode();const le=!!W.isInverse();if(le){const pe=Z;Z=ie,ie=pe;const xt=re;re=oe,oe=xt}let ue,ve,ge,Ce=!1;switch(this._decorationService.forEachDecorationAtCell(D,C,void 0,pe=>{pe.options.layer!=="top"&&Ce||(pe.backgroundColorRGB&&(oe=50331648,ie=pe.backgroundColorRGB.rgba>>8&16777215,ue=pe.backgroundColorRGB),pe.foregroundColorRGB&&(re=50331648,Z=pe.foregroundColorRGB.rgba>>8&16777215,ve=pe.foregroundColorRGB),Ce=pe.options.layer==="top")}),!Ce&&X&&(ue=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,ie=ue.rgba>>8&16777215,oe=50331648,Ce=!0,B.selectionForeground&&(re=50331648,Z=B.selectionForeground.rgba>>8&16777215,ve=B.selectionForeground)),Ce&&ae.push("xterm-decoration-top"),oe){case 16777216:case 33554432:ge=B.ansi[ie],ae.push(`xterm-bg-${ie}`);break;case 50331648:ge=v.rgba.toColor(ie>>16,ie>>8&255,255&ie),this._addStyle(O,`background-color:#${_((ie>>>0).toString(16),"0",6)}`);break;default:le?(ge=B.foreground,ae.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):ge=B.background}switch(ue||W.isDim()&&(ue=v.color.multiplyOpacity(ge,.5)),re){case 16777216:case 33554432:W.isBold()&&Z<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Z+=8),this._applyMinimumContrast(O,ge,B.ansi[Z],W,ue,void 0)||ae.push(`xterm-fg-${Z}`);break;case 50331648:const pe=v.rgba.toColor(Z>>16&255,Z>>8&255,255&Z);this._applyMinimumContrast(O,ge,pe,W,ue,ve)||this._addStyle(O,`color:#${_(Z.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(O,ge,B.foreground,W,ue,void 0)||le&&ae.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}ae.length&&(O.className=ae.join(" "),ae.length=0),Q||U||Y?O.textContent=ee:V++,z!==this.defaultSpacing&&(O.style.letterSpacing=`${z}px`),N.push(O),D=q}return O&&V&&(O.textContent=ee),N}_applyMinimumContrast(g,C,c,b,R,T){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,s.excludeFromContrastRatioDemands)(b.getCode()))return!1;const A=this._getContrastCache(b);let M;if(R||T||(M=A.getColor(C.rgba,c.rgba)),M===void 0){const F=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=v.color.ensureContrastRatio(R||C,T||c,F),A.setColor((R||C).rgba,(T||c).rgba,M??null)}return!!M&&(this._addStyle(g,`color:${M.css}`),!0)}_getContrastCache(g){return g.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(g,C){g.setAttribute("style",`${g.getAttribute("style")||""}${C};`)}_isCellInSelection(g,C){const c=this._selectionStart,b=this._selectionEnd;return!(!c||!b)&&(this._columnSelectMode?c[0]<=b[0]?g>=c[0]&&C>=c[1]&&g<b[0]&&C<=b[1]:g<c[0]&&C>=c[1]&&g>=b[0]&&C<=b[1]:C>c[1]&&C<b[1]||c[1]===b[1]&&C===c[1]&&g>=c[0]&&g<b[0]||c[1]<b[1]&&C===b[1]&&g<b[0]||c[1]<b[1]&&C===c[1]&&g>=c[0])}};function _(g,C,c){for(;g.length<c;)g=C+g;return g}i.DomRendererRowFactory=u=h([d(1,t.ICharacterJoinerService),d(2,y.IOptionsService),d(3,t.ICoreBrowserService),d(4,y.ICoreService),d(5,y.IDecorationService),d(6,t.IThemeService)],u)},2550:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const h=a.createElement("span"),d=a.createElement("span");d.style.fontWeight="bold";const l=a.createElement("span");l.style.fontStyle="italic";const f=a.createElement("span");f.style.fontWeight="bold",f.style.fontStyle="italic",this._measureElements=[h,d,l,f],this._container.appendChild(h),this._container.appendChild(d),this._container.appendChild(l),this._container.appendChild(f),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,h,d,l){a===this._font&&h===this._fontSize&&d===this._weight&&l===this._weightBold||(this._font=a,this._fontSize=h,this._weight=d,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${d}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${d}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(a,h,d){let l=0;if(!h&&!d&&a.length===1&&(l=a.charCodeAt(0))<256)return this._flat[l]!==-9999?this._flat[l]:this._flat[l]=this._measure(a,0);let f=a;h&&(f+="B"),d&&(f+="I");let S=this._holey.get(f);if(S===void 0){let y=0;h&&(y|=1),d&&(y|=2),S=this._measure(a,y),this._holey.set(f,S)}return S}_measure(a,h){const d=this._measureElements[h];return d.textContent=a.repeat(32),d.offsetWidth/32}}},2223:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const h=a(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(E,i)=>{function a(h){return 57508<=h&&h<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},i.isPowerlineGlyph=a,i.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},i.excludeFromContrastRatioDemands=function(h){return a(h)||function(d){return 9472<=d&&d<=9631}(h)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,h=this.selectionEnd;return!(!a||!h)&&(a[1]>h[1]||a[1]===h[1]&&a[0]>h[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(E,i,a){var h=this&&this.__decorate||function(t,r,s,o){var u,_=arguments.length,g=_<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,s,o);else for(var C=t.length-1;C>=0;C--)(u=t[C])&&(g=(_<3?u(g):_>3?u(r,s,g):u(r,s))||g);return _>3&&g&&Object.defineProperty(r,s,g),g},d=this&&this.__param||function(t,r){return function(s,o){r(s,o,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const l=a(2585),f=a(8460),S=a(844);let y=i.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(t,r,s){super(),this._optionsService=s,this.width=0,this.height=0,this._onCharSizeChange=this.register(new f.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new v(t,r,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};i.CharSizeService=y=h([d(2,l.IOptionsService)],y);class v{constructor(r,s,o){this._document=r,this._parentElement=s,this._optionsService=o,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const r={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return r.width!==0&&r.height!==0&&(this._result.width=r.width/32,this._result.height=Math.ceil(r.height)),this._result}}},4269:function(E,i,a){var h=this&&this.__decorate||function(r,s,o,u){var _,g=arguments.length,C=g<3?s:u===null?u=Object.getOwnPropertyDescriptor(s,o):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(r,s,o,u);else for(var c=r.length-1;c>=0;c--)(_=r[c])&&(C=(g<3?_(C):g>3?_(s,o,C):_(s,o))||C);return g>3&&C&&Object.defineProperty(s,o,C),C},d=this&&this.__param||function(r,s){return function(o,u){s(o,u,r)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const l=a(3734),f=a(643),S=a(511),y=a(2585);class v extends l.AttributeData{constructor(s,o,u){super(),this.content=0,this.combinedData="",this.fg=s.fg,this.bg=s.bg,this.combinedData=o,this._width=u}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(s){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=v;let t=i.CharacterJoinerService=class pr{constructor(s){this._bufferService=s,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(s){const o={id:this._nextCharacterJoinerId++,handler:s};return this._characterJoiners.push(o),o.id}deregister(s){for(let o=0;o<this._characterJoiners.length;o++)if(this._characterJoiners[o].id===s)return this._characterJoiners.splice(o,1),!0;return!1}getJoinedCharacters(s){if(this._characterJoiners.length===0)return[];const o=this._bufferService.buffer.lines.get(s);if(!o||o.length===0)return[];const u=[],_=o.translateToString(!0);let g=0,C=0,c=0,b=o.getFg(0),R=o.getBg(0);for(let T=0;T<o.getTrimmedLength();T++)if(o.loadCell(T,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==R){if(T-g>1){const A=this._getJoinedRanges(_,c,C,o,g);for(let M=0;M<A.length;M++)u.push(A[M])}g=T,c=C,b=this._workCell.fg,R=this._workCell.bg}C+=this._workCell.getChars().length||f.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-g>1){const T=this._getJoinedRanges(_,c,C,o,g);for(let A=0;A<T.length;A++)u.push(T[A])}return u}_getJoinedRanges(s,o,u,_,g){const C=s.substring(o,u);let c=[];try{c=this._characterJoiners[0].handler(C)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const R=this._characterJoiners[b].handler(C);for(let T=0;T<R.length;T++)pr._mergeRanges(c,R[T])}catch(R){console.error(R)}return this._stringRangesToCellRanges(c,_,g),c}_stringRangesToCellRanges(s,o,u){let _=0,g=!1,C=0,c=s[_];if(c){for(let b=u;b<this._bufferService.cols;b++){const R=o.getWidth(b),T=o.getString(b).length||f.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!g&&c[0]<=C&&(c[0]=b,g=!0),c[1]<=C){if(c[1]=b,c=s[++_],!c)break;c[0]<=C?(c[0]=b,g=!0):g=!1}C+=T}}c&&(c[1]=this._bufferService.cols)}}static _mergeRanges(s,o){let u=!1;for(let _=0;_<s.length;_++){const g=s[_];if(u){if(o[1]<=g[0])return s[_-1][1]=o[1],s;if(o[1]<=g[1])return s[_-1][1]=Math.max(o[1],g[1]),s.splice(_,1),s;s.splice(_,1),_--}else{if(o[1]<=g[0])return s.splice(_,0,o),s;if(o[1]<=g[1])return g[0]=Math.min(o[0],g[0]),s;o[0]<g[1]&&(g[0]=Math.min(o[0],g[0]),u=!0)}}return u?s[s.length-1][1]=o[1]:s.push(o),s}};i.CharacterJoinerService=t=h([d(0,y.IBufferService)],t)},5114:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(a,h){this._textarea=a,this.window=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(E,i,a){var h=this&&this.__decorate||function(y,v,t,r){var s,o=arguments.length,u=o<3?v:r===null?r=Object.getOwnPropertyDescriptor(v,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(y,v,t,r);else for(var _=y.length-1;_>=0;_--)(s=y[_])&&(u=(o<3?s(u):o>3?s(v,t,u):s(v,t))||u);return o>3&&u&&Object.defineProperty(v,t,u),u},d=this&&this.__param||function(y,v){return function(t,r){v(t,r,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const l=a(4725),f=a(9806);let S=i.MouseService=class{constructor(y,v){this._renderService=y,this._charSizeService=v}getCoords(y,v,t,r,s){return(0,f.getCoords)(window,y,v,t,r,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(y,v){const t=(0,f.getCoordsRelativeToElement)(window,y,v);if(this._charSizeService.hasValidSize)return t[0]=Math.min(Math.max(t[0],0),this._renderService.dimensions.css.canvas.width-1),t[1]=Math.min(Math.max(t[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};i.MouseService=S=h([d(0,l.IRenderService),d(1,l.ICharSizeService)],S)},3230:function(E,i,a){var h=this&&this.__decorate||function(u,_,g,C){var c,b=arguments.length,R=b<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(u,_,g,C);else for(var T=u.length-1;T>=0;T--)(c=u[T])&&(R=(b<3?c(R):b>3?c(_,g,R):c(_,g))||R);return b>3&&R&&Object.defineProperty(_,g,R),R},d=this&&this.__param||function(u,_){return function(g,C){_(g,C,u)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const l=a(3656),f=a(6193),S=a(5596),y=a(4725),v=a(8460),t=a(844),r=a(7226),s=a(2585);let o=i.RenderService=class extends t.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(u,_,g,C,c,b,R,T){if(super(),this._rowCount=u,this._charSizeService=C,this._renderer=this.register(new t.MutableDisposable),this._pausedResizeTask=new r.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new f.RenderDebouncer(R.window,(A,M)=>this._renderRows(A,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new S.ScreenDprMonitor(R.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var A;return(A=this._renderer.value)===null||A===void 0?void 0:A.clear()})),this.register(g.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(c.onDecorationRegistered(()=>this._fullRefresh())),this.register(c.onDecorationRemoved(()=>this._fullRefresh())),this.register(g.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(g.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,l.addDisposableDomListener)(R.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(T.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in R.window){const A=new R.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});A.observe(_),this.register({dispose:()=>A.disconnect()})}}_handleIntersectionChange(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(u,_,g=!1){this._isPaused?this._needsFullRefresh=!0:(g||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,_,this._rowCount))}_renderRows(u,_){this._renderer.value&&(u=Math.min(u,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(u,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:u,end:_}),this._onRender.fire({start:u,end:_}),this._isNextRenderRedrawOnly=!0)}resize(u,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(u){this._renderer.value=u,this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(u){return this._renderDebouncer.addRefreshCallback(u)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var u,_;this._renderer.value&&((_=(u=this._renderer.value).clearTextureAtlas)===null||_===void 0||_.call(u),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(u,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(u,_)):this._renderer.value.handleResize(u,_),this._fullRefresh())}handleCharSizeChanged(){var u;(u=this._renderer.value)===null||u===void 0||u.handleCharSizeChanged()}handleBlur(){var u;(u=this._renderer.value)===null||u===void 0||u.handleBlur()}handleFocus(){var u;(u=this._renderer.value)===null||u===void 0||u.handleFocus()}handleSelectionChanged(u,_,g){var C;this._selectionState.start=u,this._selectionState.end=_,this._selectionState.columnSelectMode=g,(C=this._renderer.value)===null||C===void 0||C.handleSelectionChanged(u,_,g)}handleCursorMove(){var u;(u=this._renderer.value)===null||u===void 0||u.handleCursorMove()}clear(){var u;(u=this._renderer.value)===null||u===void 0||u.clear()}};i.RenderService=o=h([d(2,s.IOptionsService),d(3,y.ICharSizeService),d(4,s.IDecorationService),d(5,s.IBufferService),d(6,y.ICoreBrowserService),d(7,y.IThemeService)],o)},9312:function(E,i,a){var h=this&&this.__decorate||function(c,b,R,T){var A,M=arguments.length,F=M<3?b:T===null?T=Object.getOwnPropertyDescriptor(b,R):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(c,b,R,T);else for(var $=c.length-1;$>=0;$--)(A=c[$])&&(F=(M<3?A(F):M>3?A(b,R,F):A(b,R))||F);return M>3&&F&&Object.defineProperty(b,R,F),F},d=this&&this.__param||function(c,b){return function(R,T){b(R,T,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const l=a(9806),f=a(9504),S=a(456),y=a(4725),v=a(8460),t=a(844),r=a(6114),s=a(4841),o=a(511),u=a(2585),_="",g=new RegExp(_,"g");let C=i.SelectionService=class extends t.Disposable{constructor(c,b,R,T,A,M,F,$,j){super(),this._element=c,this._screenElement=b,this._linkifier=R,this._bufferService=T,this._coreService=A,this._mouseService=M,this._optionsService=F,this._renderService=$,this._coreBrowserService=j,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new o.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=N=>this._handleMouseMove(N),this._mouseUpListener=N=>this._handleMouseUp(N),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(N=>this._handleTrim(N)),this.register(this._bufferService.buffers.onBufferActivate(N=>this._handleBufferActivate(N))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,t.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const c=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!c||!b||c[0]===b[0]&&c[1]===b[1])}get selectionText(){const c=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!c||!b)return"";const R=this._bufferService.buffer,T=[];if(this._activeSelectionMode===3){if(c[0]===b[0])return"";const A=c[0]<b[0]?c[0]:b[0],M=c[0]<b[0]?b[0]:c[0];for(let F=c[1];F<=b[1];F++){const $=R.translateBufferLineToString(F,!0,A,M);T.push($)}}else{const A=c[1]===b[1]?b[0]:void 0;T.push(R.translateBufferLineToString(c[1],!0,c[0],A));for(let M=c[1]+1;M<=b[1]-1;M++){const F=R.lines.get(M),$=R.translateBufferLineToString(M,!0);F!=null&&F.isWrapped?T[T.length-1]+=$:T.push($)}if(c[1]!==b[1]){const M=R.lines.get(b[1]),F=R.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?T[T.length-1]+=F:T.push(F)}}return T.map(A=>A.replace(g," ")).join(r.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(c){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),r.isLinux&&c&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(c){const b=this._getMouseBufferCoords(c),R=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!!(R&&T&&b)&&this._areCoordsInSelection(b,R,T)}isCellInSelection(c,b){const R=this._model.finalSelectionStart,T=this._model.finalSelectionEnd;return!(!R||!T)&&this._areCoordsInSelection([c,b],R,T)}_areCoordsInSelection(c,b,R){return c[1]>b[1]&&c[1]<R[1]||b[1]===R[1]&&c[1]===b[1]&&c[0]>=b[0]&&c[0]<R[0]||b[1]<R[1]&&c[1]===R[1]&&c[0]<R[0]||b[1]<R[1]&&c[1]===b[1]&&c[0]>=b[0]}_selectWordAtCursor(c,b){var R,T;const A=(T=(R=this._linkifier.currentLink)===null||R===void 0?void 0:R.link)===null||T===void 0?void 0:T.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(c);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(c,b){this._model.clearSelection(),c=Math.max(c,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,c],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(c){this._model.handleTrim(c)&&this.refresh()}_getMouseBufferCoords(c){const b=this._mouseService.getCoords(c,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(c){let b=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,c,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=R?0:(b>R&&(b-=R),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(c){return r.isMac?c.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:c.shiftKey}handleMouseDown(c){if(this._mouseDownTimeStamp=c.timeStamp,(c.button!==2||!this.hasSelection)&&c.button===0){if(!this._enabled){if(!this.shouldForceSelection(c))return;c.stopPropagation()}c.preventDefault(),this._dragScrollAmount=0,this._enabled&&c.shiftKey?this._handleIncrementalClick(c):c.detail===1?this._handleSingleClick(c):c.detail===2?this._handleDoubleClick(c):c.detail===3&&this._handleTripleClick(c),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(c){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(c))}_handleSingleClick(c){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(c)?3:0,this._model.selectionStart=this._getMouseBufferCoords(c),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(c){this._selectWordAtCursor(c,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(c){const b=this._getMouseBufferCoords(c);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(c){return c.altKey&&!(r.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(c){if(c.stopImmediatePropagation(),!this._model.selectionStart)return;const b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(c),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(c),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const T=R.lines.get(this._model.selectionEnd[1]);T&&T.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const c=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(c.ydisp+this._bufferService.rows,c.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=c.ydisp),this.refresh()}}_handleMouseUp(c){const b=c.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&c.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(c,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const T=(0,f.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(T,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const c=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,R=!(!c||!b||c[0]===b[0]&&c[1]===b[1]);R?c&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&c[0]===this._oldSelectionStart[0]&&c[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(c,b,R)):this._oldHasSelection&&this._fireOnSelectionChange(c,b,R)}_fireOnSelectionChange(c,b,R){this._oldSelectionStart=c,this._oldSelectionEnd=b,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(c){this.clearSelection(),this._trimListener.dispose(),this._trimListener=c.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(c,b){let R=b;for(let T=0;b>=T;T++){const A=c.loadCell(T,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:A>1&&b!==T&&(R+=A-1)}return R}setSelection(c,b,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[c,b],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(c){this._isClickInSelection(c)||(this._selectWordAtCursor(c,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(c,b,R=!0,T=!0){if(c[0]>=this._bufferService.cols)return;const A=this._bufferService.buffer,M=A.lines.get(c[1]);if(!M)return;const F=A.translateBufferLineToString(c[1],!1);let $=this._convertViewportColToCharacterIndex(M,c[0]),j=$;const N=c[0]-$;let L=0,B=0,O=0,P=0;if(F.charAt($)===" "){for(;$>0&&F.charAt($-1)===" ";)$--;for(;j<F.length&&F.charAt(j+1)===" ";)j++}else{let ne=c[0],se=c[0];M.getWidth(ne)===0&&(L++,ne--),M.getWidth(se)===2&&(B++,se++);const de=M.getString(se).length;for(de>1&&(P+=de-1,j+=de-1);ne>0&&$>0&&!this._isCharWordSeparator(M.loadCell(ne-1,this._workCell));){M.loadCell(ne-1,this._workCell);const k=this._workCell.getChars().length;this._workCell.getWidth()===0?(L++,ne--):k>1&&(O+=k-1,$-=k-1),$--,ne--}for(;se<M.length&&j+1<F.length&&!this._isCharWordSeparator(M.loadCell(se+1,this._workCell));){M.loadCell(se+1,this._workCell);const k=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,se++):k>1&&(P+=k-1,j+=k-1),j++,se++}}j++;let V=$+N-L+O,ee=Math.min(this._bufferService.cols,j-$+L+B-O-P);if(b||F.slice($,j).trim()!==""){if(R&&V===0&&M.getCodePoint(0)!==32){const ne=A.lines.get(c[1]-1);if(ne&&M.isWrapped&&ne.getCodePoint(this._bufferService.cols-1)!==32){const se=this._getWordAt([this._bufferService.cols-1,c[1]-1],!1,!0,!1);if(se){const de=this._bufferService.cols-se.start;V-=de,ee+=de}}}if(T&&V+ee===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){const ne=A.lines.get(c[1]+1);if(ne!=null&&ne.isWrapped&&ne.getCodePoint(0)!==32){const se=this._getWordAt([0,c[1]+1],!1,!1,!0);se&&(ee+=se.length)}}return{start:V,length:ee}}}_selectWordAt(c,b){const R=this._getWordAt(c,b);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,c[1]--;this._model.selectionStart=[R.start,c[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(c){const b=this._getWordAt(c,!0);if(b){let R=c[1];for(;b.start<0;)b.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,R]}}_isCharWordSeparator(c){return c.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(c.getChars())>=0}_selectLineAt(c){const b=this._bufferService.buffer.getWrappedRangeForLine(c),R={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,s.getRangeLength)(R,this._bufferService.cols)}};i.SelectionService=C=h([d(3,u.IBufferService),d(4,u.ICoreService),d(5,y.IMouseService),d(6,u.IOptionsService),d(7,y.IRenderService),d(8,y.ICoreBrowserService)],C)},4725:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const h=a(8343);i.ICharSizeService=(0,h.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),i.IMouseService=(0,h.createDecorator)("MouseService"),i.IRenderService=(0,h.createDecorator)("RenderService"),i.ISelectionService=(0,h.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,h.createDecorator)("ThemeService")},6731:function(E,i,a){var h=this&&this.__decorate||function(C,c,b,R){var T,A=arguments.length,M=A<3?c:R===null?R=Object.getOwnPropertyDescriptor(c,b):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(C,c,b,R);else for(var F=C.length-1;F>=0;F--)(T=C[F])&&(M=(A<3?T(M):A>3?T(c,b,M):T(c,b))||M);return A>3&&M&&Object.defineProperty(c,b,M),M},d=this&&this.__param||function(C,c){return function(b,R){c(b,R,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const l=a(7239),f=a(8055),S=a(8460),y=a(844),v=a(2585),t=f.css.toColor("#ffffff"),r=f.css.toColor("#000000"),s=f.css.toColor("#ffffff"),o=f.css.toColor("#000000"),u={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const C=[f.css.toColor("#2e3436"),f.css.toColor("#cc0000"),f.css.toColor("#4e9a06"),f.css.toColor("#c4a000"),f.css.toColor("#3465a4"),f.css.toColor("#75507b"),f.css.toColor("#06989a"),f.css.toColor("#d3d7cf"),f.css.toColor("#555753"),f.css.toColor("#ef2929"),f.css.toColor("#8ae234"),f.css.toColor("#fce94f"),f.css.toColor("#729fcf"),f.css.toColor("#ad7fa8"),f.css.toColor("#34e2e2"),f.css.toColor("#eeeeec")],c=[0,95,135,175,215,255];for(let b=0;b<216;b++){const R=c[b/36%6|0],T=c[b/6%6|0],A=c[b%6];C.push({css:f.channels.toCss(R,T,A),rgba:f.channels.toRgba(R,T,A)})}for(let b=0;b<24;b++){const R=8+10*b;C.push({css:f.channels.toCss(R,R,R),rgba:f.channels.toRgba(R,R,R)})}return C})());let _=i.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(C){super(),this._optionsService=C,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:t,background:r,cursor:s,cursorAccent:o,selectionForeground:void 0,selectionBackgroundTransparent:u,selectionBackgroundOpaque:f.color.blend(r,u),selectionInactiveBackgroundTransparent:u,selectionInactiveBackgroundOpaque:f.color.blend(r,u),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(C={}){const c=this._colors;if(c.foreground=g(C.foreground,t),c.background=g(C.background,r),c.cursor=g(C.cursor,s),c.cursorAccent=g(C.cursorAccent,o),c.selectionBackgroundTransparent=g(C.selectionBackground,u),c.selectionBackgroundOpaque=f.color.blend(c.background,c.selectionBackgroundTransparent),c.selectionInactiveBackgroundTransparent=g(C.selectionInactiveBackground,c.selectionBackgroundTransparent),c.selectionInactiveBackgroundOpaque=f.color.blend(c.background,c.selectionInactiveBackgroundTransparent),c.selectionForeground=C.selectionForeground?g(C.selectionForeground,f.NULL_COLOR):void 0,c.selectionForeground===f.NULL_COLOR&&(c.selectionForeground=void 0),f.color.isOpaque(c.selectionBackgroundTransparent)&&(c.selectionBackgroundTransparent=f.color.opacity(c.selectionBackgroundTransparent,.3)),f.color.isOpaque(c.selectionInactiveBackgroundTransparent)&&(c.selectionInactiveBackgroundTransparent=f.color.opacity(c.selectionInactiveBackgroundTransparent,.3)),c.ansi=i.DEFAULT_ANSI_COLORS.slice(),c.ansi[0]=g(C.black,i.DEFAULT_ANSI_COLORS[0]),c.ansi[1]=g(C.red,i.DEFAULT_ANSI_COLORS[1]),c.ansi[2]=g(C.green,i.DEFAULT_ANSI_COLORS[2]),c.ansi[3]=g(C.yellow,i.DEFAULT_ANSI_COLORS[3]),c.ansi[4]=g(C.blue,i.DEFAULT_ANSI_COLORS[4]),c.ansi[5]=g(C.magenta,i.DEFAULT_ANSI_COLORS[5]),c.ansi[6]=g(C.cyan,i.DEFAULT_ANSI_COLORS[6]),c.ansi[7]=g(C.white,i.DEFAULT_ANSI_COLORS[7]),c.ansi[8]=g(C.brightBlack,i.DEFAULT_ANSI_COLORS[8]),c.ansi[9]=g(C.brightRed,i.DEFAULT_ANSI_COLORS[9]),c.ansi[10]=g(C.brightGreen,i.DEFAULT_ANSI_COLORS[10]),c.ansi[11]=g(C.brightYellow,i.DEFAULT_ANSI_COLORS[11]),c.ansi[12]=g(C.brightBlue,i.DEFAULT_ANSI_COLORS[12]),c.ansi[13]=g(C.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),c.ansi[14]=g(C.brightCyan,i.DEFAULT_ANSI_COLORS[14]),c.ansi[15]=g(C.brightWhite,i.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){const b=Math.min(c.ansi.length-16,C.extendedAnsi.length);for(let R=0;R<b;R++)c.ansi[R+16]=g(C.extendedAnsi[R],i.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let c=0;c<this._restoreColors.ansi.length;++c)this._colors.ansi[c]=this._restoreColors.ansi[c]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function g(C,c){if(C!==void 0)try{return f.css.toColor(C)}catch{}return c}i.ThemeService=_=h([d(0,v.IOptionsService)],_)},6349:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const h=a(8460),d=a(844);class l extends d.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const y=new Array(S);for(let v=0;v<Math.min(S,this.length);v++)y[v]=this._array[this._getCyclicIndex(v)];this._array=y,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let y=this._length;y<S;y++)this._array[y]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,y){this._array[this._getCyclicIndex(S)]=y}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,y,...v){if(y){for(let t=S;t<this._length-y;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+y)];this._length-=y,this.onDeleteEmitter.fire({index:S,amount:y})}for(let t=this._length-1;t>=S;t--)this._array[this._getCyclicIndex(t+v.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<v.length;t++)this._array[this._getCyclicIndex(S+t)]=v[t];if(v.length&&this.onInsertEmitter.fire({index:S,amount:v.length}),this._length+v.length>this._maxLength){const t=this._length+v.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=v.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,y,v){if(!(y<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let r=y-1;r>=0;r--)this.set(S+r+v,this.get(S+r));const t=S+y+v-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<y;t++)this.set(S+t+v,this.get(S+t))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}i.CircularList=l},1439:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function a(h,d=5){if(typeof h!="object")return h;const l=Array.isArray(h)?[]:{};for(const f in h)l[f]=d<=1?h[f]:h[f]&&a(h[f],d-1);return l}},8055:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const h=a(6114);let d=0,l=0,f=0,S=0;var y,v,t,r,s;function o(_){const g=_.toString(16);return g.length<2?"0"+g:g}function u(_,g){return _<g?(g+.05)/(_+.05):(_+.05)/(g+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(g,C,c,b){return b!==void 0?`#${o(g)}${o(C)}${o(c)}${o(b)}`:`#${o(g)}${o(C)}${o(c)}`},_.toRgba=function(g,C,c,b=255){return(g<<24|C<<16|c<<8|b)>>>0}}(y||(i.channels=y={})),function(_){function g(C,c){return S=Math.round(255*c),[d,l,f]=s.toChannels(C.rgba),{css:y.toCss(d,l,f,S),rgba:y.toRgba(d,l,f,S)}}_.blend=function(C,c){if(S=(255&c.rgba)/255,S===1)return{css:c.css,rgba:c.rgba};const b=c.rgba>>24&255,R=c.rgba>>16&255,T=c.rgba>>8&255,A=C.rgba>>24&255,M=C.rgba>>16&255,F=C.rgba>>8&255;return d=A+Math.round((b-A)*S),l=M+Math.round((R-M)*S),f=F+Math.round((T-F)*S),{css:y.toCss(d,l,f),rgba:y.toRgba(d,l,f)}},_.isOpaque=function(C){return(255&C.rgba)==255},_.ensureContrastRatio=function(C,c,b){const R=s.ensureContrastRatio(C.rgba,c.rgba,b);if(R)return s.toColor(R>>24&255,R>>16&255,R>>8&255)},_.opaque=function(C){const c=(255|C.rgba)>>>0;return[d,l,f]=s.toChannels(c),{css:y.toCss(d,l,f),rgba:c}},_.opacity=g,_.multiplyOpacity=function(C,c){return S=255&C.rgba,g(C,S*c/255)},_.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(v||(i.color=v={})),function(_){let g,C;if(!h.isNode){const c=document.createElement("canvas");c.width=1,c.height=1;const b=c.getContext("2d",{willReadFrequently:!0});b&&(g=b,g.globalCompositeOperation="copy",C=g.createLinearGradient(0,0,1,1))}_.toColor=function(c){if(c.match(/#[\da-f]{3,8}/i))switch(c.length){case 4:return d=parseInt(c.slice(1,2).repeat(2),16),l=parseInt(c.slice(2,3).repeat(2),16),f=parseInt(c.slice(3,4).repeat(2),16),s.toColor(d,l,f);case 5:return d=parseInt(c.slice(1,2).repeat(2),16),l=parseInt(c.slice(2,3).repeat(2),16),f=parseInt(c.slice(3,4).repeat(2),16),S=parseInt(c.slice(4,5).repeat(2),16),s.toColor(d,l,f,S);case 7:return{css:c,rgba:(parseInt(c.slice(1),16)<<8|255)>>>0};case 9:return{css:c,rgba:parseInt(c.slice(1),16)>>>0}}const b=c.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return d=parseInt(b[1]),l=parseInt(b[2]),f=parseInt(b[3]),S=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),s.toColor(d,l,f,S);if(!g||!C)throw new Error("css.toColor: Unsupported css format");if(g.fillStyle=C,g.fillStyle=c,typeof g.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(g.fillRect(0,0,1,1),[d,l,f,S]=g.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:y.toRgba(d,l,f,S),css:c}}}(t||(i.css=t={})),function(_){function g(C,c,b){const R=C/255,T=c/255,A=b/255;return .2126*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.7152*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}_.relativeLuminance=function(C){return g(C>>16&255,C>>8&255,255&C)},_.relativeLuminance2=g}(r||(i.rgb=r={})),function(_){function g(c,b,R){const T=c>>24&255,A=c>>16&255,M=c>>8&255;let F=b>>24&255,$=b>>16&255,j=b>>8&255,N=u(r.relativeLuminance2(F,$,j),r.relativeLuminance2(T,A,M));for(;N<R&&(F>0||$>0||j>0);)F-=Math.max(0,Math.ceil(.1*F)),$-=Math.max(0,Math.ceil(.1*$)),j-=Math.max(0,Math.ceil(.1*j)),N=u(r.relativeLuminance2(F,$,j),r.relativeLuminance2(T,A,M));return(F<<24|$<<16|j<<8|255)>>>0}function C(c,b,R){const T=c>>24&255,A=c>>16&255,M=c>>8&255;let F=b>>24&255,$=b>>16&255,j=b>>8&255,N=u(r.relativeLuminance2(F,$,j),r.relativeLuminance2(T,A,M));for(;N<R&&(F<255||$<255||j<255);)F=Math.min(255,F+Math.ceil(.1*(255-F))),$=Math.min(255,$+Math.ceil(.1*(255-$))),j=Math.min(255,j+Math.ceil(.1*(255-j))),N=u(r.relativeLuminance2(F,$,j),r.relativeLuminance2(T,A,M));return(F<<24|$<<16|j<<8|255)>>>0}_.ensureContrastRatio=function(c,b,R){const T=r.relativeLuminance(c>>8),A=r.relativeLuminance(b>>8);if(u(T,A)<R){if(A<T){const $=g(c,b,R),j=u(T,r.relativeLuminance($>>8));if(j<R){const N=C(c,b,R);return j>u(T,r.relativeLuminance(N>>8))?$:N}return $}const M=C(c,b,R),F=u(T,r.relativeLuminance(M>>8));if(F<R){const $=g(c,b,R);return F>u(T,r.relativeLuminance($>>8))?M:$}return M}},_.reduceLuminance=g,_.increaseLuminance=C,_.toChannels=function(c){return[c>>24&255,c>>16&255,c>>8&255,255&c]},_.toColor=function(c,b,R,T){return{css:y.toCss(c,b,R,T),rgba:y.toRgba(c,b,R,T)}}}(s||(i.rgba=s={})),i.toPaddedHex=o,i.contrastRatio=u},8969:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const h=a(844),d=a(2585),l=a(4348),f=a(7866),S=a(744),y=a(7302),v=a(6975),t=a(8460),r=a(1753),s=a(1480),o=a(7994),u=a(9282),_=a(5435),g=a(5981),C=a(2660);let c=!1;class b extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(T=>{var A;(A=this._onScrollApi)===null||A===void 0||A.fire(T.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(T){for(const A in T)this.optionsService.options[A]=T[A]}constructor(T){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new y.OptionsService(T)),this._instantiationService.setService(d.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(d.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(f.LogService)),this._instantiationService.setService(d.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(d.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(r.CoreMouseService)),this._instantiationService.setService(d.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(s.UnicodeService)),this._instantiationService.setService(d.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(o.CharsetService),this._instantiationService.setService(d.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(d.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new g.WriteBuffer((A,M)=>this._inputHandler.parse(A,M))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(T,A){this._writeBuffer.write(T,A)}writeSync(T,A){this._logService.logLevel<=d.LogLevelEnum.WARN&&!c&&(this._logService.warn("writeSync is unreliable and will be removed soon."),c=!0),this._writeBuffer.writeSync(T,A)}resize(T,A){isNaN(T)||isNaN(A)||(T=Math.max(T,S.MINIMUM_COLS),A=Math.max(A,S.MINIMUM_ROWS),this._bufferService.resize(T,A))}scroll(T,A=!1){this._bufferService.scroll(T,A)}scrollLines(T,A,M){this._bufferService.scrollLines(T,A,M)}scrollPages(T){this.scrollLines(T*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(T){const A=T-this._bufferService.buffer.ydisp;A!==0&&this.scrollLines(A)}registerEscHandler(T,A){return this._inputHandler.registerEscHandler(T,A)}registerDcsHandler(T,A){return this._inputHandler.registerDcsHandler(T,A)}registerCsiHandler(T,A){return this._inputHandler.registerCsiHandler(T,A)}registerOscHandler(T,A){return this._inputHandler.registerOscHandler(T,A)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let T=!1;const A=this.optionsService.rawOptions.windowsPty;A&&A.buildNumber!==void 0&&A.buildNumber!==void 0?T=A.backend==="conpty"&&A.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(T=!0),T?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const T=[];T.push(this.onLineFeed(u.updateWindowsModeWrappedState.bind(null,this._bufferService))),T.push(this.registerCsiHandler({final:"H"},()=>((0,u.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const A of T)A.dispose()})}}}i.CoreTerminal=b},8460:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===a)return void this._listeners.splice(h,1)}}})),this._event}fire(a,h){const d=[];for(let l=0;l<this._listeners.length;l++)d.push(this._listeners[l]);for(let l=0;l<d.length;l++)d[l].call(void 0,a,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(a,h){return a(d=>h.fire(d))}},5435:function(E,i,a){var h=this&&this.__decorate||function(N,L,B,O){var P,V=arguments.length,ee=V<3?L:O===null?O=Object.getOwnPropertyDescriptor(L,B):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(N,L,B,O);else for(var ne=N.length-1;ne>=0;ne--)(P=N[ne])&&(ee=(V<3?P(ee):V>3?P(L,B,ee):P(L,B))||ee);return V>3&&ee&&Object.defineProperty(L,B,ee),ee},d=this&&this.__param||function(N,L){return function(B,O){L(B,O,N)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const l=a(2584),f=a(7116),S=a(2015),y=a(844),v=a(482),t=a(8437),r=a(8460),s=a(643),o=a(511),u=a(3734),_=a(2585),g=a(6242),C=a(6351),c=a(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},R=131072;function T(N,L){if(N>24)return L.setWinLines||!1;switch(N){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var A;(function(N){N[N.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",N[N.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(i.WindowsOptionsReportType=A={}));let M=0;class F extends y.Disposable{getAttrData(){return this._curAttrData}constructor(L,B,O,P,V,ee,ne,se,de=new S.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=B,this._coreService=O,this._logService=P,this._optionsService=V,this._oscLinkService=ee,this._coreMouseService=ne,this._unicodeService=se,this._parser=de,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new o.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new r.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new r.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new r.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new r.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new r.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new r.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new r.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new r.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new r.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new r.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new r.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._parser.setCsiHandlerFallback((k,H)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:H.toArray()})}),this._parser.setEscHandlerFallback(k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})}),this._parser.setExecuteHandlerFallback(k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})}),this._parser.setOscHandlerFallback((k,H,K)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:H,data:K})}),this._parser.setDcsHandlerFallback((k,H,K)=>{H==="HOOK"&&(K=K.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:H,payload:K})}),this._parser.setPrintHandler((k,H,K)=>this.print(k,H,K)),this._parser.registerCsiHandler({final:"@"},k=>this.insertChars(k)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},k=>this.scrollLeft(k)),this._parser.registerCsiHandler({final:"A"},k=>this.cursorUp(k)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},k=>this.scrollRight(k)),this._parser.registerCsiHandler({final:"B"},k=>this.cursorDown(k)),this._parser.registerCsiHandler({final:"C"},k=>this.cursorForward(k)),this._parser.registerCsiHandler({final:"D"},k=>this.cursorBackward(k)),this._parser.registerCsiHandler({final:"E"},k=>this.cursorNextLine(k)),this._parser.registerCsiHandler({final:"F"},k=>this.cursorPrecedingLine(k)),this._parser.registerCsiHandler({final:"G"},k=>this.cursorCharAbsolute(k)),this._parser.registerCsiHandler({final:"H"},k=>this.cursorPosition(k)),this._parser.registerCsiHandler({final:"I"},k=>this.cursorForwardTab(k)),this._parser.registerCsiHandler({final:"J"},k=>this.eraseInDisplay(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},k=>this.eraseInDisplay(k,!0)),this._parser.registerCsiHandler({final:"K"},k=>this.eraseInLine(k,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},k=>this.eraseInLine(k,!0)),this._parser.registerCsiHandler({final:"L"},k=>this.insertLines(k)),this._parser.registerCsiHandler({final:"M"},k=>this.deleteLines(k)),this._parser.registerCsiHandler({final:"P"},k=>this.deleteChars(k)),this._parser.registerCsiHandler({final:"S"},k=>this.scrollUp(k)),this._parser.registerCsiHandler({final:"T"},k=>this.scrollDown(k)),this._parser.registerCsiHandler({final:"X"},k=>this.eraseChars(k)),this._parser.registerCsiHandler({final:"Z"},k=>this.cursorBackwardTab(k)),this._parser.registerCsiHandler({final:"`"},k=>this.charPosAbsolute(k)),this._parser.registerCsiHandler({final:"a"},k=>this.hPositionRelative(k)),this._parser.registerCsiHandler({final:"b"},k=>this.repeatPrecedingCharacter(k)),this._parser.registerCsiHandler({final:"c"},k=>this.sendDeviceAttributesPrimary(k)),this._parser.registerCsiHandler({prefix:">",final:"c"},k=>this.sendDeviceAttributesSecondary(k)),this._parser.registerCsiHandler({final:"d"},k=>this.linePosAbsolute(k)),this._parser.registerCsiHandler({final:"e"},k=>this.vPositionRelative(k)),this._parser.registerCsiHandler({final:"f"},k=>this.hVPosition(k)),this._parser.registerCsiHandler({final:"g"},k=>this.tabClear(k)),this._parser.registerCsiHandler({final:"h"},k=>this.setMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"h"},k=>this.setModePrivate(k)),this._parser.registerCsiHandler({final:"l"},k=>this.resetMode(k)),this._parser.registerCsiHandler({prefix:"?",final:"l"},k=>this.resetModePrivate(k)),this._parser.registerCsiHandler({final:"m"},k=>this.charAttributes(k)),this._parser.registerCsiHandler({final:"n"},k=>this.deviceStatus(k)),this._parser.registerCsiHandler({prefix:"?",final:"n"},k=>this.deviceStatusPrivate(k)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},k=>this.softReset(k)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},k=>this.setCursorStyle(k)),this._parser.registerCsiHandler({final:"r"},k=>this.setScrollRegion(k)),this._parser.registerCsiHandler({final:"s"},k=>this.saveCursor(k)),this._parser.registerCsiHandler({final:"t"},k=>this.windowOptions(k)),this._parser.registerCsiHandler({final:"u"},k=>this.restoreCursor(k)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},k=>this.insertColumns(k)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},k=>this.deleteColumns(k)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},k=>this.selectProtected(k)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},k=>this.requestMode(k,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},k=>this.requestMode(k,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new g.OscHandler(k=>(this.setTitle(k),this.setIconName(k),!0))),this._parser.registerOscHandler(1,new g.OscHandler(k=>this.setIconName(k))),this._parser.registerOscHandler(2,new g.OscHandler(k=>this.setTitle(k))),this._parser.registerOscHandler(4,new g.OscHandler(k=>this.setOrReportIndexedColor(k))),this._parser.registerOscHandler(8,new g.OscHandler(k=>this.setHyperlink(k))),this._parser.registerOscHandler(10,new g.OscHandler(k=>this.setOrReportFgColor(k))),this._parser.registerOscHandler(11,new g.OscHandler(k=>this.setOrReportBgColor(k))),this._parser.registerOscHandler(12,new g.OscHandler(k=>this.setOrReportCursorColor(k))),this._parser.registerOscHandler(104,new g.OscHandler(k=>this.restoreIndexedColor(k))),this._parser.registerOscHandler(110,new g.OscHandler(k=>this.restoreFgColor(k))),this._parser.registerOscHandler(111,new g.OscHandler(k=>this.restoreBgColor(k))),this._parser.registerOscHandler(112,new g.OscHandler(k=>this.restoreCursorColor(k))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const k in f.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},()=>this.selectCharset("("+k)),this._parser.registerEscHandler({intermediates:")",final:k},()=>this.selectCharset(")"+k)),this._parser.registerEscHandler({intermediates:"*",final:k},()=>this.selectCharset("*"+k)),this._parser.registerEscHandler({intermediates:"+",final:k},()=>this.selectCharset("+"+k)),this._parser.registerEscHandler({intermediates:"-",final:k},()=>this.selectCharset("-"+k)),this._parser.registerEscHandler({intermediates:".",final:k},()=>this.selectCharset("."+k)),this._parser.registerEscHandler({intermediates:"/",final:k},()=>this.selectCharset("/"+k));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(k=>(this._logService.error("Parsing error: ",k),k)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((k,H)=>this.requestStatusString(k,H)))}_preserveStack(L,B,O,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=O,this._parseStack.position=P}_logSlowResolvingAsync(L){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([L,new Promise((B,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,B){let O,P=this._activeBuffer.x,V=this._activeBuffer.y,ee=0;const ne=this._parseStack.paused;if(ne){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(O),O;P=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>R&&(ee=this._parseStack.position+R)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,se=>String.fromCharCode(se)).join("")}"`),typeof L=="string"?L.split("").map(se=>se.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<R&&(this._parseBuffer=new Uint32Array(Math.min(L.length,R))),ne||this._dirtyRowTracker.clearRange(),L.length>R)for(let se=ee;se<L.length;se+=R){const de=se+R<L.length?se+R:L.length,k=typeof L=="string"?this._stringDecoder.decode(L.substring(se,de),this._parseBuffer):this._utf8Decoder.decode(L.subarray(se,de),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,k))return this._preserveStack(P,V,k,se),this._logSlowResolvingAsync(O),O}else if(!ne){const se=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,se))return this._preserveStack(P,V,se,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===P&&this._activeBuffer.y===V||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(L,B,O){let P,V;const ee=this._charsetService.charset,ne=this._optionsService.rawOptions.screenReaderMode,se=this._bufferService.cols,de=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,H=this._curAttrData;let K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-B>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodePoint(this._activeBuffer.x-1,0,1,H.fg,H.bg,H.extended);for(let z=B;z<O;++z){if(P=L[z],V=this._unicodeService.wcwidth(P),P<127&&ee){const ae=ee[String.fromCharCode(P)];ae&&(P=ae.charCodeAt(0))}if(ne&&this._onA11yChar.fire((0,v.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),V||!this._activeBuffer.x){if(this._activeBuffer.x+V-1>=se){if(de){for(;this._activeBuffer.x<se;)K.setCellFromCodePoint(this._activeBuffer.x++,0,1,H.fg,H.bg,H.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=se-1,V===2)continue}if(k&&(K.insertCells(this._activeBuffer.x,V,this._activeBuffer.getNullCell(H),H),K.getWidth(se-1)===2&&K.setCellFromCodePoint(se-1,s.NULL_CELL_CODE,s.NULL_CELL_WIDTH,H.fg,H.bg,H.extended)),K.setCellFromCodePoint(this._activeBuffer.x++,P,V,H.fg,H.bg,H.extended),V>0)for(;--V;)K.setCellFromCodePoint(this._activeBuffer.x++,0,0,H.fg,H.bg,H.extended)}else K.getWidth(this._activeBuffer.x-1)?K.addCodepointToCell(this._activeBuffer.x-1,P):K.addCodepointToCell(this._activeBuffer.x-2,P)}O-B>0&&(K.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<se&&O-B>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodePoint(this._activeBuffer.x,0,1,H.fg,H.bg,H.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,B){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,B):this._parser.registerCsiHandler(L,O=>!T(O.params[0],this._optionsService.rawOptions.windowOptions)||B(O))}registerDcsHandler(L,B){return this._parser.registerDcsHandler(L,new C.DcsHandler(B))}registerEscHandler(L,B){return this._parser.registerEscHandler(L,B)}registerOscHandler(L,B){return this._parser.registerOscHandler(L,new g.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0)&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=L,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+B)}cursorUp(L){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const B=L.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=L.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=L.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const B=L.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,B,O,P=!1,V=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);ee.replaceCells(B,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),V),P&&(ee.isWrapped=!1)}_resetBufferLine(L,B=!1){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);O&&(O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),O.isWrapped=!1)}eraseInDisplay(L,B=!1){let O;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);O<this._bufferService.rows;O++)this._resetBufferLine(O,B);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,B);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(L,B=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let B=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;B--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let B=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;B--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let B=L.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let B=L.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=L.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=L.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=L.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=L.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){if(!this._parser.precedingCodepoint)return!0;const B=L.params[0]||1,O=new Uint32Array(B);for(let P=0;P<B;++P)O[P]=this._parser.precedingCodepoint;return this.print(O,0,O.length),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let B=0;B<L.length;B++)switch(L.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let B=0;B<L.length;B++)switch(L.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),this._charsetService.setgCharset(1,f.DEFAULT_CHARSET),this._charsetService.setgCharset(2,f.DEFAULT_CHARSET),this._charsetService.setgCharset(3,f.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let B=0;B<L.length;B++)switch(L.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let B=0;B<L.length;B++)switch(L.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,B){const O=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:V}=this._coreMouseService,ee=this._coreService,{buffers:ne,cols:se}=this._bufferService,{active:de,alt:k}=ne,H=this._optionsService.rawOptions,K=D=>D?1:2,z=L.params[0];return ae=z,te=B?z===2?4:z===4?K(ee.modes.insertMode):z===12?3:z===20?K(H.convertEol):0:z===1?K(O.applicationCursorKeys):z===3?H.windowOptions.setWinLines?se===80?2:se===132?1:0:0:z===6?K(O.origin):z===7?K(O.wraparound):z===8?3:z===9?K(P==="X10"):z===12?K(H.cursorBlink):z===25?K(!ee.isCursorHidden):z===45?K(O.reverseWraparound):z===66?K(O.applicationKeypad):z===67?4:z===1e3?K(P==="VT200"):z===1002?K(P==="DRAG"):z===1003?K(P==="ANY"):z===1004?K(O.sendFocus):z===1005?4:z===1006?K(V==="SGR"):z===1015?4:z===1016?K(V==="SGR_PIXELS"):z===1048?1:z===47||z===1047||z===1049?K(de===k):z===2004?K(O.bracketedPasteMode):0,ee.triggerDataEvent(`${l.C0.ESC}[${B?"":"?"}${ae};${te}$y`),!0;var ae,te}_updateAttrColor(L,B,O,P,V){return B===2?(L|=50331648,L&=-16777216,L|=u.AttributeData.fromColorRGB([O,P,V])):B===5&&(L&=-50331904,L|=33554432|255&O),L}_extractColor(L,B,O){const P=[0,0,-1,0,0,0];let V=0,ee=0;do{if(P[ee+V]=L.params[B+ee],L.hasSubParams(B+ee)){const ne=L.getSubParams(B+ee);let se=0;do P[1]===5&&(V=1),P[ee+se+1+V]=ne[se];while(++se<ne.length&&se+ee+1+V<P.length);break}if(P[1]===5&&ee+V>=2||P[1]===2&&ee+V>=5)break;P[1]&&(V=1)}while(++ee+B<L.length&&ee+V<P.length);for(let ne=2;ne<P.length;++ne)P[ne]===-1&&(P[ne]=0);switch(P[0]){case 38:O.fg=this._updateAttrColor(O.fg,P[1],P[3],P[4],P[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,P[1],P[3],P[4],P[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,P[1],P[3],P[4],P[5])}return ee}_processUnderline(L,B){B.extended=B.extended.clone(),(!~L||L>5)&&(L=1),B.extended.underlineStyle=L,B.fg|=268435456,L===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(L){L.fg=t.DEFAULT_ATTR_DATA.fg,L.bg=t.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=L.length;let O;const P=this._curAttrData;for(let V=0;V<B;V++)O=L.params[V],O>=30&&O<=37?(P.fg&=-50331904,P.fg|=16777216|O-30):O>=40&&O<=47?(P.bg&=-50331904,P.bg|=16777216|O-40):O>=90&&O<=97?(P.fg&=-50331904,P.fg|=16777224|O-90):O>=100&&O<=107?(P.bg&=-50331904,P.bg|=16777224|O-100):O===0?this._processSGR0(P):O===1?P.fg|=134217728:O===3?P.bg|=67108864:O===4?(P.fg|=268435456,this._processUnderline(L.hasSubParams(V)?L.getSubParams(V)[0]:1,P)):O===5?P.fg|=536870912:O===7?P.fg|=67108864:O===8?P.fg|=1073741824:O===9?P.fg|=2147483648:O===2?P.bg|=134217728:O===21?this._processUnderline(2,P):O===22?(P.fg&=-134217729,P.bg&=-134217729):O===23?P.bg&=-67108865:O===24?(P.fg&=-268435457,this._processUnderline(0,P)):O===25?P.fg&=-536870913:O===27?P.fg&=-67108865:O===28?P.fg&=-1073741825:O===29?P.fg&=2147483647:O===39?(P.fg&=-67108864,P.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):O===49?(P.bg&=-67108864,P.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?V+=this._extractColor(L,V,P):O===53?P.bg|=1073741824:O===55?P.bg&=-1073741825:O===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):O===100?(P.fg&=-67108864,P.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${B};${O}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const B=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${B};${O}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const B=L.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const O=B%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(L){const B=L.params[0]||1;let O;return(L.length<2||(O=L.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(L){if(!T(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const B=[],O=L.split(";");for(;O.length>1;){const P=O.shift(),V=O.shift();if(/^\d+$/.exec(P)){const ee=parseInt(P);if(j(ee))if(V==="?")B.push({type:0,index:ee});else{const ne=(0,c.parseColor)(V);ne&&B.push({type:1,index:ee,color:ne})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(L){const B=L.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(L,B){this._getCurrentLinkId()&&this._finishHyperlink();const O=L.split(":");let P;const V=O.findIndex(ee=>ee.startsWith("id="));return V!==-1&&(P=O[V].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,B){const O=L.split(";");for(let P=0;P<O.length&&!(B>=this._specialColors.length);++P,++B)if(O[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const V=(0,c.parseColor)(O[P]);V&&this._onColor.fire([{type:1,index:this._specialColors[B],color:V}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const B=[],O=L.split(";");for(let P=0;P<O.length;++P)if(/^\d+$/.exec(O[P])){const V=parseInt(O[P]);j(V)&&B.push({type:2,index:V})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(b[L[0]],f.CHARSETS[L[1]]||f.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new o.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const O=this._activeBuffer.ybase+this._activeBuffer.y+B,P=this._activeBuffer.lines.get(O);P&&(P.fill(L),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,B){const O=this._bufferService.buffer,P=this._optionsService.rawOptions;return(V=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${V}${l.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,B){this._dirtyRowTracker.markRangeDirty(L,B)}}i.InputHandler=F;let $=class{constructor(N){this._bufferService=N,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(N){N<this.start?this.start=N:N>this.end&&(this.end=N)}markRangeDirty(N,L){N>L&&(M=N,N=L,L=M),N<this.start&&(this.start=N),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function j(N){return 0<=N&&N<256}$=h([d(0,_.IBufferService)],$)},844:(E,i)=>{function a(h){for(const d of h)d.dispose();h.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const d=this._disposables.indexOf(h);d!==-1&&this._disposables.splice(d,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var d;this._isDisposed||h===this._value||((d=this._value)===null||d===void 0||d.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)===null||h===void 0||h.dispose(),this._value=void 0}},i.toDisposable=function(h){return{dispose:h}},i.disposeArray=a,i.getDisposeArrayDisposable=function(h){return{dispose:()=>a(h)}}},1505:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(d,l,f){this._data[d]||(this._data[d]={}),this._data[d][l]=f}get(d,l){return this._data[d]?this._data[d][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=a,i.FourKeyMap=class{constructor(){this._data=new a}set(h,d,l,f,S){this._data.get(h,d)||this._data.set(h,d,new a),this._data.get(h,d).set(l,f,S)}get(h,d,l,f){var S;return(S=this._data.get(h,d))===null||S===void 0?void 0:S.get(l,f)}clear(){this._data.clear()}}},6114:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const a=i.isNode?"node":navigator.userAgent,h=i.isNode?"node":navigator.platform;i.isFirefox=a.includes("Firefox"),i.isLegacyEdge=a.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(a),i.getSafariVersion=function(){if(!i.isSafari)return 0;const d=a.match(/Version\/(\d+)/);return d===null||d.length<2?0:parseInt(d[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),i.isIpad=h==="iPad",i.isIphone=h==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),i.isLinux=h.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(a)},6106:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let a=0;i.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(a=this._search(this._getKey(h)),this._array.splice(a,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const d=this._getKey(h);if(d===void 0||(a=this._search(d),a===-1)||this._getKey(this._array[a])!==d)return!1;do if(this._array[a]===h)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===d);return!1}*getKeyIterator(h){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===h)}forEachByKey(h,d){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do d(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===h)}values(){return[...this._array].values()}_search(h){let d=0,l=this._array.length-1;for(;l>=d;){let f=d+l>>1;const S=this._getKey(this._array[f]);if(S>h)l=f-1;else{if(!(S<h)){for(;f>0&&this._getKey(this._array[f-1])===h;)f--;return f}d=f+1}}return d}}},7226:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const h=a(6114);class d{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let y=0,v=0,t=S.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),v=Math.max(y,v),r=S.timeRemaining(),1.5*v>r)return t-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-y))}ms`),void this._start();t=r}this.clear()}}class l extends d{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const y=Date.now()+S;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends d{_requestCallback(f){return requestIdleCallback(f)}_cancelCallback(f){cancelIdleCallback(f)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(f){this._queue.clear(),this._queue.enqueue(f)}flush(){this._queue.flush()}}},9282:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const h=a(643);i.updateWindowsModeWrappedState=function(d){const l=d.buffer.lines.get(d.buffer.ybase+d.buffer.y-1),f=l==null?void 0:l.get(d.cols-1),S=d.buffer.lines.get(d.buffer.ybase+d.buffer.y);S&&f&&(S.isWrapped=f[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&f[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new a;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=a;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}constructor(l=0,f=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=f}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=h},9092:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const h=a(6349),d=a(7226),l=a(3734),f=a(8437),S=a(4634),y=a(511),v=a(643),t=a(4863),r=a(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(s,o,u){this._hasScrollback=s,this._optionsService=o,this._bufferService=u,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=f.DEFAULT_ATTR_DATA.clone(),this.savedCharset=r.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new d.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(s){return s?(this._nullCell.fg=s.fg,this._nullCell.bg=s.bg,this._nullCell.extended=s.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(s){return s?(this._whitespaceCell.fg=s.fg,this._whitespaceCell.bg=s.bg,this._whitespaceCell.extended=s.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(s,o){return new f.BufferLine(this._bufferService.cols,this.getNullCell(s),o)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const s=this.ybase+this.y-this.ydisp;return s>=0&&s<this._rows}_getCorrectBufferLength(s){if(!this._hasScrollback)return s;const o=s+this._optionsService.rawOptions.scrollback;return o>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:o}fillViewportRows(s){if(this.lines.length===0){s===void 0&&(s=f.DEFAULT_ATTR_DATA);let o=this._rows;for(;o--;)this.lines.push(this.getBlankLine(s))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(s,o){const u=this.getNullCell(f.DEFAULT_ATTR_DATA);let _=0;const g=this._getCorrectBufferLength(o);if(g>this.lines.maxLength&&(this.lines.maxLength=g),this.lines.length>0){if(this._cols<s)for(let c=0;c<this.lines.length;c++)_+=+this.lines.get(c).resize(s,u);let C=0;if(this._rows<o)for(let c=this._rows;c<o;c++)this.lines.length<o+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new f.BufferLine(s,u)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new f.BufferLine(s,u)));else for(let c=this._rows;c>o;c--)this.lines.length>o+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(g<this.lines.maxLength){const c=this.lines.length-g;c>0&&(this.lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0),this.savedY=Math.max(this.savedY-c,0)),this.lines.maxLength=g}this.x=Math.min(this.x,s-1),this.y=Math.min(this.y,o-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,s-1),this.scrollTop=0}if(this.scrollBottom=o-1,this._isReflowEnabled&&(this._reflow(s,o),this._cols>s))for(let C=0;C<this.lines.length;C++)_+=+this.lines.get(C).resize(s,u);this._cols=s,this._rows=o,this._memoryCleanupQueue.clear(),_>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let s=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,s=!1);let o=0;for(;this._memoryCleanupPosition<this.lines.length;)if(o+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),o>100)return!0;return s}get _isReflowEnabled(){const s=this._optionsService.rawOptions.windowsPty;return s&&s.buildNumber?this._hasScrollback&&s.backend==="conpty"&&s.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(s,o){this._cols!==s&&(s>this._cols?this._reflowLarger(s,o):this._reflowSmaller(s,o))}_reflowLarger(s,o){const u=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,s,this.ybase+this.y,this.getNullCell(f.DEFAULT_ATTR_DATA));if(u.length>0){const _=(0,S.reflowLargerCreateNewLayout)(this.lines,u);(0,S.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(s,o,_.countRemoved)}}_reflowLargerAdjustViewport(s,o,u){const _=this.getNullCell(f.DEFAULT_ATTR_DATA);let g=u;for(;g-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<o&&this.lines.push(new f.BufferLine(s,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-u,0)}_reflowSmaller(s,o){const u=this.getNullCell(f.DEFAULT_ATTR_DATA),_=[];let g=0;for(let C=this.lines.length-1;C>=0;C--){let c=this.lines.get(C);if(!c||!c.isWrapped&&c.getTrimmedLength()<=s)continue;const b=[c];for(;c.isWrapped&&C>0;)c=this.lines.get(--C),b.unshift(c);const R=this.ybase+this.y;if(R>=C&&R<C+b.length)continue;const T=b[b.length-1].getTrimmedLength(),A=(0,S.reflowSmallerGetNewLineLengths)(b,this._cols,s),M=A.length-b.length;let F;F=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);const $=[];for(let P=0;P<M;P++){const V=this.getBlankLine(f.DEFAULT_ATTR_DATA,!0);$.push(V)}$.length>0&&(_.push({start:C+b.length+g,newLines:$}),g+=$.length),b.push(...$);let j=A.length-1,N=A[j];N===0&&(j--,N=A[j]);let L=b.length-M-1,B=T;for(;L>=0;){const P=Math.min(B,N);if(b[j]===void 0)break;if(b[j].copyCellsFrom(b[L],B-P,N-P,P,!0),N-=P,N===0&&(j--,N=A[j]),B-=P,B===0){L--;const V=Math.max(L,0);B=(0,S.getWrappedLineTrimmedLength)(b,V,this._cols)}}for(let P=0;P<b.length;P++)A[P]<s&&b[P].setCell(A[P],u);let O=M-F;for(;O-- >0;)this.ybase===0?this.y<o-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+g)-o&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+o-1)}if(_.length>0){const C=[],c=[];for(let j=0;j<this.lines.length;j++)c.push(this.lines.get(j));const b=this.lines.length;let R=b-1,T=0,A=_[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+g);let M=0;for(let j=Math.min(this.lines.maxLength-1,b+g-1);j>=0;j--)if(A&&A.start>R+M){for(let N=A.newLines.length-1;N>=0;N--)this.lines.set(j--,A.newLines[N]);j++,C.push({index:R+1,amount:A.newLines.length}),M+=A.newLines.length,A=_[++T]}else this.lines.set(j,c[R--]);let F=0;for(let j=C.length-1;j>=0;j--)C[j].index+=F,this.lines.onInsertEmitter.fire(C[j]),F+=C[j].amount;const $=Math.max(0,b+g-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(s,o,u=0,_){const g=this.lines.get(s);return g?g.translateToString(o,u,_):""}getWrappedRangeForLine(s){let o=s,u=s;for(;o>0&&this.lines.get(o).isWrapped;)o--;for(;u+1<this.lines.length&&this.lines.get(u+1).isWrapped;)u++;return{first:o,last:u}}setupTabStops(s){for(s!=null?this.tabs[s]||(s=this.prevStop(s)):(this.tabs={},s=0);s<this._cols;s+=this._optionsService.rawOptions.tabStopWidth)this.tabs[s]=!0}prevStop(s){for(s==null&&(s=this.x);!this.tabs[--s]&&s>0;);return s>=this._cols?this._cols-1:s<0?0:s}nextStop(s){for(s==null&&(s=this.x);!this.tabs[++s]&&s<this._cols;);return s>=this._cols?this._cols-1:s<0?0:s}clearMarkers(s){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].line===s&&(this.markers[o].dispose(),this.markers.splice(o--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].dispose(),this.markers.splice(s--,1);this._isClearing=!1}addMarker(s){const o=new t.Marker(s);return this.markers.push(o),o.register(this.lines.onTrim(u=>{o.line-=u,o.line<0&&o.dispose()})),o.register(this.lines.onInsert(u=>{o.line>=u.index&&(o.line+=u.amount)})),o.register(this.lines.onDelete(u=>{o.line>=u.index&&o.line<u.index+u.amount&&o.dispose(),o.line>u.index&&(o.line-=u.amount)})),o.register(o.onDispose(()=>this._removeMarker(o))),o}_removeMarker(s){this._isClearing||this.markers.splice(this.markers.indexOf(s),1)}}},8437:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const h=a(3734),d=a(511),l=a(643),f=a(482);i.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let S=0;class y{constructor(t,r,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);const o=r||d.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let u=0;u<t;++u)this.setCell(u,o);this.length=t}get(t){const r=this._data[3*t+0],s=2097151&r;return[this._data[3*t+1],2097152&r?this._combined[t]:s?(0,f.stringFromCodePoint)(s):"",r>>22,2097152&r?this._combined[t].charCodeAt(this._combined[t].length-1):s]}set(t,r){this._data[3*t+1]=r[l.CHAR_DATA_ATTR_INDEX],r[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=r[1],this._data[3*t+0]=2097152|t|r[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=r[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){const r=this._data[3*t+0];return 2097152&r?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&r}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){const r=this._data[3*t+0];return 2097152&r?this._combined[t]:2097151&r?(0,f.stringFromCodePoint)(2097151&r):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,r){return S=3*t,r.content=this._data[S+0],r.fg=this._data[S+1],r.bg=this._data[S+2],2097152&r.content&&(r.combinedData=this._combined[t]),268435456&r.bg&&(r.extended=this._extendedAttrs[t]),r}setCell(t,r){2097152&r.content&&(this._combined[t]=r.combinedData),268435456&r.bg&&(this._extendedAttrs[t]=r.extended),this._data[3*t+0]=r.content,this._data[3*t+1]=r.fg,this._data[3*t+2]=r.bg}setCellFromCodePoint(t,r,s,o,u,_){268435456&u&&(this._extendedAttrs[t]=_),this._data[3*t+0]=r|s<<22,this._data[3*t+1]=o,this._data[3*t+2]=u}addCodepointToCell(t,r){let s=this._data[3*t+0];2097152&s?this._combined[t]+=(0,f.stringFromCodePoint)(r):(2097151&s?(this._combined[t]=(0,f.stringFromCodePoint)(2097151&s)+(0,f.stringFromCodePoint)(r),s&=-2097152,s|=2097152):s=r|4194304,this._data[3*t+0]=s)}insertCells(t,r,s,o){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs),r<this.length-t){const u=new d.CellData;for(let _=this.length-t-r-1;_>=0;--_)this.setCell(t+r+_,this.loadCell(t+_,u));for(let _=0;_<r;++_)this.setCell(t+_,s)}else for(let u=t;u<this.length;++u)this.setCell(u,s);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs)}deleteCells(t,r,s,o){if(t%=this.length,r<this.length-t){const u=new d.CellData;for(let _=0;_<this.length-t-r;++_)this.setCell(t+_,this.loadCell(t+r+_,u));for(let _=this.length-r;_<this.length;++_)this.setCell(_,s)}else for(let u=t;u<this.length;++u)this.setCell(u,s);t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs)}replaceCells(t,r,s,o,u=!1){if(u)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodePoint(t-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs),r<this.length&&this.getWidth(r-1)===2&&!this.isProtected(r)&&this.setCellFromCodePoint(r,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs);t<r&&t<this.length;)this.isProtected(t)||this.setCell(t,s),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r,0,1,(o==null?void 0:o.fg)||0,(o==null?void 0:o.bg)||0,(o==null?void 0:o.extended)||new h.ExtendedAttrs);t<r&&t<this.length;)this.setCell(t++,s)}resize(t,r){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const s=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*s)this._data=new Uint32Array(this._data.buffer,0,s);else{const o=new Uint32Array(s);o.set(this._data),this._data=o}for(let o=this.length;o<t;++o)this.setCell(o,r)}else{this._data=this._data.subarray(0,s);const o=Object.keys(this._combined);for(let _=0;_<o.length;_++){const g=parseInt(o[_],10);g>=t&&delete this._combined[g]}const u=Object.keys(this._extendedAttrs);for(let _=0;_<u.length;_++){const g=parseInt(u[_],10);g>=t&&delete this._extendedAttrs[g]}}return this.length=t,4*s*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,r=!1){if(r)for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,t);else{this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(const r in t._combined)this._combined[r]=t._combined[r];this._extendedAttrs={};for(const r in t._extendedAttrs)this._extendedAttrs[r]=t._extendedAttrs[r];this.isWrapped=t.isWrapped}clone(){const t=new y(0);t._data=new Uint32Array(this._data),t.length=this.length;for(const r in this._combined)t._combined[r]=this._combined[r];for(const r in this._extendedAttrs)t._extendedAttrs[r]=this._extendedAttrs[r];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0]||50331648&this._data[3*t+2])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,r,s,o,u){const _=t._data;if(u)for(let C=o-1;C>=0;C--){for(let c=0;c<3;c++)this._data[3*(s+C)+c]=_[3*(r+C)+c];268435456&_[3*(r+C)+2]&&(this._extendedAttrs[s+C]=t._extendedAttrs[r+C])}else for(let C=0;C<o;C++){for(let c=0;c<3;c++)this._data[3*(s+C)+c]=_[3*(r+C)+c];268435456&_[3*(r+C)+2]&&(this._extendedAttrs[s+C]=t._extendedAttrs[r+C])}const g=Object.keys(t._combined);for(let C=0;C<g.length;C++){const c=parseInt(g[C],10);c>=r&&(this._combined[c-r+s]=t._combined[c])}}translateToString(t=!1,r=0,s=this.length){t&&(s=Math.min(s,this.getTrimmedLength()));let o="";for(;r<s;){const u=this._data[3*r+0],_=2097151&u;o+=2097152&u?this._combined[r]:_?(0,f.stringFromCodePoint)(_):l.WHITESPACE_CELL_CHAR,r+=u>>22||1}return o}}i.BufferLine=y},4841:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(a,h){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return h*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(E,i)=>{function a(h,d,l){if(d===h.length-1)return h[d].getTrimmedLength();const f=!h[d].hasContent(l-1)&&h[d].getWidth(l-1)===1,S=h[d+1].getWidth(0)===2;return f&&S?l-1:l}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(h,d,l,f,S){const y=[];for(let v=0;v<h.length-1;v++){let t=v,r=h.get(++t);if(!r.isWrapped)continue;const s=[h.get(v)];for(;t<h.length&&r.isWrapped;)s.push(r),r=h.get(++t);if(f>=v&&f<t){v+=s.length-1;continue}let o=0,u=a(s,o,d),_=1,g=0;for(;_<s.length;){const c=a(s,_,d),b=c-g,R=l-u,T=Math.min(b,R);s[o].copyCellsFrom(s[_],g,u,T,!1),u+=T,u===l&&(o++,u=0),g+=T,g===c&&(_++,g=0),u===0&&o!==0&&s[o-1].getWidth(l-1)===2&&(s[o].copyCellsFrom(s[o-1],l-1,u++,1,!1),s[o-1].setCell(l-1,S))}s[o].replaceCells(u,l,S);let C=0;for(let c=s.length-1;c>0&&(c>o||s[c].getTrimmedLength()===0);c--)C++;C>0&&(y.push(v+s.length-C),y.push(C)),v+=s.length-1}return y},i.reflowLargerCreateNewLayout=function(h,d){const l=[];let f=0,S=d[f],y=0;for(let v=0;v<h.length;v++)if(S===v){const t=d[++f];h.onDeleteEmitter.fire({index:v-y,amount:t}),v+=t-1,y+=t,S=d[++f]}else l.push(v);return{layout:l,countRemoved:y}},i.reflowLargerApplyNewLayout=function(h,d){const l=[];for(let f=0;f<d.length;f++)l.push(h.get(d[f]));for(let f=0;f<l.length;f++)h.set(f,l[f]);h.length=d.length},i.reflowSmallerGetNewLineLengths=function(h,d,l){const f=[],S=h.map((r,s)=>a(h,s,d)).reduce((r,s)=>r+s);let y=0,v=0,t=0;for(;t<S;){if(S-t<l){f.push(S-t);break}y+=l;const r=a(h,v,d);y>r&&(y-=r,v++);const s=h[v].getWidth(y-1)===2;s&&y--;const o=s?l-1:l;f.push(o),t+=o}return f},i.getWrappedLineTrimmedLength=a},5295:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const h=a(8460),d=a(844),l=a(9092);class f extends d.Disposable{constructor(y,v){super(),this._optionsService=y,this._bufferService=v,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,v){this._normal.resize(y,v),this._alt.resize(y,v),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}i.BufferSet=f},511:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const h=a(482),d=a(643),l=a(3734);class f extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const v=new f;return v.setFromCharData(y),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[d.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(y[d.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(y[d.CHAR_DATA_CHAR_INDEX].length===2){const t=y[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){const r=y[d.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(t-55296)+r-56320+65536|y[d.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=y[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[d.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=y[d.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[d.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=f},643:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const h=a(8460),d=a(844);class l{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,d.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}i.Marker=l,l._nextId=1},7116:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(E,i)=>{var a,h,d;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(a||(i.C0=a={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(h||(i.C1=h={})),function(l){l.ST=`${a.ESC}\\`}(d||(i.C1_ESCAPED=d={}))},7399:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const h=a(2584),d={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(l,f,S,y){const v={type:0,cancel:!1,key:void 0},t=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?v.key=f?h.C0.ESC+"OA":h.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?v.key=f?h.C0.ESC+"OD":h.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?v.key=f?h.C0.ESC+"OC":h.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(v.key=f?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(l.altKey){v.key=h.C0.ESC+h.C0.DEL;break}v.key=h.C0.DEL;break;case 9:if(l.shiftKey){v.key=h.C0.ESC+"[Z";break}v.key=h.C0.HT,v.cancel=!0;break;case 13:v.key=l.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,v.cancel=!0;break;case 27:v.key=h.C0.ESC,l.altKey&&(v.key=h.C0.ESC+h.C0.ESC),v.cancel=!0;break;case 37:if(l.metaKey)break;t?(v.key=h.C0.ESC+"[1;"+(t+1)+"D",v.key===h.C0.ESC+"[1;3D"&&(v.key=h.C0.ESC+(S?"b":"[1;5D"))):v.key=f?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(l.metaKey)break;t?(v.key=h.C0.ESC+"[1;"+(t+1)+"C",v.key===h.C0.ESC+"[1;3C"&&(v.key=h.C0.ESC+(S?"f":"[1;5C"))):v.key=f?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(l.metaKey)break;t?(v.key=h.C0.ESC+"[1;"+(t+1)+"A",S||v.key!==h.C0.ESC+"[1;3A"||(v.key=h.C0.ESC+"[1;5A")):v.key=f?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(l.metaKey)break;t?(v.key=h.C0.ESC+"[1;"+(t+1)+"B",S||v.key!==h.C0.ESC+"[1;3B"||(v.key=h.C0.ESC+"[1;5B")):v.key=f?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(v.key=h.C0.ESC+"[2~");break;case 46:v.key=t?h.C0.ESC+"[3;"+(t+1)+"~":h.C0.ESC+"[3~";break;case 36:v.key=t?h.C0.ESC+"[1;"+(t+1)+"H":f?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:v.key=t?h.C0.ESC+"[1;"+(t+1)+"F":f?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:l.shiftKey?v.type=2:l.ctrlKey?v.key=h.C0.ESC+"[5;"+(t+1)+"~":v.key=h.C0.ESC+"[5~";break;case 34:l.shiftKey?v.type=3:l.ctrlKey?v.key=h.C0.ESC+"[6;"+(t+1)+"~":v.key=h.C0.ESC+"[6~";break;case 112:v.key=t?h.C0.ESC+"[1;"+(t+1)+"P":h.C0.ESC+"OP";break;case 113:v.key=t?h.C0.ESC+"[1;"+(t+1)+"Q":h.C0.ESC+"OQ";break;case 114:v.key=t?h.C0.ESC+"[1;"+(t+1)+"R":h.C0.ESC+"OR";break;case 115:v.key=t?h.C0.ESC+"[1;"+(t+1)+"S":h.C0.ESC+"OS";break;case 116:v.key=t?h.C0.ESC+"[15;"+(t+1)+"~":h.C0.ESC+"[15~";break;case 117:v.key=t?h.C0.ESC+"[17;"+(t+1)+"~":h.C0.ESC+"[17~";break;case 118:v.key=t?h.C0.ESC+"[18;"+(t+1)+"~":h.C0.ESC+"[18~";break;case 119:v.key=t?h.C0.ESC+"[19;"+(t+1)+"~":h.C0.ESC+"[19~";break;case 120:v.key=t?h.C0.ESC+"[20;"+(t+1)+"~":h.C0.ESC+"[20~";break;case 121:v.key=t?h.C0.ESC+"[21;"+(t+1)+"~":h.C0.ESC+"[21~";break;case 122:v.key=t?h.C0.ESC+"[23;"+(t+1)+"~":h.C0.ESC+"[23~";break;case 123:v.key=t?h.C0.ESC+"[24;"+(t+1)+"~":h.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(S&&!y||!l.altKey||l.metaKey)!S||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?v.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(v.key=h.C0.US),l.key==="@"&&(v.key=h.C0.NUL)):l.keyCode===65&&(v.type=1);else{const r=d[l.keyCode],s=r==null?void 0:r[l.shiftKey?1:0];if(s)v.key=h.C0.ESC+s;else if(l.keyCode>=65&&l.keyCode<=90){const o=l.ctrlKey?l.keyCode-64:l.keyCode+32;let u=String.fromCharCode(o);l.shiftKey&&(u=u.toUpperCase()),v.key=h.C0.ESC+u}else if(l.keyCode===32)v.key=h.C0.ESC+(l.ctrlKey?h.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let o=l.code.slice(3,4);l.shiftKey||(o=o.toLowerCase()),v.key=h.C0.ESC+o,v.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?v.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?v.key=h.C0.NUL:l.keyCode>=51&&l.keyCode<=55?v.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?v.key=h.C0.DEL:l.keyCode===219?v.key=h.C0.ESC:l.keyCode===220?v.key=h.C0.FS:l.keyCode===221&&(v.key=h.C0.GS)}return v}},482:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},i.utf32ToString=function(a,h=0,d=a.length){let l="";for(let f=h;f<d;++f){let S=a[f];S>65535?(S-=65536,l+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):l+=String.fromCharCode(S)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,h){const d=a.length;if(!d)return 0;let l=0,f=0;if(this._interim){const S=a.charCodeAt(f++);56320<=S&&S<=57343?h[l++]=1024*(this._interim-55296)+S-56320+65536:(h[l++]=this._interim,h[l++]=S),this._interim=0}for(let S=f;S<d;++S){const y=a.charCodeAt(S);if(55296<=y&&y<=56319){if(++S>=d)return this._interim=y,l;const v=a.charCodeAt(S);56320<=v&&v<=57343?h[l++]=1024*(y-55296)+v-56320+65536:(h[l++]=y,h[l++]=v)}else y!==65279&&(h[l++]=y)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,h){const d=a.length;if(!d)return 0;let l,f,S,y,v=0,t=0,r=0;if(this.interim[0]){let u=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let g,C=0;for(;(g=63&this.interim[++C])&&C<4;)_<<=6,_|=g;const c=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=c-C;for(;r<b;){if(r>=d)return 0;if(g=a[r++],(192&g)!=128){r--,u=!0;break}this.interim[C++]=g,_<<=6,_|=63&g}u||(c===2?_<128?r--:h[v++]=_:c===3?_<2048||_>=55296&&_<=57343||_===65279||(h[v++]=_):_<65536||_>1114111||(h[v++]=_)),this.interim.fill(0)}const s=d-4;let o=r;for(;o<d;){for(;!(!(o<s)||128&(l=a[o])||128&(f=a[o+1])||128&(S=a[o+2])||128&(y=a[o+3]));)h[v++]=l,h[v++]=f,h[v++]=S,h[v++]=y,o+=4;if(l=a[o++],l<128)h[v++]=l;else if((224&l)==192){if(o>=d)return this.interim[0]=l,v;if(f=a[o++],(192&f)!=128){o--;continue}if(t=(31&l)<<6|63&f,t<128){o--;continue}h[v++]=t}else if((240&l)==224){if(o>=d)return this.interim[0]=l,v;if(f=a[o++],(192&f)!=128){o--;continue}if(o>=d)return this.interim[0]=l,this.interim[1]=f,v;if(S=a[o++],(192&S)!=128){o--;continue}if(t=(15&l)<<12|(63&f)<<6|63&S,t<2048||t>=55296&&t<=57343||t===65279)continue;h[v++]=t}else if((248&l)==240){if(o>=d)return this.interim[0]=l,v;if(f=a[o++],(192&f)!=128){o--;continue}if(o>=d)return this.interim[0]=l,this.interim[1]=f,v;if(S=a[o++],(192&S)!=128){o--;continue}if(o>=d)return this.interim[0]=l,this.interim[1]=f,this.interim[2]=S,v;if(y=a[o++],(192&y)!=128){o--;continue}if(t=(7&l)<<18|(63&f)<<12|(63&S)<<6|63&y,t<65536||t>1114111)continue;h[v++]=t}}return v}}},225:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let d;i.UnicodeV6=class{constructor(){if(this.version="6",!d){d=new Uint8Array(65536),d.fill(1),d[0]=0,d.fill(0,1,32),d.fill(0,127,160),d.fill(2,4352,4448),d[9001]=2,d[9002]=2,d.fill(2,11904,42192),d[12351]=1,d.fill(2,44032,55204),d.fill(2,63744,64256),d.fill(2,65040,65050),d.fill(2,65072,65136),d.fill(2,65280,65377),d.fill(2,65504,65511);for(let l=0;l<a.length;++l)d.fill(0,a[l][0],a[l][1]+1)}}wcwidth(l){return l<32?0:l<127?1:l<65536?d[l]:function(f,S){let y,v=0,t=S.length-1;if(f<S[0][0]||f>S[t][1])return!1;for(;t>=v;)if(y=v+t>>1,f>S[y][1])v=y+1;else{if(!(f<S[y][0]))return!0;t=y-1}return!1}(l,h)?0:l>=131072&&l<=196605||l>=196608&&l<=262141?2:1}}},5981:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const h=a(8460),d=a(844);class l extends d.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);const t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(y)}_innerWrite(S=0,y=!0){const v=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const t=this._writeBuffer[this._bufferOffset],r=this._action(t,y);if(r){const o=u=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,u)):this._innerWrite(v,u);return void r.catch(u=>(queueMicrotask(()=>{throw u}),Promise.resolve(!1))).then(o)}const s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=l},5941:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function d(l,f){const S=l.toString(16),y=S.length<2?"0"+S:S;switch(f){case 4:return S[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}i.parseColor=function(l){if(!l)return;let f=l.toLowerCase();if(f.indexOf("rgb:")===0){f=f.slice(4);const S=a.exec(f);if(S){const y=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/y*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/y*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/y*255)]}}else if(f.indexOf("#")===0&&(f=f.slice(1),h.exec(f)&&[3,6,9,12].includes(f.length))){const S=f.length/3,y=[0,0,0];for(let v=0;v<3;++v){const t=parseInt(f.slice(S*v,S*v+S),16);y[v]=S===1?t<<4:S===2?t:S===3?t>>4:t>>8}return y}},i.toRgbString=function(l,f=16){const[S,y,v]=l;return`rgb:${d(S,f)}/${d(y,f)}/${d(v,f)}`}},5770:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const h=a(482),d=a(8742),l=a(5770),f=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}registerHandler(y,v){this._handlers[y]===void 0&&(this._handlers[y]=[]);const t=this._handlers[y];return t.push(v),{dispose:()=>{const r=t.indexOf(v);r!==-1&&t.splice(r,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0}hook(y,v){if(this.reset(),this._ident=y,this._active=this._handlers[y]||f,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(y,v,t){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(y,v,t);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(y,v,t))}unhook(y,v=!0){if(this._active.length){let t=!1,r=this._active.length-1,s=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,t=v,s=this._stack.fallThrough,this._stack.paused=!1),!s&&t===!1){for(;r>=0&&(t=this._active[r].unhook(y),t!==!0);r--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,t;r--}for(;r>=0;r--)if(t=this._active[r].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",y);this._active=f,this._ident=0}};const S=new d.Params;S.addParam(0),i.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=S,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():S,this._data="",this._hitLimit=!1}put(y,v,t){this._hitLimit||(this._data+=(0,h.utf32ToString)(y,v,t),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let v=!1;if(this._hitLimit)v=!1;else if(y&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(t=>(this._params=S,this._data="",this._hitLimit=!1,t));return this._params=S,this._data="",this._hitLimit=!1,v}}},2015:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const h=a(844),d=a(8742),l=a(6242),f=a(6351);class S{constructor(r){this.table=new Uint8Array(r)}setDefault(r,s){this.table.fill(r<<4|s)}add(r,s,o,u){this.table[s<<8|r]=o<<4|u}addMany(r,s,o,u){for(let _=0;_<r.length;_++)this.table[s<<8|r[_]]=o<<4|u}}i.TransitionTable=S;const y=160;i.VT500_TRANSITION_TABLE=function(){const t=new S(4095),r=Array.apply(null,Array(256)).map((C,c)=>c),s=(C,c)=>r.slice(C,c),o=s(32,127),u=s(0,24);u.push(25),u.push.apply(u,s(28,32));const _=s(0,14);let g;for(g in t.setDefault(1,0),t.addMany(o,0,2,0),_)t.addMany([24,26,153,154],g,3,0),t.addMany(s(128,144),g,3,0),t.addMany(s(144,152),g,3,0),t.add(156,g,0,0),t.add(27,g,11,1),t.add(157,g,4,8),t.addMany([152,158,159],g,0,7),t.add(155,g,11,3),t.add(144,g,11,9);return t.addMany(u,0,3,0),t.addMany(u,1,3,1),t.add(127,1,0,1),t.addMany(u,8,0,8),t.addMany(u,3,3,3),t.add(127,3,0,3),t.addMany(u,4,3,4),t.add(127,4,0,4),t.addMany(u,6,3,6),t.addMany(u,5,3,5),t.add(127,5,0,5),t.addMany(u,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(o,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(s(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(o,7,0,7),t.addMany(u,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(s(64,127),3,7,0),t.addMany(s(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(s(48,60),4,8,4),t.addMany(s(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(s(32,64),6,0,6),t.add(127,6,0,6),t.addMany(s(64,127),6,0,0),t.addMany(s(32,48),3,9,5),t.addMany(s(32,48),5,9,5),t.addMany(s(48,64),5,0,6),t.addMany(s(64,127),5,7,0),t.addMany(s(32,48),4,9,5),t.addMany(s(32,48),1,9,2),t.addMany(s(32,48),2,9,2),t.addMany(s(48,127),2,10,0),t.addMany(s(48,80),1,10,0),t.addMany(s(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(s(96,127),1,10,0),t.add(80,1,11,9),t.addMany(u,9,0,9),t.add(127,9,0,9),t.addMany(s(28,32),9,0,9),t.addMany(s(32,48),9,9,12),t.addMany(s(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(u,11,0,11),t.addMany(s(32,128),11,0,11),t.addMany(s(28,32),11,0,11),t.addMany(u,10,0,10),t.add(127,10,0,10),t.addMany(s(28,32),10,0,10),t.addMany(s(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(s(32,48),10,9,12),t.addMany(u,12,0,12),t.add(127,12,0,12),t.addMany(s(28,32),12,0,12),t.addMany(s(32,48),12,9,12),t.addMany(s(48,64),12,0,11),t.addMany(s(64,127),12,12,13),t.addMany(s(64,127),10,12,13),t.addMany(s(64,127),9,12,13),t.addMany(u,13,13,13),t.addMany(o,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(y,0,2,0),t.add(y,8,5,8),t.add(y,6,0,6),t.add(y,11,0,11),t.add(y,13,13,13),t}();class v extends h.Disposable{constructor(r=i.VT500_TRANSITION_TABLE){super(),this._transitions=r,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new d.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(s,o,u)=>{},this._executeHandlerFb=s=>{},this._csiHandlerFb=(s,o)=>{},this._escHandlerFb=s=>{},this._errorHandlerFb=s=>s,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new f.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(r,s=[64,126]){let o=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if(o=r.prefix.charCodeAt(0),o&&60>o||o>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let _=0;_<r.intermediates.length;++_){const g=r.intermediates.charCodeAt(_);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");o<<=8,o|=g}}if(r.final.length!==1)throw new Error("final must be a single byte");const u=r.final.charCodeAt(0);if(s[0]>u||u>s[1])throw new Error(`final must be in range ${s[0]} .. ${s[1]}`);return o<<=8,o|=u,o}identToString(r){const s=[];for(;r;)s.push(String.fromCharCode(255&r)),r>>=8;return s.reverse().join("")}setPrintHandler(r){this._printHandler=r}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(r,s){const o=this._identifier(r,[48,126]);this._escHandlers[o]===void 0&&(this._escHandlers[o]=[]);const u=this._escHandlers[o];return u.push(s),{dispose:()=>{const _=u.indexOf(s);_!==-1&&u.splice(_,1)}}}clearEscHandler(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]}setEscHandlerFallback(r){this._escHandlerFb=r}setExecuteHandler(r,s){this._executeHandlers[r.charCodeAt(0)]=s}clearExecuteHandler(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]}setExecuteHandlerFallback(r){this._executeHandlerFb=r}registerCsiHandler(r,s){const o=this._identifier(r);this._csiHandlers[o]===void 0&&(this._csiHandlers[o]=[]);const u=this._csiHandlers[o];return u.push(s),{dispose:()=>{const _=u.indexOf(s);_!==-1&&u.splice(_,1)}}}clearCsiHandler(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]}setCsiHandlerFallback(r){this._csiHandlerFb=r}registerDcsHandler(r,s){return this._dcsParser.registerHandler(this._identifier(r),s)}clearDcsHandler(r){this._dcsParser.clearHandler(this._identifier(r))}setDcsHandlerFallback(r){this._dcsParser.setHandlerFallback(r)}registerOscHandler(r,s){return this._oscParser.registerHandler(r,s)}clearOscHandler(r){this._oscParser.clearHandler(r)}setOscHandlerFallback(r){this._oscParser.setHandlerFallback(r)}setErrorHandler(r){this._errorHandler=r}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(r,s,o,u,_){this._parseStack.state=r,this._parseStack.handlers=s,this._parseStack.handlerPos=o,this._parseStack.transition=u,this._parseStack.chunkPos=_}parse(r,s,o){let u,_=0,g=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(o===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const c=this._parseStack.handlers;let b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(o===!1&&b>-1){for(;b>=0&&(u=c[b](this._params),u!==!0);b--)if(u instanceof Promise)return this._parseStack.handlerPos=b,u}this._parseStack.handlers=[];break;case 4:if(o===!1&&b>-1){for(;b>=0&&(u=c[b](),u!==!0);b--)if(u instanceof Promise)return this._parseStack.handlerPos=b,u}this._parseStack.handlers=[];break;case 6:if(_=r[this._parseStack.chunkPos],u=this._dcsParser.unhook(_!==24&&_!==26,o),u)return u;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=r[this._parseStack.chunkPos],u=this._oscParser.end(_!==24&&_!==26,o),u)return u;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let c=C;c<s;++c){switch(_=r[c],g=this._transitions.table[this.currentState<<8|(_<160?_:y)],g>>4){case 2:for(let M=c+1;;++M){if(M>=s||(_=r[M])<32||_>126&&_<y){this._printHandler(r,c,M),c=M-1;break}if(++M>=s||(_=r[M])<32||_>126&&_<y){this._printHandler(r,c,M),c=M-1;break}if(++M>=s||(_=r[M])<32||_>126&&_<y){this._printHandler(r,c,M),c=M-1;break}if(++M>=s||(_=r[M])<32||_>126&&_<y){this._printHandler(r,c,M),c=M-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:c,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const b=this._csiHandlers[this._collect<<8|_];let R=b?b.length-1:-1;for(;R>=0&&(u=b[R](this._params),u!==!0);R--)if(u instanceof Promise)return this._preserveStack(3,b,R,g,c),u;R<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++c<s&&(_=r[c])>47&&_<60);c--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:const T=this._escHandlers[this._collect<<8|_];let A=T?T.length-1:-1;for(;A>=0&&(u=T[A](),u!==!0);A--)if(u instanceof Promise)return this._preserveStack(4,T,A,g,c),u;A<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(let M=c+1;;++M)if(M>=s||(_=r[M])===24||_===26||_===27||_>127&&_<y){this._dcsParser.put(r,c,M),c=M-1;break}break;case 14:if(u=this._dcsParser.unhook(_!==24&&_!==26),u)return this._preserveStack(6,[],0,g,c),u;_===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=c+1;;M++)if(M>=s||(_=r[M])<32||_>127&&_<y){this._oscParser.put(r,c,M),c=M-1;break}break;case 6:if(u=this._oscParser.end(_!==24&&_!==26),u)return this._preserveStack(5,[],0,g,c),u;_===27&&(g|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&g}}}i.EscapeSequenceParser=v},6242:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const h=a(5770),d=a(482),l=[];i.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(f,S){this._handlers[f]===void 0&&(this._handlers[f]=[]);const y=this._handlers[f];return y.push(S),{dispose:()=>{const v=y.indexOf(S);v!==-1&&y.splice(v,1)}}}clearHandler(f){this._handlers[f]&&delete this._handlers[f]}setHandlerFallback(f){this._handlerFb=f}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let f=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;f>=0;--f)this._active[f].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].start();else this._handlerFb(this._id,"START")}_put(f,S,y){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(f,S,y);else this._handlerFb(this._id,"PUT",(0,d.utf32ToString)(f,S,y))}start(){this.reset(),this._state=1}put(f,S,y){if(this._state!==3){if(this._state===1)for(;S<y;){const v=f[S++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&y-S>0&&this._put(f,S,y)}}end(f,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,v=this._active.length-1,t=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,y=S,t=this._stack.fallThrough,this._stack.paused=!1),!t&&y===!1){for(;v>=0&&(y=this._active[v].end(f),y!==!0);v--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,y;v--}for(;v>=0;v--)if(y=this._active[v].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",f);this._active=l,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(f){this._handler=f,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(f,S,y){this._hitLimit||(this._data+=(0,d.utf32ToString)(f,S,y),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(f){let S=!1;if(this._hitLimit)S=!1;else if(f&&(S=this._handler(this._data),S instanceof Promise))return S.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,S}}},8742:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const a=2147483647;class h{static fromArray(l){const f=new h;if(!l.length)return f;for(let S=Array.isArray(l[0])?1:0;S<l.length;++S){const y=l[S];if(Array.isArray(y))for(let v=0;v<y.length;++v)f.addSubParam(y[v]);else f.addParam(y)}return f}constructor(l=32,f=32){if(this.maxLength=l,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new h(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let f=0;f<this.length;++f){l.push(this.params[f]);const S=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];y-S>0&&l.push(Array.prototype.slice.call(this._subParams,S,y))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>a?a:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>a?a:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const f=this._subParamsIdx[l]>>8,S=255&this._subParamsIdx[l];return S-f>0?this._subParams.subarray(f,S):null}getSubParamsAll(){const l={};for(let f=0;f<this.length;++f){const S=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];y-S>0&&(l[f]=this._subParams.slice(S,y))}return l}addDigit(l){let f;if(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,y=S[f-1];S[f-1]=~y?Math.min(10*y+l,a):l}}i.Params=h},5741:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,h){const d={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(d),h.dispose=()=>this._wrappedAddonDispose(d),h.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let h=-1;for(let d=0;d<this._addons.length;d++)if(this._addons[d]===a){h=d;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(h,1)}}},8771:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const h=a(3785),d=a(511);i.BufferApiView=class{constructor(l,f){this._buffer=l,this.type=f}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const f=this._buffer.lines.get(l);if(f)return new h.BufferLineApiView(f)}getNullCell(){return new d.CellData}}},3785:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const h=a(511);i.BufferLineApiView=class{constructor(d){this._line=d}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(d,l){if(!(d<0||d>=this._line.length))return l?(this._line.loadCell(d,l),l):this._line.loadCell(d,new h.CellData)}translateToString(d,l,f){return this._line.translateToString(d,l,f)}}},8285:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const h=a(8771),d=a(8460),l=a(844);class f extends l.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new d.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=f},7975:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,h){return this._core.registerCsiHandler(a,d=>h(d.toArray()))}addCsiHandler(a,h){return this.registerCsiHandler(a,h)}registerDcsHandler(a,h){return this._core.registerDcsHandler(a,(d,l)=>h(d,l.toArray()))}addDcsHandler(a,h){return this.registerDcsHandler(a,h)}registerEscHandler(a,h){return this._core.registerEscHandler(a,h)}addEscHandler(a,h){return this.registerEscHandler(a,h)}registerOscHandler(a,h){return this._core.registerOscHandler(a,h)}addOscHandler(a,h){return this.registerOscHandler(a,h)}}},7090:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(E,i,a){var h=this&&this.__decorate||function(t,r,s,o){var u,_=arguments.length,g=_<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,s,o);else for(var C=t.length-1;C>=0;C--)(u=t[C])&&(g=(_<3?u(g):_>3?u(r,s,g):u(r,s))||g);return _>3&&g&&Object.defineProperty(r,s,g),g},d=this&&this.__param||function(t,r){return function(s,o){r(s,o,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const l=a(8460),f=a(844),S=a(5295),y=a(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let v=i.BufferService=class extends f.Disposable{get buffer(){return this.buffers.active}constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(t,this))}resize(t,r){this.cols=t,this.rows=r,this.buffers.resize(t,r),this._onResize.fire({cols:t,rows:r})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,r=!1){const s=this.buffer;let o;o=this._cachedBlankLine,o&&o.length===this.cols&&o.getFg(0)===t.fg&&o.getBg(0)===t.bg||(o=s.getBlankLine(t,r),this._cachedBlankLine=o),o.isWrapped=r;const u=s.ybase+s.scrollTop,_=s.ybase+s.scrollBottom;if(s.scrollTop===0){const g=s.lines.isFull;_===s.lines.length-1?g?s.lines.recycle().copyFrom(o):s.lines.push(o.clone()):s.lines.splice(_+1,0,o.clone()),g?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{const g=_-u+1;s.lines.shiftElements(u+1,g-1,-1),s.lines.set(_,o.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(t,r,s){const o=this.buffer;if(t<0){if(o.ydisp===0)return;this.isUserScrolling=!0}else t+o.ydisp>=o.ybase&&(this.isUserScrolling=!1);const u=o.ydisp;o.ydisp=Math.max(Math.min(o.ydisp+t,o.ybase),0),u!==o.ydisp&&(r||this._onScroll.fire(o.ydisp))}};i.BufferService=v=h([d(0,y.IOptionsService)],v)},7994:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,h){this._charsets[a]=h,this.glevel===a&&(this.charset=h)}}},1753:function(E,i,a){var h=this&&this.__decorate||function(o,u,_,g){var C,c=arguments.length,b=c<3?u:g===null?g=Object.getOwnPropertyDescriptor(u,_):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(o,u,_,g);else for(var R=o.length-1;R>=0;R--)(C=o[R])&&(b=(c<3?C(b):c>3?C(u,_,b):C(u,_))||b);return c>3&&b&&Object.defineProperty(u,_,b),b},d=this&&this.__param||function(o,u){return function(_,g){u(_,g,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const l=a(2585),f=a(8460),S=a(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:o=>o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)},VT200:{events:19,restrict:o=>o.action!==32},DRAG:{events:23,restrict:o=>o.action!==32||o.button!==3},ANY:{events:31,restrict:o=>!0}};function v(o,u){let _=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(_|=64,_|=o.action):(_|=3&o.button,4&o.button&&(_|=64),8&o.button&&(_|=128),o.action===32?_|=32:o.action!==0||u||(_|=3)),_}const t=String.fromCharCode,r={DEFAULT:o=>{const u=[v(o,!1)+32,o.col+32,o.row+32];return u[0]>255||u[1]>255||u[2]>255?"":`\x1B[M${t(u[0])}${t(u[1])}${t(u[2])}`},SGR:o=>{const u=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${v(o,!0)};${o.col};${o.row}${u}`},SGR_PIXELS:o=>{const u=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${v(o,!0)};${o.x};${o.y}${u}`}};let s=i.CoreMouseService=class extends S.Disposable{constructor(o,u){super(),this._bufferService=o,this._coreService=u,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new f.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const _ of Object.keys(y))this.addProtocol(_,y[_]);for(const _ of Object.keys(r))this.addEncoding(_,r[_]);this.reset()}addProtocol(o,u){this._protocols[o]=u}addEncoding(o,u){this._encodings[o]=u}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(o){if(!this._protocols[o])throw new Error(`unknown protocol "${o}"`);this._activeProtocol=o,this._onProtocolChange.fire(this._protocols[o].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(o){if(!this._encodings[o])throw new Error(`unknown encoding "${o}"`);this._activeEncoding=o}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(o){if(o.col<0||o.col>=this._bufferService.cols||o.row<0||o.row>=this._bufferService.rows||o.button===4&&o.action===32||o.button===3&&o.action!==32||o.button!==4&&(o.action===2||o.action===3)||(o.col++,o.row++,o.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,o,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(o))return!1;const u=this._encodings[this._activeEncoding](o);return u&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(u):this._coreService.triggerDataEvent(u,!0)),this._lastEvent=o,!0}explainEvents(o){return{down:!!(1&o),up:!!(2&o),drag:!!(4&o),move:!!(8&o),wheel:!!(16&o)}}_equalEvents(o,u,_){if(_){if(o.x!==u.x||o.y!==u.y)return!1}else if(o.col!==u.col||o.row!==u.row)return!1;return o.button===u.button&&o.action===u.action&&o.ctrl===u.ctrl&&o.alt===u.alt&&o.shift===u.shift}};i.CoreMouseService=s=h([d(0,l.IBufferService),d(1,l.ICoreService)],s)},6975:function(E,i,a){var h=this&&this.__decorate||function(s,o,u,_){var g,C=arguments.length,c=C<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,u):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(s,o,u,_);else for(var b=s.length-1;b>=0;b--)(g=s[b])&&(c=(C<3?g(c):C>3?g(o,u,c):g(o,u))||c);return C>3&&c&&Object.defineProperty(o,u,c),c},d=this&&this.__param||function(s,o){return function(u,_){o(u,_,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const l=a(1439),f=a(8460),S=a(844),y=a(2585),v=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let r=i.CoreService=class extends S.Disposable{constructor(s,o,u){super(),this._bufferService=s,this._logService=o,this._optionsService=u,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new f.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new f.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new f.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new f.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(v),this.decPrivateModes=(0,l.clone)(t)}reset(){this.modes=(0,l.clone)(v),this.decPrivateModes=(0,l.clone)(t)}triggerDataEvent(s,o=!1){if(this._optionsService.rawOptions.disableStdin)return;const u=this._bufferService.buffer;o&&this._optionsService.rawOptions.scrollOnUserInput&&u.ybase!==u.ydisp&&this._onRequestScrollToBottom.fire(),o&&this._onUserInput.fire(),this._logService.debug(`sending data "${s}"`,()=>s.split("").map(_=>_.charCodeAt(0))),this._onData.fire(s)}triggerBinaryEvent(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${s}"`,()=>s.split("").map(o=>o.charCodeAt(0))),this._onBinary.fire(s))}};i.CoreService=r=h([d(0,y.IBufferService),d(1,y.ILogService),d(2,y.IOptionsService)],r)},9074:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const h=a(8055),d=a(8460),l=a(844),f=a(6106);let S=0,y=0;class v extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new f.SortedList(s=>s==null?void 0:s.marker.line),this._onDecorationRegistered=this.register(new d.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new d.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(s){if(s.marker.isDisposed)return;const o=new t(s);if(o){const u=o.marker.onDispose(()=>o.dispose());o.onDispose(()=>{o&&(this._decorations.delete(o)&&this._onDecorationRemoved.fire(o),u.dispose())}),this._decorations.insert(o),this._onDecorationRegistered.fire(o)}return o}reset(){for(const s of this._decorations.values())s.dispose();this._decorations.clear()}*getDecorationsAtCell(s,o,u){var _,g,C;let c=0,b=0;for(const R of this._decorations.getKeyIterator(o))c=(_=R.options.x)!==null&&_!==void 0?_:0,b=c+((g=R.options.width)!==null&&g!==void 0?g:1),s>=c&&s<b&&(!u||((C=R.options.layer)!==null&&C!==void 0?C:"bottom")===u)&&(yield R)}forEachDecorationAtCell(s,o,u,_){this._decorations.forEachByKey(o,g=>{var C,c,b;S=(C=g.options.x)!==null&&C!==void 0?C:0,y=S+((c=g.options.width)!==null&&c!==void 0?c:1),s>=S&&s<y&&(!u||((b=g.options.layer)!==null&&b!==void 0?b:"bottom")===u)&&_(g)})}}i.DecorationService=v;class t extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(s){super(),this.options=s,this.onRenderEmitter=this.register(new d.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=s.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const h=a(2585),d=a(8343);class l{constructor(...S){this._entries=new Map;for(const[y,v]of S)this.set(y,v)}set(S,y){const v=this._entries.get(S);return this._entries.set(S,y),v}forEach(S){for(const[y,v]of this._entries.entries())S(y,v)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}i.ServiceCollection=l,i.InstantiationService=class{constructor(){this._services=new l,this._services.set(h.IInstantiationService,this)}setService(f,S){this._services.set(f,S)}getService(f){return this._services.get(f)}createInstance(f,...S){const y=(0,d.getServiceDependencies)(f).sort((r,s)=>r.index-s.index),v=[];for(const r of y){const s=this._services.get(r.id);if(!s)throw new Error(`[createInstance] ${f.name} depends on UNKNOWN service ${r.id}.`);v.push(s)}const t=y.length>0?y[0].index:S.length;if(S.length!==t)throw new Error(`[createInstance] First service dependency of ${f.name} at position ${t+1} conflicts with ${S.length} static arguments`);return new f(...S,...v)}}},7866:function(E,i,a){var h=this&&this.__decorate||function(t,r,s,o){var u,_=arguments.length,g=_<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,s,o);else for(var C=t.length-1;C>=0;C--)(u=t[C])&&(g=(_<3?u(g):_>3?u(r,s,g):u(r,s))||g);return _>3&&g&&Object.defineProperty(r,s,g),g},d=this&&this.__param||function(t,r){return function(s,o){r(s,o,t)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const l=a(844),f=a(2585),S={trace:f.LogLevelEnum.TRACE,debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF};let y,v=i.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(t){super(),this._optionsService=t,this._logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(t){for(let r=0;r<t.length;r++)typeof t[r]=="function"&&(t[r]=t[r]())}_log(t,r,s){this._evalLazyOptionalParams(s),t.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+r,...s)}trace(t,...r){var s,o;this._logLevel<=f.LogLevelEnum.TRACE&&this._log((o=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.trace.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.log,t,r)}debug(t,...r){var s,o;this._logLevel<=f.LogLevelEnum.DEBUG&&this._log((o=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.debug.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.log,t,r)}info(t,...r){var s,o;this._logLevel<=f.LogLevelEnum.INFO&&this._log((o=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.info.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.info,t,r)}warn(t,...r){var s,o;this._logLevel<=f.LogLevelEnum.WARN&&this._log((o=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.warn.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.warn,t,r)}error(t,...r){var s,o;this._logLevel<=f.LogLevelEnum.ERROR&&this._log((o=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.error.bind(this._optionsService.options.logger))!==null&&o!==void 0?o:console.error,t,r)}};i.LogService=v=h([d(0,f.IOptionsService)],v),i.setTraceLogger=function(t){y=t},i.traceCall=function(t,r,s){if(typeof s.value!="function")throw new Error("not supported");const o=s.value;s.value=function(...u){if(y.logLevel!==f.LogLevelEnum.TRACE)return o.apply(this,u);y.trace(`GlyphRenderer#${o.name}(${u.map(g=>JSON.stringify(g)).join(", ")})`);const _=o.apply(this,u);return y.trace(`GlyphRenderer#${o.name} return`,_),_}}},7302:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const h=a(8460),d=a(844),l=a(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const f=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends d.Disposable{constructor(v){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const t=Object.assign({},i.DEFAULT_OPTIONS);for(const r in v)if(r in t)try{const s=v[r];t[r]=this._sanitizeAndValidateOption(r,s)}catch(s){console.error(s)}this.rawOptions=t,this.options=Object.assign({},t),this._setupOptions()}onSpecificOptionChange(v,t){return this.onOptionChange(r=>{r===v&&t(this.rawOptions[v])})}onMultipleOptionChange(v,t){return this.onOptionChange(r=>{v.indexOf(r)!==-1&&t()})}_setupOptions(){const v=r=>{if(!(r in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);return this.rawOptions[r]},t=(r,s)=>{if(!(r in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);s=this._sanitizeAndValidateOption(r,s),this.rawOptions[r]!==s&&(this.rawOptions[r]=s,this._onOptionChange.fire(r))};for(const r in this.rawOptions){const s={get:v.bind(this,r),set:t.bind(this,r)};Object.defineProperty(this.options,r,s)}}_sanitizeAndValidateOption(v,t){switch(v){case"cursorStyle":if(t||(t=i.DEFAULT_OPTIONS[v]),!function(r){return r==="block"||r==="underline"||r==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${v}`);break;case"wordSeparator":t||(t=i.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=f.includes(t)?t:i.DEFAULT_OPTIONS[v];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${v} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${v} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{}}return t}}i.OptionsService=S},2660:function(E,i,a){var h=this&&this.__decorate||function(S,y,v,t){var r,s=arguments.length,o=s<3?y:t===null?t=Object.getOwnPropertyDescriptor(y,v):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(S,y,v,t);else for(var u=S.length-1;u>=0;u--)(r=S[u])&&(o=(s<3?r(o):s>3?r(y,v,o):r(y,v))||o);return s>3&&o&&Object.defineProperty(y,v,o),o},d=this&&this.__param||function(S,y){return function(v,t){y(v,t,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const l=a(2585);let f=i.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const y=this._bufferService.buffer;if(S.id===void 0){const u=y.addMarker(y.ybase+y.y),_={data:S,id:this._nextId++,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(_,u)),this._dataByLinkId.set(_.id,_),_.id}const v=S,t=this._getEntryIdKey(v),r=this._entriesWithId.get(t);if(r)return this.addLineToLink(r.id,y.ybase+y.y),r.id;const s=y.addMarker(y.ybase+y.y),o={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[s]};return s.onDispose(()=>this._removeMarkerFromLink(o,s)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(S,y){const v=this._dataByLinkId.get(S);if(v&&v.lines.every(t=>t.line!==y)){const t=this._bufferService.buffer.addMarker(y);v.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(v,t))}}getLinkData(S){var y;return(y=this._dataByLinkId.get(S))===null||y===void 0?void 0:y.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,y){const v=S.lines.indexOf(y);v!==-1&&(S.lines.splice(v,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};i.OscLinkService=f=h([d(0,l.IBufferService)],f)},8343:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const a="di$target",h="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(d){return d[h]||[]},i.createDecorator=function(d){if(i.serviceRegistry.has(d))return i.serviceRegistry.get(d);const l=function(f,S,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,t,r){t[a]===t?t[h].push({id:v,index:r}):(t[h]=[{id:v,index:r}],t[a]=t)})(l,f,y)};return l.toString=()=>d,i.serviceRegistry.set(d,l),l}},2585:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const h=a(8343);var d;i.IBufferService=(0,h.createDecorator)("BufferService"),i.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),i.ICoreService=(0,h.createDecorator)("CoreService"),i.ICharsetService=(0,h.createDecorator)("CharsetService"),i.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(d||(i.LogLevelEnum=d={})),i.ILogService=(0,h.createDecorator)("LogService"),i.IOptionsService=(0,h.createDecorator)("OptionsService"),i.IOscLinkService=(0,h.createDecorator)("OscLinkService"),i.IUnicodeService=(0,h.createDecorator)("UnicodeService"),i.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const h=a(8460),d=a(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const l=new d.UnicodeV6;this.register(l),this._active=l.version,this._activeProvider=l}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(l){if(!this._providers[l])throw new Error(`unknown Unicode version "${l}"`);this._active=l,this._activeProvider=this._providers[l],this._onChange.fire(l)}register(l){this._providers[l.version]=l}wcwidth(l){return this._activeProvider.wcwidth(l)}getStringCellWidth(l){let f=0;const S=l.length;for(let y=0;y<S;++y){let v=l.charCodeAt(y);if(55296<=v&&v<=56319){if(++y>=S)return f+this.wcwidth(v);const t=l.charCodeAt(y);56320<=t&&t<=57343?v=1024*(v-55296)+t-56320+65536:f+=this.wcwidth(t)}f+=this.wcwidth(v)}return f}}}},m={};function w(E){var i=m[E];if(i!==void 0)return i.exports;var a=m[E]={exports:{}};return p[E].call(a.exports,a,a.exports,w),a.exports}var x={};return(()=>{var E=x;Object.defineProperty(E,"__esModule",{value:!0}),E.Terminal=void 0;const i=w(9042),a=w(3236),h=w(844),d=w(5741),l=w(8285),f=w(7975),S=w(7090),y=["cols","rows"];class v extends h.Disposable{constructor(r){super(),this._core=this.register(new a.Terminal(r)),this._addonManager=this.register(new d.AddonManager),this._publicOptions=Object.assign({},this._core.options);const s=u=>this._core.options[u],o=(u,_)=>{this._checkReadonlyOptions(u),this._core.options[u]=_};for(const u in this._core.options){const _={get:s.bind(this,u),set:o.bind(this,u)};Object.defineProperty(this._publicOptions,u,_)}}_checkReadonlyOptions(r){if(y.includes(r))throw new Error(`Option "${r}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new f.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const r=this._core.coreService.decPrivateModes;let s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}}get options(){return this._publicOptions}set options(r){for(const s in r)this._publicOptions[s]=r[s]}blur(){this._core.blur()}focus(){this._core.focus()}resize(r,s){this._verifyIntegers(r,s),this._core.resize(r,s)}open(r){this._core.open(r)}attachCustomKeyEventHandler(r){this._core.attachCustomKeyEventHandler(r)}registerLinkProvider(r){return this._core.registerLinkProvider(r)}registerCharacterJoiner(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)}deregisterCharacterJoiner(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)}registerMarker(r=0){return this._verifyIntegers(r),this._core.registerMarker(r)}registerDecoration(r){var s,o,u;return this._checkProposedApi(),this._verifyPositiveIntegers((s=r.x)!==null&&s!==void 0?s:0,(o=r.width)!==null&&o!==void 0?o:0,(u=r.height)!==null&&u!==void 0?u:0),this._core.registerDecoration(r)}hasSelection(){return this._core.hasSelection()}select(r,s,o){this._verifyIntegers(r,s,o),this._core.select(r,s,o)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(r,s){this._verifyIntegers(r,s),this._core.selectLines(r,s)}dispose(){super.dispose()}scrollLines(r){this._verifyIntegers(r),this._core.scrollLines(r)}scrollPages(r){this._verifyIntegers(r),this._core.scrollPages(r)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(r){this._verifyIntegers(r),this._core.scrollToLine(r)}clear(){this._core.clear()}write(r,s){this._core.write(r,s)}writeln(r,s){this._core.write(r),this._core.write(`\r
`,s)}paste(r){this._core.paste(r)}refresh(r,s){this._verifyIntegers(r,s),this._core.refresh(r,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(r){this._addonManager.loadAddon(this,r)}static get strings(){return i}_verifyIntegers(...r){for(const s of r)if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...r){for(const s of r)if(s&&(s===1/0||isNaN(s)||s%1!=0||s<0))throw new Error("This API only accepts positive integers")}}E.Terminal=v})(),x})())})(_r);var Yo=_r.exports,vr={exports:{}};(function(e,n){(function(p,m){e.exports=m()})(self,()=>(()=>{var p={};return(()=>{var m=p;function w(x,E,i){return x.addEventListener(E,i),{dispose:()=>{i&&x.removeEventListener(E,i)}}}Object.defineProperty(m,"__esModule",{value:!0}),m.AttachAddon=void 0,m.AttachAddon=class{constructor(x,E){this._disposables=[],this._socket=x,this._socket.binaryType="arraybuffer",this._bidirectional=!(E&&E.bidirectional===!1)}activate(x){this._disposables.push(w(this._socket,"message",E=>{const i=E.data;x.write(typeof i=="string"?i:new Uint8Array(i))})),this._bidirectional&&(this._disposables.push(x.onData(E=>this._sendData(E))),this._disposables.push(x.onBinary(E=>this._sendBinary(E)))),this._disposables.push(w(this._socket,"close",()=>this.dispose())),this._disposables.push(w(this._socket,"error",()=>this.dispose()))}dispose(){for(const x of this._disposables)x.dispose()}_sendData(x){this._checkOpenSocket()&&this._socket.send(x)}_sendBinary(x){if(!this._checkOpenSocket())return;const E=new Uint8Array(x.length);for(let i=0;i<x.length;++i)E[i]=255&x.charCodeAt(i);this._socket.send(E)}_checkOpenSocket(){switch(this._socket.readyState){case WebSocket.OPEN:return!0;case WebSocket.CONNECTING:throw new Error("Attach addon was loaded before socket was open");case WebSocket.CLOSING:return console.warn("Attach addon socket is closing"),!1;case WebSocket.CLOSED:throw new Error("Attach addon socket is closed");default:throw new Error("Unexpected socket state")}}}})(),p})())})(vr);var Zo=vr.exports,gr={exports:{}};(function(e,n){(function(p,m){e.exports=m()})(self,()=>(()=>{var p={};return(()=>{var m=p;Object.defineProperty(m,"__esModule",{value:!0}),m.FitAddon=void 0,m.FitAddon=class{activate(w){this._terminal=w}dispose(){}fit(){const w=this.proposeDimensions();if(!w||!this._terminal||isNaN(w.cols)||isNaN(w.rows))return;const x=this._terminal._core;this._terminal.rows===w.rows&&this._terminal.cols===w.cols||(x._renderService.clear(),this._terminal.resize(w.cols,w.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const w=this._terminal._core,x=w._renderService.dimensions;if(x.css.cell.width===0||x.css.cell.height===0)return;const E=this._terminal.options.scrollback===0?0:w.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(i.getPropertyValue("height")),h=Math.max(0,parseInt(i.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),l=a-(parseInt(d.getPropertyValue("padding-top"))+parseInt(d.getPropertyValue("padding-bottom"))),f=h-(parseInt(d.getPropertyValue("padding-right"))+parseInt(d.getPropertyValue("padding-left")))-E;return{cols:Math.max(2,Math.floor(f/x.css.cell.width)),rows:Math.max(1,Math.floor(l/x.css.cell.height))}}}})(),p})())})(gr);var Qo=gr.exports,mr={exports:{}};(function(e,n){(function(p,m){e.exports=m()})(fr,()=>(()=>{var p={930:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const h=a(485);i.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(d,l,f){this._css.set(d,l,f)}getCss(d,l){return this._css.get(d,l)}setColor(d,l,f){this._color.set(d,l,f)}getColor(d,l){return this._color.get(d,l)}clear(){this._color.clear(),this._css.clear()}}},997:function(E,i,a){var h=this&&this.__decorate||function(C,c,b,R){var T,A=arguments.length,M=A<3?c:R===null?R=Object.getOwnPropertyDescriptor(c,b):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(C,c,b,R);else for(var F=C.length-1;F>=0;F--)(T=C[F])&&(M=(A<3?T(M):A>3?T(c,b,M):T(c,b))||M);return A>3&&M&&Object.defineProperty(c,b,M),M},d=this&&this.__param||function(C,c){return function(b,R){c(b,R,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const l=a(930),f=a(160),S=a(345),y=a(859),v=a(97),t=f.css.toColor("#ffffff"),r=f.css.toColor("#000000"),s=f.css.toColor("#ffffff"),o=f.css.toColor("#000000"),u={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const C=[f.css.toColor("#2e3436"),f.css.toColor("#cc0000"),f.css.toColor("#4e9a06"),f.css.toColor("#c4a000"),f.css.toColor("#3465a4"),f.css.toColor("#75507b"),f.css.toColor("#06989a"),f.css.toColor("#d3d7cf"),f.css.toColor("#555753"),f.css.toColor("#ef2929"),f.css.toColor("#8ae234"),f.css.toColor("#fce94f"),f.css.toColor("#729fcf"),f.css.toColor("#ad7fa8"),f.css.toColor("#34e2e2"),f.css.toColor("#eeeeec")],c=[0,95,135,175,215,255];for(let b=0;b<216;b++){const R=c[b/36%6|0],T=c[b/6%6|0],A=c[b%6];C.push({css:f.channels.toCss(R,T,A),rgba:f.channels.toRgba(R,T,A)})}for(let b=0;b<24;b++){const R=8+10*b;C.push({css:f.channels.toCss(R,R,R),rgba:f.channels.toRgba(R,R,R)})}return C})());let _=i.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(C){super(),this._optionsService=C,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:t,background:r,cursor:s,cursorAccent:o,selectionForeground:void 0,selectionBackgroundTransparent:u,selectionBackgroundOpaque:f.color.blend(r,u),selectionInactiveBackgroundTransparent:u,selectionInactiveBackgroundOpaque:f.color.blend(r,u),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(C={}){const c=this._colors;if(c.foreground=g(C.foreground,t),c.background=g(C.background,r),c.cursor=g(C.cursor,s),c.cursorAccent=g(C.cursorAccent,o),c.selectionBackgroundTransparent=g(C.selectionBackground,u),c.selectionBackgroundOpaque=f.color.blend(c.background,c.selectionBackgroundTransparent),c.selectionInactiveBackgroundTransparent=g(C.selectionInactiveBackground,c.selectionBackgroundTransparent),c.selectionInactiveBackgroundOpaque=f.color.blend(c.background,c.selectionInactiveBackgroundTransparent),c.selectionForeground=C.selectionForeground?g(C.selectionForeground,f.NULL_COLOR):void 0,c.selectionForeground===f.NULL_COLOR&&(c.selectionForeground=void 0),f.color.isOpaque(c.selectionBackgroundTransparent)&&(c.selectionBackgroundTransparent=f.color.opacity(c.selectionBackgroundTransparent,.3)),f.color.isOpaque(c.selectionInactiveBackgroundTransparent)&&(c.selectionInactiveBackgroundTransparent=f.color.opacity(c.selectionInactiveBackgroundTransparent,.3)),c.ansi=i.DEFAULT_ANSI_COLORS.slice(),c.ansi[0]=g(C.black,i.DEFAULT_ANSI_COLORS[0]),c.ansi[1]=g(C.red,i.DEFAULT_ANSI_COLORS[1]),c.ansi[2]=g(C.green,i.DEFAULT_ANSI_COLORS[2]),c.ansi[3]=g(C.yellow,i.DEFAULT_ANSI_COLORS[3]),c.ansi[4]=g(C.blue,i.DEFAULT_ANSI_COLORS[4]),c.ansi[5]=g(C.magenta,i.DEFAULT_ANSI_COLORS[5]),c.ansi[6]=g(C.cyan,i.DEFAULT_ANSI_COLORS[6]),c.ansi[7]=g(C.white,i.DEFAULT_ANSI_COLORS[7]),c.ansi[8]=g(C.brightBlack,i.DEFAULT_ANSI_COLORS[8]),c.ansi[9]=g(C.brightRed,i.DEFAULT_ANSI_COLORS[9]),c.ansi[10]=g(C.brightGreen,i.DEFAULT_ANSI_COLORS[10]),c.ansi[11]=g(C.brightYellow,i.DEFAULT_ANSI_COLORS[11]),c.ansi[12]=g(C.brightBlue,i.DEFAULT_ANSI_COLORS[12]),c.ansi[13]=g(C.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),c.ansi[14]=g(C.brightCyan,i.DEFAULT_ANSI_COLORS[14]),c.ansi[15]=g(C.brightWhite,i.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){const b=Math.min(c.ansi.length-16,C.extendedAnsi.length);for(let R=0;R<b;R++)c.ansi[R+16]=g(C.extendedAnsi[R],i.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let c=0;c<this._restoreColors.ansi.length;++c)this._colors.ansi[c]=this._restoreColors.ansi[c]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function g(C,c){if(C!==void 0)try{return f.css.toColor(C)}catch{}return c}i.ThemeService=_=h([d(0,v.IOptionsService)],_)},160:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const h=a(399);let d=0,l=0,f=0,S=0;var y,v,t,r,s;function o(_){const g=_.toString(16);return g.length<2?"0"+g:g}function u(_,g){return _<g?(g+.05)/(_+.05):(_+.05)/(g+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(g,C,c,b){return b!==void 0?`#${o(g)}${o(C)}${o(c)}${o(b)}`:`#${o(g)}${o(C)}${o(c)}`},_.toRgba=function(g,C,c,b=255){return(g<<24|C<<16|c<<8|b)>>>0}}(y||(i.channels=y={})),function(_){function g(C,c){return S=Math.round(255*c),[d,l,f]=s.toChannels(C.rgba),{css:y.toCss(d,l,f,S),rgba:y.toRgba(d,l,f,S)}}_.blend=function(C,c){if(S=(255&c.rgba)/255,S===1)return{css:c.css,rgba:c.rgba};const b=c.rgba>>24&255,R=c.rgba>>16&255,T=c.rgba>>8&255,A=C.rgba>>24&255,M=C.rgba>>16&255,F=C.rgba>>8&255;return d=A+Math.round((b-A)*S),l=M+Math.round((R-M)*S),f=F+Math.round((T-F)*S),{css:y.toCss(d,l,f),rgba:y.toRgba(d,l,f)}},_.isOpaque=function(C){return(255&C.rgba)==255},_.ensureContrastRatio=function(C,c,b){const R=s.ensureContrastRatio(C.rgba,c.rgba,b);if(R)return s.toColor(R>>24&255,R>>16&255,R>>8&255)},_.opaque=function(C){const c=(255|C.rgba)>>>0;return[d,l,f]=s.toChannels(c),{css:y.toCss(d,l,f),rgba:c}},_.opacity=g,_.multiplyOpacity=function(C,c){return S=255&C.rgba,g(C,S*c/255)},_.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}}(v||(i.color=v={})),function(_){let g,C;if(!h.isNode){const c=document.createElement("canvas");c.width=1,c.height=1;const b=c.getContext("2d",{willReadFrequently:!0});b&&(g=b,g.globalCompositeOperation="copy",C=g.createLinearGradient(0,0,1,1))}_.toColor=function(c){if(c.match(/#[\da-f]{3,8}/i))switch(c.length){case 4:return d=parseInt(c.slice(1,2).repeat(2),16),l=parseInt(c.slice(2,3).repeat(2),16),f=parseInt(c.slice(3,4).repeat(2),16),s.toColor(d,l,f);case 5:return d=parseInt(c.slice(1,2).repeat(2),16),l=parseInt(c.slice(2,3).repeat(2),16),f=parseInt(c.slice(3,4).repeat(2),16),S=parseInt(c.slice(4,5).repeat(2),16),s.toColor(d,l,f,S);case 7:return{css:c,rgba:(parseInt(c.slice(1),16)<<8|255)>>>0};case 9:return{css:c,rgba:parseInt(c.slice(1),16)>>>0}}const b=c.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return d=parseInt(b[1]),l=parseInt(b[2]),f=parseInt(b[3]),S=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),s.toColor(d,l,f,S);if(!g||!C)throw new Error("css.toColor: Unsupported css format");if(g.fillStyle=C,g.fillStyle=c,typeof g.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(g.fillRect(0,0,1,1),[d,l,f,S]=g.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:y.toRgba(d,l,f,S),css:c}}}(t||(i.css=t={})),function(_){function g(C,c,b){const R=C/255,T=c/255,A=b/255;return .2126*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.7152*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}_.relativeLuminance=function(C){return g(C>>16&255,C>>8&255,255&C)},_.relativeLuminance2=g}(r||(i.rgb=r={})),function(_){function g(c,b,R){const T=c>>24&255,A=c>>16&255,M=c>>8&255;let F=b>>24&255,$=b>>16&255,j=b>>8&255,N=u(r.relativeLuminance2(F,$,j),r.relativeLuminance2(T,A,M));for(;N<R&&(F>0||$>0||j>0);)F-=Math.max(0,Math.ceil(.1*F)),$-=Math.max(0,Math.ceil(.1*$)),j-=Math.max(0,Math.ceil(.1*j)),N=u(r.relativeLuminance2(F,$,j),r.relativeLuminance2(T,A,M));return(F<<24|$<<16|j<<8|255)>>>0}function C(c,b,R){const T=c>>24&255,A=c>>16&255,M=c>>8&255;let F=b>>24&255,$=b>>16&255,j=b>>8&255,N=u(r.relativeLuminance2(F,$,j),r.relativeLuminance2(T,A,M));for(;N<R&&(F<255||$<255||j<255);)F=Math.min(255,F+Math.ceil(.1*(255-F))),$=Math.min(255,$+Math.ceil(.1*(255-$))),j=Math.min(255,j+Math.ceil(.1*(255-j))),N=u(r.relativeLuminance2(F,$,j),r.relativeLuminance2(T,A,M));return(F<<24|$<<16|j<<8|255)>>>0}_.ensureContrastRatio=function(c,b,R){const T=r.relativeLuminance(c>>8),A=r.relativeLuminance(b>>8);if(u(T,A)<R){if(A<T){const $=g(c,b,R),j=u(T,r.relativeLuminance($>>8));if(j<R){const N=C(c,b,R);return j>u(T,r.relativeLuminance(N>>8))?$:N}return $}const M=C(c,b,R),F=u(T,r.relativeLuminance(M>>8));if(F<R){const $=g(c,b,R);return F>u(T,r.relativeLuminance($>>8))?M:$}return M}},_.reduceLuminance=g,_.increaseLuminance=C,_.toChannels=function(c){return[c>>24&255,c>>16&255,c>>8&255,255&c]},_.toColor=function(c,b,R,T){return{css:y.toCss(c,b,R,T),rgba:y.toRgba(c,b,R,T)}}}(s||(i.rgba=s={})),i.toPaddedHex=o,i.contrastRatio=u},345:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===a)return void this._listeners.splice(h,1)}}})),this._event}fire(a,h){const d=[];for(let l=0;l<this._listeners.length;l++)d.push(this._listeners[l]);for(let l=0;l<d.length;l++)d[l].call(void 0,a,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(a,h){return a(d=>h.fire(d))}},859:(E,i)=>{function a(h){for(const d of h)d.dispose();h.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const d=this._disposables.indexOf(h);d!==-1&&this._disposables.splice(d,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var d;this._isDisposed||h===this._value||((d=this._value)===null||d===void 0||d.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)===null||h===void 0||h.dispose(),this._value=void 0}},i.toDisposable=function(h){return{dispose:h}},i.disposeArray=a,i.getDisposeArrayDisposable=function(h){return{dispose:()=>a(h)}}},485:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(d,l,f){this._data[d]||(this._data[d]={}),this._data[d][l]=f}get(d,l){return this._data[d]?this._data[d][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=a,i.FourKeyMap=class{constructor(){this._data=new a}set(h,d,l,f,S){this._data.get(h,d)||this._data.set(h,d,new a),this._data.get(h,d).set(l,f,S)}get(h,d,l,f){var S;return(S=this._data.get(h,d))===null||S===void 0?void 0:S.get(l,f)}clear(){this._data.clear()}}},399:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const a=i.isNode?"node":navigator.userAgent,h=i.isNode?"node":navigator.platform;i.isFirefox=a.includes("Firefox"),i.isLegacyEdge=a.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(a),i.getSafariVersion=function(){if(!i.isSafari)return 0;const d=a.match(/Version\/(\d+)/);return d===null||d.length<2?0:parseInt(d[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),i.isIpad=h==="iPad",i.isIphone=h==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),i.isLinux=h.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(a)},726:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const a="di$target",h="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(d){return d[h]||[]},i.createDecorator=function(d){if(i.serviceRegistry.has(d))return i.serviceRegistry.get(d);const l=function(f,S,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,t,r){t[a]===t?t[h].push({id:v,index:r}):(t[h]=[{id:v,index:r}],t[a]=t)})(l,f,y)};return l.toString=()=>d,i.serviceRegistry.set(d,l),l}},97:(E,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const h=a(726);var d;i.IBufferService=(0,h.createDecorator)("BufferService"),i.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),i.ICoreService=(0,h.createDecorator)("CoreService"),i.ICharsetService=(0,h.createDecorator)("CharsetService"),i.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(d||(i.LogLevelEnum=d={})),i.ILogService=(0,h.createDecorator)("LogService"),i.IOptionsService=(0,h.createDecorator)("OptionsService"),i.IOscLinkService=(0,h.createDecorator)("OscLinkService"),i.IUnicodeService=(0,h.createDecorator)("UnicodeService"),i.IDecorationService=(0,h.createDecorator)("DecorationService")}},m={};function w(E){var i=m[E];if(i!==void 0)return i.exports;var a=m[E]={exports:{}};return p[E].call(a.exports,a,a.exports,w),a.exports}var x={};return(()=>{var E=x;Object.defineProperty(E,"__esModule",{value:!0}),E.HTMLSerializeHandler=E.SerializeAddon=void 0;const i=w(997);function a(v,t,r){return Math.max(t,Math.min(v,r))}class h{constructor(t){this._buffer=t}serialize(t){const r=this._buffer.getNullCell(),s=this._buffer.getNullCell();let o=r;const u=t.start.x,_=t.end.x,g=t.start.y,C=t.end.y;this._beforeSerialize(_-u,u,_);for(let c=u;c<=_;c++){const b=this._buffer.getLine(c);if(b){const R=c!==t.start.x?0:g,T=c!==t.end.x?b.length:C;for(let A=R;A<T;A++){const M=b.getCell(A,o===r?s:r);M?(this._nextCell(M,o,c,A),o=M):console.warn(`Can't get cell at row=${c}, col=${A}`)}}this._rowEnd(c,c===_)}return this._afterSerialize(),this._serializeString()}_nextCell(t,r,s,o){}_rowEnd(t,r){}_beforeSerialize(t,r,s){}_afterSerialize(){}_serializeString(){return""}}function d(v,t){return v.getFgColorMode()===t.getFgColorMode()&&v.getFgColor()===t.getFgColor()}function l(v,t){return v.getBgColorMode()===t.getBgColorMode()&&v.getBgColor()===t.getBgColor()}function f(v,t){return v.isInverse()===t.isInverse()&&v.isBold()===t.isBold()&&v.isUnderline()===t.isUnderline()&&v.isOverline()===t.isOverline()&&v.isBlink()===t.isBlink()&&v.isInvisible()===t.isInvisible()&&v.isItalic()===t.isItalic()&&v.isDim()===t.isDim()&&v.isStrikethrough()===t.isStrikethrough()}class S extends h{constructor(t,r){super(t),this._terminal=r,this._rowIndex=0,this._allRows=new Array,this._allRowSeparators=new Array,this._currentRow="",this._nullCellCount=0,this._cursorStyle=this._buffer.getNullCell(),this._cursorStyleRow=0,this._cursorStyleCol=0,this._backgroundCell=this._buffer.getNullCell(),this._firstRow=0,this._lastCursorRow=0,this._lastCursorCol=0,this._lastContentCursorRow=0,this._lastContentCursorCol=0,this._thisRowLastChar=this._buffer.getNullCell(),this._thisRowLastSecondChar=this._buffer.getNullCell(),this._nextRowFirstChar=this._buffer.getNullCell()}_beforeSerialize(t,r,s){this._allRows=new Array(t),this._lastContentCursorRow=r,this._lastCursorRow=r,this._firstRow=r}_rowEnd(t,r){var s;this._nullCellCount>0&&!l(this._cursorStyle,this._backgroundCell)&&(this._currentRow+=`\x1B[${this._nullCellCount}X`);let o="";if(!r){t-this._firstRow>=this._terminal.rows&&((s=this._buffer.getLine(this._cursorStyleRow))===null||s===void 0||s.getCell(this._cursorStyleCol,this._backgroundCell));const u=this._buffer.getLine(t),_=this._buffer.getLine(t+1);if(_.isWrapped){o="";const g=u.getCell(u.length-1,this._thisRowLastChar),C=u.getCell(u.length-2,this._thisRowLastSecondChar),c=_.getCell(0,this._nextRowFirstChar),b=c.getWidth()>1;let R=!1;(c.getChars()&&b?this._nullCellCount<=1:this._nullCellCount<=0)&&((g.getChars()||g.getWidth()===0)&&l(g,c)&&(R=!0),b&&(C.getChars()||C.getWidth()===0)&&l(g,c)&&l(C,c)&&(R=!0)),R||(o="-".repeat(this._nullCellCount+1),o+="\x1B[1D\x1B[1X",this._nullCellCount>0&&(o+="\x1B[A",o+=`\x1B[${u.length-this._nullCellCount}C`,o+=`\x1B[${this._nullCellCount}X`,o+=`\x1B[${u.length-this._nullCellCount}D`,o+="\x1B[B"),this._lastContentCursorRow=t+1,this._lastContentCursorCol=0,this._lastCursorRow=t+1,this._lastCursorCol=0)}else o=`\r
`,this._lastCursorRow=t+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=o,this._currentRow="",this._nullCellCount=0}_diffStyle(t,r){const s=[],o=!d(t,r),u=!l(t,r),_=!f(t,r);if(o||u||_)if(t.isAttributeDefault())r.isAttributeDefault()||s.push(0);else{if(o){const g=t.getFgColor();t.isFgRGB()?s.push(38,2,g>>>16&255,g>>>8&255,255&g):t.isFgPalette()?g>=16?s.push(38,5,g):s.push(8&g?90+(7&g):30+(7&g)):s.push(39)}if(u){const g=t.getBgColor();t.isBgRGB()?s.push(48,2,g>>>16&255,g>>>8&255,255&g):t.isBgPalette()?g>=16?s.push(48,5,g):s.push(8&g?100+(7&g):40+(7&g)):s.push(49)}_&&(t.isInverse()!==r.isInverse()&&s.push(t.isInverse()?7:27),t.isBold()!==r.isBold()&&s.push(t.isBold()?1:22),t.isUnderline()!==r.isUnderline()&&s.push(t.isUnderline()?4:24),t.isOverline()!==r.isOverline()&&s.push(t.isOverline()?53:55),t.isBlink()!==r.isBlink()&&s.push(t.isBlink()?5:25),t.isInvisible()!==r.isInvisible()&&s.push(t.isInvisible()?8:28),t.isItalic()!==r.isItalic()&&s.push(t.isItalic()?3:23),t.isDim()!==r.isDim()&&s.push(t.isDim()?2:22),t.isStrikethrough()!==r.isStrikethrough()&&s.push(t.isStrikethrough()?9:29))}return s}_nextCell(t,r,s,o){if(t.getWidth()===0)return;const u=t.getChars()==="",_=this._diffStyle(t,this._cursorStyle);if(u?!l(this._cursorStyle,t):_.length>0){this._nullCellCount>0&&(l(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=s,this._lastContentCursorCol=this._lastCursorCol=o,this._currentRow+=`\x1B[${_.join(";")}m`;const g=this._buffer.getLine(s);g!==void 0&&(g.getCell(o,this._cursorStyle),this._cursorStyleRow=s,this._cursorStyleCol=o)}u?this._nullCellCount+=t.getWidth():(this._nullCellCount>0&&(l(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._currentRow+=t.getChars(),this._lastContentCursorRow=this._lastCursorRow=s,this._lastContentCursorCol=this._lastCursorCol=o+t.getWidth())}_serializeString(){let t=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(t=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);let r="";for(let C=0;C<t;C++)r+=this._allRows[C],C+1<t&&(r+=this._allRowSeparators[C]);const s=this._buffer.baseY+this._buffer.cursorY,o=this._buffer.cursorX;var u;(s!==this._lastCursorRow||o!==this._lastCursorCol)&&((u=s-this._lastCursorRow)>0?r+=`\x1B[${u}B`:u<0&&(r+=`\x1B[${-u}A`),(C=>{C>0?r+=`\x1B[${C}C`:C<0&&(r+=`\x1B[${-C}D`)})(o-this._lastCursorCol));const _=this._terminal._core._inputHandler._curAttrData,g=this._diffStyle(_,this._cursorStyle);return g.length>0&&(r+=`\x1B[${g.join(";")}m`),r}}E.SerializeAddon=class{activate(v){this._terminal=v}_serializeBuffer(v,t,r){const s=t.length,o=new S(t,v),u=r===void 0?s:a(r+v.rows,0,s);return o.serialize({start:{x:s-u,y:0},end:{x:s-1,y:v.cols}})}_serializeBufferAsHTML(v,t){var r,s;const o=v.buffer.active,u=new y(o,v,t);if((r=t.onlySelection)===null||r===void 0||!r){const g=o.length,C=t.scrollback,c=C===void 0?g:a(C+v.rows,0,g);return u.serialize({start:{x:g-c,y:0},end:{x:g-1,y:v.cols}})}const _=(s=this._terminal)===null||s===void 0?void 0:s.getSelectionPosition();return _!==void 0?u.serialize({start:{x:_.start.y,y:_.start.x},end:{x:_.end.y,y:_.end.x}}):""}_serializeModes(v){let t="";const r=v.modes;if(r.applicationCursorKeysMode&&(t+="\x1B[?1h"),r.applicationKeypadMode&&(t+="\x1B[?66h"),r.bracketedPasteMode&&(t+="\x1B[?2004h"),r.insertMode&&(t+="\x1B[4h"),r.originMode&&(t+="\x1B[?6h"),r.reverseWraparoundMode&&(t+="\x1B[?45h"),r.sendFocusMode&&(t+="\x1B[?1004h"),r.wraparoundMode===!1&&(t+="\x1B[?7l"),r.mouseTrackingMode!=="none")switch(r.mouseTrackingMode){case"x10":t+="\x1B[?9h";break;case"vt200":t+="\x1B[?1000h";break;case"drag":t+="\x1B[?1002h";break;case"any":t+="\x1B[?1003h"}return t}serialize(v){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let t=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,v==null?void 0:v.scrollback);return v!=null&&v.excludeAltBuffer||this._terminal.buffer.active.type!=="alternate"||(t+=`\x1B[?1049h\x1B[H${this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)}`),v!=null&&v.excludeModes||(t+=this._serializeModes(this._terminal)),t}serializeAsHTML(v){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._serializeBufferAsHTML(this._terminal,v||{})}dispose(){}};class y extends h{constructor(t,r,s){super(t),this._terminal=r,this._options=s,this._currentRow="",this._htmlContent="",r._core._themeService?this._ansiColors=r._core._themeService.colors.ansi:this._ansiColors=i.DEFAULT_ANSI_COLORS}_padStart(t,r,s){return r>>=0,s=s??" ",t.length>r?t:((r-=t.length)>s.length&&(s+=s.repeat(r/s.length)),s.slice(0,r)+t)}_beforeSerialize(t,r,s){var o,u,_,g,C;this._htmlContent+="<html><body><!--StartFragment--><pre>";let c="#000000",b="#ffffff";(o=this._options.includeGlobalBackground)!==null&&o!==void 0&&o&&(c=(_=(u=this._terminal.options.theme)===null||u===void 0?void 0:u.foreground)!==null&&_!==void 0?_:"#ffffff",b=(C=(g=this._terminal.options.theme)===null||g===void 0?void 0:g.background)!==null&&C!==void 0?C:"#000000");const R=[];R.push("color: "+c+";"),R.push("background-color: "+b+";"),R.push("font-family: "+this._terminal.options.fontFamily+";"),R.push("font-size: "+this._terminal.options.fontSize+"px;"),this._htmlContent+="<div style='"+R.join(" ")+"'>"}_afterSerialize(){this._htmlContent+="</div>",this._htmlContent+="</pre><!--EndFragment--></body></html>"}_rowEnd(t,r){this._htmlContent+="<div><span>"+this._currentRow+"</span></div>",this._currentRow=""}_getHexColor(t,r){const s=r?t.getFgColor():t.getBgColor();return(r?t.isFgRGB():t.isBgRGB())?[s>>16&255,s>>8&255,255&s].map(o=>this._padStart(o.toString(16),2,"0")).join(""):(r?t.isFgPalette():t.isBgPalette())?this._ansiColors[s].css:void 0}_diffStyle(t,r){const s=[],o=!d(t,r),u=!l(t,r),_=!f(t,r);if(o||u||_){const g=this._getHexColor(t,!0);g&&s.push("color: "+g+";");const C=this._getHexColor(t,!1);return C&&s.push("background-color: "+C+";"),t.isInverse()&&s.push("color: #000000; background-color: #BFBFBF;"),t.isBold()&&s.push("font-weight: bold;"),t.isUnderline()&&t.isOverline()?s.push("text-decoration: overline underline;"):t.isUnderline()?s.push("text-decoration: underline;"):t.isOverline()&&s.push("text-decoration: overline;"),t.isBlink()&&s.push("text-decoration: blink;"),t.isInvisible()&&s.push("visibility: hidden;"),t.isItalic()&&s.push("font-style: italic;"),t.isDim()&&s.push("opacity: 0.5;"),t.isStrikethrough()&&s.push("text-decoration: line-through;"),s}}_nextCell(t,r,s,o){if(t.getWidth()===0)return;const u=t.getChars()==="",_=this._diffStyle(t,r);_&&(this._currentRow+=_.length===0?"</span><span>":"</span><span style='"+_.join(" ")+"'>"),this._currentRow+=u?" ":t.getChars()}_serializeString(){return this._htmlContent}}E.HTMLSerializeHandler=y})(),x})())})(mr);var ea=mr.exports,Sr={exports:{}};(function(e,n){(function(p,m){e.exports=m()})(fr,()=>(()=>{var p={433:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV11=void 0;const a=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],h=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],d=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],l=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let f;function S(y,v){let t,r=0,s=v.length-1;if(y<v[0][0]||y>v[s][1])return!1;for(;s>=r;)if(t=r+s>>1,y>v[t][1])r=t+1;else{if(!(y<v[t][0]))return!0;s=t-1}return!1}i.UnicodeV11=class{constructor(){if(this.version="11",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160);for(let y=0;y<a.length;++y)f.fill(0,a[y][0],a[y][1]+1);for(let y=0;y<d.length;++y)f.fill(2,d[y][0],d[y][1]+1)}}wcwidth(y){return y<32?0:y<127?1:y<65536?f[y]:S(y,h)?0:S(y,l)?2:1}}}},m={};function w(E){var i=m[E];if(i!==void 0)return i.exports;var a=m[E]={exports:{}};return p[E](a,a.exports,w),a.exports}var x={};return(()=>{var E=x;Object.defineProperty(E,"__esModule",{value:!0}),E.Unicode11Addon=void 0;const i=w(433);E.Unicode11Addon=class{activate(a){a.unicode.register(new i.UnicodeV11)}dispose(){}}})(),x})())})(Sr);var ta=Sr.exports,Cr={exports:{}};(function(e,n){(function(p,m){e.exports=m()})(self,()=>(()=>{var p={6:(E,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkComputer=i.WebLinkProvider=void 0,i.WebLinkProvider=class{constructor(h,d,l,f={}){this._terminal=h,this._regex=d,this._handler=l,this._options=f}provideLinks(h,d){const l=a.computeLink(h,this._regex,this._terminal,this._handler);d(this._addCallbacks(l))}_addCallbacks(h){return h.map(d=>(d.leave=this._options.leave,d.hover=(l,f)=>{if(this._options.hover){const{range:S}=d;this._options.hover(l,f,S)}},d))}};class a{static computeLink(d,l,f,S){const y=new RegExp(l.source,(l.flags||"")+"g"),[v,t]=a._getWindowedLineStrings(d-1,f),r=v.join("");let s;const o=[];for(;s=y.exec(r);){const u=s[0];try{const R=new URL(u),T=decodeURI(R.toString());if(u!==T&&u+"/"!==T)continue}catch{continue}const[_,g]=a._mapStrIdx(f,t,0,s.index),[C,c]=a._mapStrIdx(f,_,g,u.length);if(_===-1||g===-1||C===-1||c===-1)continue;const b={start:{x:g+1,y:_+1},end:{x:c,y:C+1}};o.push({range:b,text:u,activate:S})}return o}static _getWindowedLineStrings(d,l){let f,S=d,y=d,v=0,t="";const r=[];if(f=l.buffer.active.getLine(d)){const s=f.translateToString(!0);if(f.isWrapped&&s[0]!==" "){for(v=0;(f=l.buffer.active.getLine(--S))&&v<2048&&(t=f.translateToString(!0),v+=t.length,r.push(t),f.isWrapped&&t.indexOf(" ")===-1););r.reverse()}for(r.push(s),v=0;(f=l.buffer.active.getLine(++y))&&f.isWrapped&&v<2048&&(t=f.translateToString(!0),v+=t.length,r.push(t),t.indexOf(" ")===-1););}return[r,S]}static _mapStrIdx(d,l,f,S){const y=d.buffer.active,v=y.getNullCell();let t=f;for(;S;){const r=y.getLine(l);if(!r)return[-1,-1];for(let s=t;s<r.length;++s){r.getCell(s,v);const o=v.getChars();if(v.getWidth()&&(S-=o.length||1,s===r.length-1&&o==="")){const u=y.getLine(l+1);u&&u.isWrapped&&(u.getCell(0,v),v.getWidth()===2&&(S+=1))}if(S<0)return[l,s]}l++,t=0}return[l,t]}}i.LinkComputer=a}},m={};function w(E){var i=m[E];if(i!==void 0)return i.exports;var a=m[E]={exports:{}};return p[E](a,a.exports,w),a.exports}var x={};return(()=>{var E=x;Object.defineProperty(E,"__esModule",{value:!0}),E.WebLinksAddon=void 0;const i=w(6),a=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function h(d,l){const f=window.open();if(f){try{f.opener=null}catch{}f.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}E.WebLinksAddon=class{constructor(d=h,l={}){this._handler=d,this._options=l}activate(d){this._terminal=d;const l=this._options,f=l.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new i.WebLinkProvider(this._terminal,f,this._handler,l))}dispose(){var d;(d=this._linkProvider)===null||d===void 0||d.dispose()}}})(),x})())})(Cr);var ia=Cr.exports;const sa={__name:"Terminal",props:{uri:String},setup(e){let n=an(null);const p=e,m=new Yo.Terminal({screenKeys:!0,rendererType:"canvas",useStyle:!0,cursorBlink:!0,convertEol:!0,cursorWidth:2,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace",fullscreenWin:!0,maximizeWin:!0,screenReaderMode:!0,fontSize:16,cursorStyle:"bar",allowProposedApi:!0,rightClickSelectsWord:!0}),w=new Qo.FitAddon;let x=null;const E=()=>{const a=new Zo.AttachAddon(x),h=new ea.SerializeAddon,d=new ta.Unicode11Addon,l=new ia.WebLinksAddon;m.loadAddon(a),m.loadAddon(w),m.loadAddon(h),m.loadAddon(d),m.loadAddon(l),m.open(n.value),m.resize(80,24),m.focus(),w.fit()},i=()=>{const a=`${location.protocol==="http:"?"ws":"wss"}://${window.location.hostname}:${window.location.port}${p.uri}`;x=new WebSocket(a),m.onKey(h=>{h.key===""?navigator.clipboard.readText().then(d=>{x.send(d)}):h.key===""&&m.hasSelection()&&(navigator.clipboard.writeText(m.getSelection()),m.clearSelection(),h.stop())}),x.onopen=()=>{E()},x.onclose=()=>{m&&m.dispose()},x.onerror=h=>{m&&m.dispose(),console.log("socket err: ",h),x.destroy(),i()},window.addEventListener("resize",()=>{w.fit()},!1)};return Ys(()=>{i()}),Ii(()=>{x&&x.close(),m.dispose()}),(a,h)=>(ar(),oo("div",{class:"h-full w-full bg-black",ref_key:"terminalRef",ref:n},null,512))}},ra={__name:"App",setup(e){const n=window.location.search,m=new URLSearchParams(n).get("rule");return(w,x)=>(ar(),ao(sa,{style:{height:"100vh",width:"100vw"},uri:Ws(m)==="ctrl"?"/ctrl":"/see"},null,8,["uri"]))}};Go(ra).mount("#app");
